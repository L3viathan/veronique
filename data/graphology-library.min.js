!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).graphologyLibrary={})}(this,(function(t){"use strict";var e={},r={},n=function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.addUndirectedEdgeWithKey&&"function"==typeof t.dropNode&&"boolean"==typeof t.multi},i=function(t){return null!==t&&"function"==typeof t&&"object"==typeof t.prototype&&"function"==typeof t.prototype.addUndirectedEdgeWithKey&&"function"==typeof t.prototype.dropNode},o=function t(e,r){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if((n=e.length)!=r.length)return!1;for(i=n;0!=i--;)if(!t(e[i],r[i]))return!1;return!0}if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(i of e.entries())if(!r.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],r.get(i[0])))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(i of e.entries())if(!r.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if((n=e.length)!=r.length)return!1;for(i=n;0!=i--;)if(e[i]!==r[i])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((n=(o=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!=i--;){var s=o[i];if(!t(e[s],r[s]))return!1}return!0}return e!=e&&r!=r},s=Symbol("size");function a(t,e){var r,n,i,s,a=t.length,h=e.length;if(a!==h)return!1;var u=new Set;t:for(i=0;i<a;i++){for(r=t[i],s=0;s<h;s++)if(!u.has(s)&&(n=e[s],o(r,n))){u.add(s);continue t}return!1}return!0}function h(t,e){if(t[s]!==e[s])return!1;for(var r in t)if(!a(t[r],e[r]))return!1;return!0}function u(t,e){var r,n={};return t.forEachOutEdge(e,(function(t,e,i,o){r=n[o]||0,r++,n[o]=r})),n}function d(t,e){var r,n={};return t.forEachUndirectedEdge(e,(function(t,i,o,s){e>(s=e===o?s:o)||(r=n[s]||0,r++,n[s]=r)})),n}function l(t,e){var r,n={};return n[s]=0,t.forEachOutEdge(e,(function(t,e,i,o){(r=n[o])||(r=[],n[s]+=1,n[o]=r),r.push(e)})),n}function g(t,e){var r,n={};return n[s]=0,t.forEachUndirectedEdge(e,(function(t,i,o,a){e>(a=e===o?a:o)||((r=n[a])||(r=[],n[s]+=1,n[a]=r),r.push(i))})),n}function c(t,e,r){return e===r||e.order===r.order&&e.everyNode((function(e,n){return!!r.hasNode(e)&&(!t||o(n,r.getNodeAttributes(e)))}))}function f(t,e,r,n){if(r===n)return!0;if(e){if("directed"===r.type&&"undirected"===n.type||"undirected"===r.type&&"directed"===n.type)return!1}else if(r.type!==n.type||r.allowSelfLoops!==n.allowSelfLoops||r.multi!==n.multi)return!1;if(r.directedSize!==n.directedSize||r.undirectedSize!==n.undirectedSize)return!1;if(!c(t,r,n))return!1;var i=!1,s=!1;if(r.multi||n.multi){var a=t?l:u,f=t?h:o;if(i=r.everyNode((function(t){var e=a(r,t),i=a(n,t);return f(e,i)})),!i)return!1;if(a=t?g:d,s=r.everyNode((function(t){var e=a(r,t),i=a(n,t);return f(e,i)})),!s)return!1}else{if(!(i=r.everyDirectedEdge((function(e,i,s,a){return!!n.hasDirectedEdge(s,a)&&(!t||o(r.getDirectedEdgeAttributes(s,a),n.getDirectedEdgeAttributes(s,a)))}))))return!1;if(!(s=r.everyUndirectedEdge((function(e,i,s,a){return!!n.hasUndirectedEdge(s,a)&&(!t||o(r.getUndirectedEdgeAttributes(s,a),n.getUndirectedEdgeAttributes(s,a)))}))))return!1}return!0}r.isGraph=n,r.isGraphConstructor=i,r.haveSameNodes=c.bind(null,!1),r.haveSameNodesDeep=c.bind(null,!0),r.areSameGraphs=f.bind(null,!1,!1),r.areSameGraphsDeep=f.bind(null,!0,!1),r.haveSameEdges=f.bind(null,!1,!0),r.haveSameEdgesDeep=f.bind(null,!0,!0);var p=r,y={},m={},v={},w={};var b=function t(e,r){e=e||{};var n,i={};for(var o in r){var s=e[o],a=r[o];!(n=a)||"object"!=typeof n||"function"==typeof n||Array.isArray(n)||n instanceof Set||n instanceof Map||n instanceof RegExp||n instanceof Date?i[o]=void 0===s?a:s:i[o]=t(s,a)}return i},E={identity:function(){return Float64Array.of(1,0,0,0,1,0,0,0,1)},scale:function(t,e,r){return t[0]=e,t[4]="number"==typeof r?r:e,t},rotate:function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[3]=-r,t[4]=n,t},translate:function(t,e,r){return t[6]=e,t[7]=r,t},multiply:function(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],h=t[6],u=t[7],d=t[8],l=e[0],g=e[1],c=e[2],f=e[3],p=e[4],y=e[5],m=e[6],v=e[7],w=e[8];return t[0]=l*r+g*o+c*h,t[1]=l*n+g*s+c*u,t[2]=l*i+g*a+c*d,t[3]=f*r+p*o+y*h,t[4]=f*n+p*s+y*u,t[5]=f*i+p*a+y*d,t[6]=m*r+v*o+w*h,t[7]=m*n+v*s+w*u,t[8]=m*i+v*a+w*d,t},multiplyVec2:function(t,e){var r=t[0],n=t[1],i=t[3],o=t[4],s=t[6],a=t[7],h=e.x,u=e.y;e.x=h*r+u*i+s,e.y=h*n+u*o+a}},A=b,x=E,z=x.identity,M=x.multiply,D=x.translate,N=x.scale,S=x.rotate,k=x.multiplyVec2;var C={camera:{x:.5,y:.5,angle:0,ratio:1},padding:0};w.createGraphToViewportConversionFunction=function(t,e,r){var n=(r=A(r,C)).camera,i=t.x[1],o=t.y[1],s=t.x[0],a=t.y[0],h=i-s,u=o-a,d=e.width,l=e.height,g=Math.max(h,u)||1,c=(i+s)/2,f=(o+a)/2,p=Math.min(d,l);p-=2*r.padding;var y=function(t,e,r,n){var i=n/r,o=e/t;return i<1&&o>1||i>1&&o<1?1:Math.min(Math.max(o,1/o),Math.max(1/i,i))}(h,u,d,l),m=z();M(m,N(z(),d/2,l/2)),M(m,D(z(),1,1)),M(m,N(z(),1,-1)),M(m,N(z(),p/d*2*y,p/l*2*y)),M(m,S(z(),-n.angle)),M(m,N(z(),1/n.ratio)),M(m,D(z(),-n.x,-n.y)),M(m,D(z(),.5,.5)),M(m,N(z(),1/g)),M(m,D(z(),-c,-f));var v=function(t){return k(m,t),t},w=function(t){return v({x:t.x,y:t.y})};return w.assign=v,w};var W={},O=b,U={batchSize:500,padding:20,width:2048,height:2048,nodes:{reducer:null,defaultColor:"#999"},edges:{reducer:null,defaultColor:"#ccc"}};W.DEFAULTS=U,W.refineSettings=function(t){var e={width:(t=t||{}).width,height:t.height};if(e.width&&!e.height&&(e.height=e.width),e.height&&!e.width&&(e.width=e.height),t=O(t,e),!(t=O(t,U)).width&&!t.height)throw new Error("graphology-canvas: need at least a valid width or height!");return t},W.DEFAULT_NODE_REDUCER=function(t,e,r){var n={type:r.type||"circle",label:r.label||e,x:r.x,y:r.y,size:r.size||1,color:r.color||t.nodes.defaultColor};if("number"!=typeof n.x||"number"!=typeof n.y)throw new Error('graphology-canvas: the "'+e+'" node has no valid x or y position.');return n},W.DEFAULT_EDGE_REDUCER=function(t,e,r){return{type:r.type||"line",size:r.size||1,color:r.color||t.edges.defaultColor}};var I=W,P=w.createGraphToViewportConversionFunction;v.reduceNodes=function(t,e){var r=e.width,n=e.height,i=1/0,o=-1/0,s=1/0,a=-1/0,h={};t.forEachNode((function(t,r){"function"==typeof e.nodes.reducer&&(r=e.nodes.reducer(e,t,r)),r=I.DEFAULT_NODE_REDUCER(e,t,r),h[t]=r;var n=r.x,u=r.y;n<i&&(i=n),n>o&&(o=n),u<s&&(s=u),u>a&&(a=u)}));var u=P({x:[i,o],y:[s,a]},{width:r,height:n},{padding:e.padding});for(var d in h)u.assign(h[d]);return h};var F=2*Math.PI,L=v,T=W,j=function(t,e,r,n){t.fillStyle=e,t.fillRect(0,0,r,n)},R={nodes:{circle:function(t,e,r){e.fillStyle=r.color,e.beginPath(),e.arc(r.x,r.y,r.size,0,F,!0),e.closePath(),e.fill()}},edges:{line:function(t,e,r,n,i){e.strokeStyle=r.color,e.lineWidth=r.size,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(i.x,i.y),e.stroke()}}};m.renderSync=function(t,e,r){var n,i,o,s,a=L.reduceNodes(t,r);for(o in j(e,"white",r.width,r.height),t.forEachEdge((function(t,o,s,h){"function"==typeof r.edges.reducer&&(o=r.edges.reducer(r,t,o)),o=T.DEFAULT_EDGE_REDUCER(r,t,o),n=a[s],i=a[h],R.edges[o.type](r,e,o,n,i)})),a)s=a[o],R.nodes[s.type](r,e,s)};var G=function(t){return setTimeout(t,16)};function q(t,e,r){return t()?(e(),t()?G((function(){q(t,e,r)})):r()):r()}"undefined"!=typeof requestAnimationFrame&&(G=requestAnimationFrame),m.renderAsync=function(t,e,r,n){var i=L.reduceNodes(t,r);j(e,"white",r.width,r.height);var o=t.edges(),s=0;var a=new Array(t.order),h=0;for(var u in i)a[h++]=i[u];var d=0;function l(){var t,n;for(t=Math.min(d+r.batchSize,a.length);d<t;d++)n=a[d],R.nodes[n.type](r,e,n)}function g(){return d<a.length}q((function(){return s<o.length}),(function(){var n,a,h,u,d,l,g,c;for(n=Math.min(s+r.batchSize,o.length);s<n;s++)a=o[s],h=t.getEdgeAttributes(a),d=(u=t.extremities(a))[0],l=u[1],"function"==typeof r.edges.reducer&&(h=r.edges.reducer(r,a,h)),h=T.DEFAULT_EDGE_REDUCER(r,a,h),g=i[d],c=i[l],R.edges[h.type](r,e,h,g,c)}),(function(){q(g,l,(function(){return n()}))}))};var B=n,_=m,H=W.refineSettings;y.render=function(t,e,r){if(!B(t))throw new Error("graphology-canvas/render: expecting a valid graphology instance.");r=H(r),_.renderSync(t,e,r)},y.renderAsync=function(t,e,r,n){3===arguments.length&&(n=r,r={}),r=H(r),_.renderAsync(t,e,r,n)};var V=y,Y=n,K=function(t){if(!Y(t))throw new Error("graphology-utils/infer-type: expecting a valid graphology instance.");var e=t.type;return"mixed"!==e?e:0===t.directedSize&&0===t.undirectedSize||t.directedSize>0&&t.undirectedSize>0?"mixed":t.directedSize>0?"directed":"undirected"};function X(t){if("function"!=typeof t)throw new Error("obliterator/iterator: expecting a function!");this.next=t}"undefined"!=typeof Symbol&&(X.prototype[Symbol.iterator]=function(){return this}),X.of=function(){var t=arguments,e=t.length,r=0;return new X((function(){return r>=e?{done:!0}:{done:!1,value:t[r++]}}))},X.empty=function(){return new X((function(){return{done:!0}}))},X.fromSequence=function(t){var e=0,r=t.length;return new X((function(){return e>=r?{done:!0}:{done:!1,value:t[e++]}}))},X.is=function(t){return t instanceof X||"object"==typeof t&&null!==t&&"function"==typeof t.next};var J=X,Q={};!function(t){var e=Math.pow(2,8)-1,r=Math.pow(2,16)-1,n=Math.pow(2,32)-1,i=Math.pow(2,7)-1,o=Math.pow(2,15)-1,s=Math.pow(2,31)-1;t.getPointerArray=function(t){var i=t-1;if(i<=e)return Uint8Array;if(i<=r)return Uint16Array;if(i<=n)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},t.getSignedPointerArray=function(t){var e=t-1;return e<=i?Int8Array:e<=o?Int16Array:e<=s?Int32Array:Float64Array},t.getNumberType=function(t){return t===(0|t)?-1===Math.sign(t)?t<=127&&t>=-128?Int8Array:t<=32767&&t>=-32768?Int16Array:Int32Array:t<=255?Uint8Array:t<=65535?Uint16Array:Uint32Array:Float64Array};var a={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};t.getMinimalRepresentation=function(e,r){var n,i,o,s,h,u=null,d=0;for(s=0,h=e.length;s<h;s++)o=r?r(e[s]):e[s],i=t.getNumberType(o),(n=a[i.name])>d&&(d=n,u=i);return u},t.isTypedArray=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(t)},t.concat=function(){var t,e,r,n=0;for(t=0,r=arguments.length;t<r;t++)n+=arguments[t].length;var i=new arguments[0].constructor(n);for(t=0,e=0;t<r;t++)i.set(arguments[t],e),e+=arguments[t].length;return i},t.indices=function(e){for(var r=new(t.getPointerArray(e))(e),n=0;n<e;n++)r[n]=n;return r}}(Q);var Z=J,$=Q.getPointerArray;function tt(t,e){arguments.length<2&&(e=t,t=Array);var r=$(e);this.size=0,this.length=e,this.dense=new r(e),this.sparse=new r(e),this.vals=new t(e)}tt.prototype.clear=function(){this.size=0},tt.prototype.has=function(t){var e=this.sparse[t];return e<this.size&&this.dense[e]===t},tt.prototype.get=function(t){var e=this.sparse[t];if(e<this.size&&this.dense[e]===t)return this.vals[e]},tt.prototype.set=function(t,e){var r=this.sparse[t];return r<this.size&&this.dense[r]===t?(this.vals[r]=e,this):(this.dense[this.size]=t,this.sparse[t]=this.size,this.vals[this.size]=e,this.size++,this)},tt.prototype.delete=function(t){var e=this.sparse[t];return!(e>=this.size||this.dense[e]!==t)&&(e=this.dense[this.size-1],this.dense[this.sparse[t]]=e,this.sparse[e]=this.sparse[t],this.size--,!0)},tt.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var r=0;r<this.size;r++)t.call(e,this.vals[r],this.dense[r])},tt.prototype.keys=function(){var t=this.size,e=this.dense,r=0;return new Z((function(){if(r<t){var n=e[r];return r++,{value:n}}return{done:!0}}))},tt.prototype.values=function(){var t=this.size,e=this.vals,r=0;return new Z((function(){if(r<t){var n=e[r];return r++,{value:n}}return{done:!0}}))},tt.prototype.entries=function(){var t=this.size,e=this.dense,r=this.vals,n=0;return new Z((function(){if(n<t){var i=[e[n],r[n]];return n++,{value:i}}return{done:!0}}))},"undefined"!=typeof Symbol&&(tt.prototype[Symbol.iterator]=tt.prototype.entries),tt.prototype.inspect=function(){for(var t=new Map,e=0;e<this.size;e++)t.set(this.dense[e],this.vals[e]);return Object.defineProperty(t,"constructor",{value:tt,enumerable:!1}),t.length=this.length,this.vals.constructor!==Array&&(t.type=this.vals.constructor.name),t},"undefined"!=typeof Symbol&&(tt.prototype[Symbol.for("nodejs.util.inspect.custom")]=tt.prototype.inspect);var et=tt,rt=J,nt=Q.getPointerArray;function it(t){var e=nt(t);this.start=0,this.size=0,this.capacity=t,this.dense=new e(t),this.sparse=new e(t)}it.prototype.clear=function(){this.start=0,this.size=0},it.prototype.has=function(t){if(0===this.size)return!1;var e=this.sparse[t];return(e<this.capacity&&e>=this.start&&e<this.start+this.size||e<(this.start+this.size)%this.capacity)&&this.dense[e]===t},it.prototype.enqueue=function(t){var e=this.sparse[t];if(0!==this.size&&((e<this.capacity&&e>=this.start&&e<this.start+this.size||e<(this.start+this.size)%this.capacity)&&this.dense[e]===t))return this;return e=(this.start+this.size)%this.capacity,this.dense[e]=t,this.sparse[t]=e,this.size++,this},it.prototype.dequeue=function(){if(0!==this.size){var t=this.start;this.size--,this.start++,this.start===this.capacity&&(this.start=0);var e=this.dense[t];return this.sparse[e]=this.capacity,e}},it.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var r=this.capacity,n=this.size,i=this.start,o=0;o<n;)t.call(e,this.dense[i],o,this),o++,++i===r&&(i=0)},it.prototype.values=function(){var t=this.dense,e=this.capacity,r=this.size,n=this.start,i=0;return new rt((function(){if(i>=r)return{done:!0};var o=t[n];return n++,i++,n===e&&(n=0),{value:o,done:!1}}))},"undefined"!=typeof Symbol&&(it.prototype[Symbol.iterator]=it.prototype.values),it.prototype.inspect=function(){var t=[];return this.forEach((function(e){t.push(e)})),Object.defineProperty(t,"constructor",{value:it,enumerable:!1}),t.capacity=this.capacity,t},"undefined"!=typeof Symbol&&(it.prototype[Symbol.for("nodejs.util.inspect.custom")]=it.prototype.inspect);var ot=it;function st(t){return function(e){return"number"!=typeof e&&(e=e.length),Math.floor(t()*e)}}var at=st(Math.random);at.createRandomIndex=st;var ht=at,ut={},dt={};function lt(t){return"number"!=typeof t||isNaN(t)?1:t}function gt(t,e){var r={},n=function(t){return void 0===t?e:t};"function"==typeof e&&(n=e);var i=function(e){return n(e[t])},o=function(){return n(void 0)};return"string"==typeof t?(r.fromAttributes=i,r.fromGraph=function(t,e){return i(t.getEdgeAttributes(e))},r.fromEntry=function(t,e){return i(e)},r.fromPartialEntry=r.fromEntry,r.fromMinimalEntry=r.fromEntry):"function"==typeof t?(r.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},r.fromGraph=function(e,r){var i=e.extremities(r);return n(t(r,e.getEdgeAttributes(r),i[0],i[1],e.getNodeAttributes(i[0]),e.getNodeAttributes(i[1]),e.isUndirected(r)))},r.fromEntry=function(e,r,i,o,s,a,h){return n(t(e,r,i,o,s,a,h))},r.fromPartialEntry=function(e,r,i,o){return n(t(e,r,i,o))},r.fromMinimalEntry=function(e,r){return n(t(e,r))}):(r.fromAttributes=o,r.fromGraph=o,r.fromEntry=o,r.fromMinimalEntry=o),r}dt.createNodeValueGetter=function(t,e){var r={},n=function(t){return void 0===t?e:t};"function"==typeof e&&(n=e);var i=function(e){return n(e[t])},o=function(){return n(void 0)};return"string"==typeof t?(r.fromAttributes=i,r.fromGraph=function(t,e){return i(t.getNodeAttributes(e))},r.fromEntry=function(t,e){return i(e)}):"function"==typeof t?(r.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},r.fromGraph=function(e,r){return n(t(r,e.getNodeAttributes(r)))},r.fromEntry=function(e,r){return n(t(e,r))}):(r.fromAttributes=o,r.fromGraph=o,r.fromEntry=o),r},dt.createEdgeValueGetter=gt,dt.createEdgeWeightGetter=function(t){return gt(t,lt)};var ct=Q,ft=b,pt=dt.createEdgeWeightGetter,yt=Symbol.for("nodejs.util.inspect.custom"),mt={getEdgeWeight:"weight",keepDendrogram:!1,resolution:1};function vt(t,e){var r=(e=ft(e,mt)).resolution,n=pt(e.getEdgeWeight).fromEntry,i=2*(t.size-t.selfLoopCount),o=ct.getPointerArray(i),s=ct.getPointerArray(t.order+1),a=e.getEdgeWeight?Float64Array:ct.getPointerArray(2*t.size);this.C=t.order,this.M=0,this.E=i,this.U=0,this.resolution=r,this.level=0,this.graph=t,this.nodes=new Array(t.order),this.keepDendrogram=e.keepDendrogram,this.neighborhood=new s(i),this.weights=new a(i),this.loops=new a(t.order),this.starts=new o(t.order+1),this.belongings=new s(t.order),this.dendrogram=[],this.mapping=null,this.counts=new s(t.order),this.unused=new s(t.order),this.totalWeights=new a(t.order);var h,u={},d=0,l=0,g=this;t.forEachNode((function(e){g.nodes[d]=e,u[e]=d,l+=t.undirectedDegreeWithoutSelfLoops(e),g.starts[d]=l,g.belongings[d]=d,g.counts[d]=1,d++})),t.forEachEdge((function(t,e,r,i,o,s,a){if(h=n(t,e,r,i,o,s,a),r=u[r],i=u[i],g.M+=h,r===i)g.totalWeights[r]+=2*h,g.loops[r]=2*h;else{g.totalWeights[r]+=h,g.totalWeights[i]+=h;var d=--g.starts[r],l=--g.starts[i];g.neighborhood[d]=i,g.neighborhood[l]=r,g.weights[d]=h,g.weights[l]=h}})),this.starts[d]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}function wt(t,e){var r=(e=ft(e,mt)).resolution,n=pt(e.getEdgeWeight).fromEntry,i=2*(t.size-t.selfLoopCount),o=ct.getPointerArray(i),s=ct.getPointerArray(t.order+1),a=e.getEdgeWeight?Float64Array:ct.getPointerArray(2*t.size);this.C=t.order,this.M=0,this.E=i,this.U=0,this.resolution=r,this.level=0,this.graph=t,this.nodes=new Array(t.order),this.keepDendrogram=e.keepDendrogram,this.neighborhood=new s(i),this.weights=new a(i),this.loops=new a(t.order),this.starts=new o(t.order+1),this.offsets=new o(t.order),this.belongings=new s(t.order),this.dendrogram=[],this.counts=new s(t.order),this.unused=new s(t.order),this.totalInWeights=new a(t.order),this.totalOutWeights=new a(t.order);var h,u={},d=0,l=0,g=this;t.forEachNode((function(e){g.nodes[d]=e,u[e]=d,l+=t.outDegreeWithoutSelfLoops(e),g.starts[d]=l,l+=t.inDegreeWithoutSelfLoops(e),g.offsets[d]=l,g.belongings[d]=d,g.counts[d]=1,d++})),t.forEachEdge((function(t,e,r,i,o,s,a){if(h=n(t,e,r,i,o,s,a),r=u[r],i=u[i],g.M+=h,r===i)g.loops[r]+=h,g.totalInWeights[r]+=h,g.totalOutWeights[r]+=h;else{g.totalOutWeights[r]+=h,g.totalInWeights[i]+=h;var d=--g.starts[r],l=--g.offsets[i];g.neighborhood[d]=i,g.neighborhood[l]=r,g.weights[d]=h,g.weights[l]=h}})),this.starts[d]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}vt.prototype.isolate=function(t,e){var r=this.belongings[t];if(1===this.counts[r])return r;var n=this.unused[--this.U],i=this.loops[t];return this.totalWeights[r]-=e+i,this.totalWeights[n]+=e+i,this.belongings[t]=n,this.counts[r]--,this.counts[n]++,n},vt.prototype.move=function(t,e,r){var n=this.belongings[t],i=this.loops[t];this.totalWeights[n]-=e+i,this.totalWeights[r]+=e+i,this.belongings[t]=r;var o=1==this.counts[n]--;this.counts[r]++,o&&(this.unused[this.U++]=n)},vt.prototype.computeNodeDegree=function(t){var e,r,n=0;for(e=this.starts[t],r=this.starts[t+1];e<r;e++)n+=this.weights[e];return n},vt.prototype.expensiveIsolate=function(t){var e=this.computeNodeDegree(t);return this.isolate(t,e)},vt.prototype.expensiveMove=function(t,e){var r=this.computeNodeDegree(t);this.move(t,r,e)},vt.prototype.zoomOut=function(){var t,e,r,n,i,o,s,a,h,u,d,l=new Array(this.C-this.U),g={},c=this.nodes.length,f=0,p=0;for(t=0,r=this.C;t<r;t++)(o=this.belongings[t])in g||(g[o]=f,l[f]={adj:{},totalWeights:this.totalWeights[o],internalWeights:0},f++),this.belongings[t]=g[o];if(this.keepDendrogram){for(u=this.dendrogram[this.level],d=new(ct.getPointerArray(f))(c),t=0;t<c;t++)d[t]=this.belongings[u[t]];this.dendrogram.push(d)}else for(t=0;t<c;t++)this.mapping[t]=this.belongings[this.mapping[t]];for(t=0,r=this.C;t<r;t++)for(h=(a=l[o=this.belongings[t]]).adj,a.internalWeights+=this.loops[t],e=this.starts[t],n=this.starts[t+1];e<n;e++)i=this.neighborhood[e],o!==(s=this.belongings[i])?(s in h||(h[s]=0),h[s]+=this.weights[e]):a.internalWeights+=this.weights[e];for(this.C=f,i=0,o=0;o<f;o++)for(s in h=(a=l[o]).adj,o=+o,this.totalWeights[o]=a.totalWeights,this.loops[o]=a.internalWeights,this.counts[o]=1,this.starts[o]=i,this.belongings[o]=o,h)this.neighborhood[i]=+s,this.weights[i]=h[s],p++,i++;return this.starts[f]=p,this.E=p,this.U=0,this.level++,g},vt.prototype.modularity=function(){var t,e,r,n,i=0,o=2*this.M,s=new Float64Array(this.C);for(e=0;e<this.C;e++)for(s[t=this.belongings[e]]+=this.loops[e],r=this.starts[e],n=this.starts[e+1];r<n;r++)t===this.belongings[this.neighborhood[r]]&&(s[t]+=this.weights[r]);for(e=0;e<this.C;e++)i+=s[e]/o-Math.pow(this.totalWeights[e]/o,2)*this.resolution;return i},vt.prototype.delta=function(t,e,r,n){var i=this.M;return r/i-this.totalWeights[n]*(e+=this.loops[t])*this.resolution/(2*i*i)},vt.prototype.deltaWithOwnCommunity=function(t,e,r,n){var i=this.M;return r/i-(this.totalWeights[n]-(e+=this.loops[t]))*e*this.resolution/(2*i*i)},vt.prototype.fastDelta=function(t,e,r,n){var i=this.M,o=this.totalWeights[n];return r-(e+=this.loops[t])*o*this.resolution/(2*i)},vt.prototype.fastDeltaWithOwnCommunity=function(t,e,r,n){var i=this.M,o=this.totalWeights[n];return r-(e+=this.loops[t])*(o-e)*this.resolution/(2*i)},vt.prototype.bounds=function(t){return[this.starts[t],this.starts[t+1]]},vt.prototype.project=function(){var t=this,e={};return t.nodes.slice(0,this.C).forEach((function(r,n){e[r]=Array.from(t.neighborhood.slice(t.starts[n],t.starts[n+1])).map((function(e){return t.nodes[e]}))})),e},vt.prototype.collect=function(t){arguments.length<1&&(t=this.level);var e,r,n={},i=this.keepDendrogram?this.dendrogram[t]:this.mapping;for(e=0,r=i.length;e<r;e++)n[this.nodes[e]]=i[e];return n},vt.prototype.assign=function(t,e){arguments.length<2&&(e=this.level);var r,n,i=this.keepDendrogram?this.dendrogram[e]:this.mapping;for(r=0,n=i.length;r<n;r++)this.graph.setNodeAttribute(this.nodes[r],t,i[r])},vt.prototype[yt]=function(){var t={};Object.defineProperty(t,"constructor",{value:vt,enumerable:!1}),t.C=this.C,t.M=this.M,t.E=this.E,t.U=this.U,t.resolution=this.resolution,t.level=this.level,t.nodes=this.nodes,t.starts=this.starts.slice(0,t.C+1);var e=this;return["neighborhood","weights"].forEach((function(r){t[r]=e[r].slice(0,t.E)})),["counts","loops","belongings","totalWeights"].forEach((function(r){t[r]=e[r].slice(0,t.C)})),t.unused=this.unused.slice(0,this.U),this.keepDendrogram?t.dendrogram=this.dendrogram:t.mapping=this.mapping,t},wt.prototype.bounds=vt.prototype.bounds,wt.prototype.inBounds=function(t){return[this.offsets[t],this.starts[t+1]]},wt.prototype.outBounds=function(t){return[this.starts[t],this.offsets[t]]},wt.prototype.project=vt.prototype.project,wt.prototype.projectIn=function(){var t=this,e={};return t.nodes.slice(0,this.C).forEach((function(r,n){e[r]=Array.from(t.neighborhood.slice(t.offsets[n],t.starts[n+1])).map((function(e){return t.nodes[e]}))})),e},wt.prototype.projectOut=function(){var t=this,e={};return t.nodes.slice(0,this.C).forEach((function(r,n){e[r]=Array.from(t.neighborhood.slice(t.starts[n],t.offsets[n])).map((function(e){return t.nodes[e]}))})),e},wt.prototype.isolate=function(t,e,r){var n=this.belongings[t];if(1===this.counts[n])return n;var i=this.unused[--this.U],o=this.loops[t];return this.totalInWeights[n]-=e+o,this.totalInWeights[i]+=e+o,this.totalOutWeights[n]-=r+o,this.totalOutWeights[i]+=r+o,this.belongings[t]=i,this.counts[n]--,this.counts[i]++,i},wt.prototype.move=function(t,e,r,n){var i=this.belongings[t],o=this.loops[t];this.totalInWeights[i]-=e+o,this.totalInWeights[n]+=e+o,this.totalOutWeights[i]-=r+o,this.totalOutWeights[n]+=r+o,this.belongings[t]=n;var s=1==this.counts[i]--;this.counts[n]++,s&&(this.unused[this.U++]=i)},wt.prototype.computeNodeInDegree=function(t){var e,r,n=0;for(e=this.offsets[t],r=this.starts[t+1];e<r;e++)n+=this.weights[e];return n},wt.prototype.computeNodeOutDegree=function(t){var e,r,n=0;for(e=this.starts[t],r=this.offsets[t];e<r;e++)n+=this.weights[e];return n},wt.prototype.expensiveMove=function(t,e){var r=this.computeNodeInDegree(t),n=this.computeNodeOutDegree(t);this.move(t,r,n,e)},wt.prototype.zoomOut=function(){var t,e,r,n,i,o,s,a,h,u,d,l,g,c,f,p=new Array(this.C-this.U),y={},m=this.nodes.length,v=0,w=0;for(t=0,r=this.C;t<r;t++)(o=this.belongings[t])in y||(y[o]=v,p[v]={inAdj:{},outAdj:{},totalInWeights:this.totalInWeights[o],totalOutWeights:this.totalOutWeights[o],internalWeights:0},v++),this.belongings[t]=y[o];if(this.keepDendrogram){for(c=this.dendrogram[this.level],f=new(ct.getPointerArray(v))(m),t=0;t<m;t++)f[t]=this.belongings[c[t]];this.dendrogram.push(f)}else for(t=0;t<m;t++)this.mapping[t]=this.belongings[this.mapping[t]];for(t=0,r=this.C;t<r;t++)for(o=this.belongings[t],h=this.offsets[t],l=(a=p[o]).inAdj,g=a.outAdj,a.internalWeights+=this.loops[t],e=this.starts[t],n=this.starts[t+1];e<n;e++)i=this.neighborhood[e],d=(u=e<h)?g:l,o!==(s=this.belongings[i])?(s in d||(d[s]=0),d[s]+=this.weights[e]):u&&(a.internalWeights+=this.weights[e]);for(this.C=v,i=0,o=0;o<v;o++){for(s in l=(a=p[o]).inAdj,g=a.outAdj,o=+o,this.totalInWeights[o]=a.totalInWeights,this.totalOutWeights[o]=a.totalOutWeights,this.loops[o]=a.internalWeights,this.counts[o]=1,this.starts[o]=i,this.belongings[o]=o,g)this.neighborhood[i]=+s,this.weights[i]=g[s],w++,i++;for(s in this.offsets[o]=i,l)this.neighborhood[i]=+s,this.weights[i]=l[s],w++,i++}return this.starts[v]=w,this.E=w,this.U=0,this.level++,y},wt.prototype.modularity=function(){var t,e,r,n,i=0,o=this.M,s=new Float64Array(this.C);for(e=0;e<this.C;e++)for(s[t=this.belongings[e]]+=this.loops[e],r=this.starts[e],n=this.offsets[e];r<n;r++)t===this.belongings[this.neighborhood[r]]&&(s[t]+=this.weights[r]);for(e=0;e<this.C;e++)i+=s[e]/o-this.totalInWeights[e]*this.totalOutWeights[e]/Math.pow(o,2)*this.resolution;return i},wt.prototype.delta=function(t,e,r,n,i){var o=this.M,s=this.totalInWeights[i],a=this.totalOutWeights[i],h=this.loops[t];return n/o-((r+=h)*s+(e+=h)*a)*this.resolution/(o*o)},wt.prototype.deltaWithOwnCommunity=function(t,e,r,n,i){var o=this.M,s=this.totalInWeights[i],a=this.totalOutWeights[i],h=this.loops[t];return n/o-((r+=h)*(s-(e+=h))+e*(a-r))*this.resolution/(o*o)},wt.prototype.collect=vt.prototype.collect,wt.prototype.assign=vt.prototype.assign,wt.prototype[yt]=function(){var t={};Object.defineProperty(t,"constructor",{value:wt,enumerable:!1}),t.C=this.C,t.M=this.M,t.E=this.E,t.U=this.U,t.resolution=this.resolution,t.level=this.level,t.nodes=this.nodes,t.starts=this.starts.slice(0,t.C+1);var e=this;return["neighborhood","weights"].forEach((function(r){t[r]=e[r].slice(0,t.E)})),["counts","offsets","loops","belongings","totalInWeights","totalOutWeights"].forEach((function(r){t[r]=e[r].slice(0,t.C)})),t.unused=this.unused.slice(0,this.U),this.keepDendrogram?t.dendrogram=this.dendrogram:t.mapping=this.mapping,t},ut.UndirectedLouvainIndex=vt,ut.DirectedLouvainIndex=wt;var bt=b,Et=n,At=K,xt=et,zt=ot,Mt=ht.createRandomIndex,Dt=ut,Nt=Dt.UndirectedLouvainIndex,St=Dt.DirectedLouvainIndex,kt={nodeCommunityAttribute:"community",getEdgeWeight:"weight",fastLocalMoves:!0,randomWalk:!0,resolution:1,rng:Math.random};function Ct(t,e,r){var n=t.get(e);void 0===n&&(n=0),n+=r,t.set(e,n)}var Wt=1e-10;function Ot(t,e,r,n,i){return Math.abs(n-i)<Wt?t!==e&&r>t:n>i}function Ut(t,e,r){var n,i,o,s,a,h,u,d,l,g,c,f,p,y,m,v,w,b,E,A=new Nt(e,{getEdgeWeight:r.getEdgeWeight,keepDendrogram:t,resolution:r.resolution}),x=Mt(r.rng),z=!0,M=!0,D=new xt(Float64Array,A.C),N=0,S=0,k=[];for(r.fastLocalMoves&&(o=new zt(A.C));z;){if(f=A.C,z=!1,M=!0,r.fastLocalMoves){for(E=0,d=r.randomWalk?x(f):0,l=0;l<f;l++,d++)g=d%f,o.enqueue(g);for(;0!==o.size;){for(g=o.dequeue(),S++,p=0,D.clear(),n=A.belongings[g],s=A.starts[g],a=A.starts[g+1];s<a;s++)c=A.neighborhood[s],p+=h=A.weights[s],Ct(D,i=A.belongings[c],h);for(v=A.fastDeltaWithOwnCommunity(g,p,D.get(n)||0,n),m=n,u=0;u<D.size;u++)(i=D.dense[u])!==n&&(y=D.vals[u],N++,Ot(m,n,i,w=A.fastDelta(g,p,y,i),v)&&(v=w,m=i));if(v<0){if((m=A.isolate(g,p))===n)continue}else{if(m===n)continue;A.move(g,p,m)}for(z=!0,E++,s=A.starts[g],a=A.starts[g+1];s<a;s++)c=A.neighborhood[s],(i=A.belongings[c])!==m&&o.enqueue(c)}k.push(E)}else for(b=[],k.push(b);M;){for(M=!1,E=0,d=r.randomWalk?x(f):0,l=0;l<f;l++,d++){for(g=d%f,S++,p=0,D.clear(),n=A.belongings[g],s=A.starts[g],a=A.starts[g+1];s<a;s++)c=A.neighborhood[s],p+=h=A.weights[s],Ct(D,i=A.belongings[c],h);for(v=A.fastDeltaWithOwnCommunity(g,p,D.get(n)||0,n),m=n,u=0;u<D.size;u++)(i=D.dense[u])!==n&&(y=D.vals[u],N++,Ot(m,n,i,w=A.fastDelta(g,p,y,i),v)&&(v=w,m=i));if(v<0){if((m=A.isolate(g,p))===n)continue}else{if(m===n)continue;A.move(g,p,m)}M=!0,E++}b.push(E),z=M||z}z&&A.zoomOut()}return{index:A,deltaComputations:N,nodesVisited:S,moves:k}}function It(t,e,r){var n,i,o,s,a,h,u,d,l,g,c,f,p,y,m,v,w,b,E,A,x,z,M=new St(e,{getEdgeWeight:r.getEdgeWeight,keepDendrogram:t,resolution:r.resolution}),D=Mt(r.rng),N=!0,S=!0,k=new xt(Float64Array,M.C),C=0,W=0,O=[];for(r.fastLocalMoves&&(o=new zt(M.C));N;){if(y=M.C,N=!1,S=!0,r.fastLocalMoves){for(z=0,g=r.randomWalk?D(y):0,c=0;c<y;c++,g++)f=g%y,o.enqueue(f);for(;0!==o.size;){for(f=o.dequeue(),W++,m=0,v=0,k.clear(),n=M.belongings[f],s=M.starts[f],a=M.starts[f+1],h=M.offsets[f];s<a;s++)u=s<h,p=M.neighborhood[s],d=M.weights[s],u?v+=d:m+=d,Ct(k,i=M.belongings[p],d);for(E=M.deltaWithOwnCommunity(f,m,v,k.get(n)||0,n),b=n,l=0;l<k.size;l++)(i=k.dense[l])!==n&&(w=k.vals[l],C++,Ot(b,n,i,A=M.delta(f,m,v,w,i),E)&&(E=A,b=i));if(E<0){if((b=M.isolate(f,m,v))===n)continue}else{if(b===n)continue;M.move(f,m,v,b)}for(N=!0,z++,s=M.starts[f],a=M.starts[f+1];s<a;s++)p=M.neighborhood[s],(i=M.belongings[p])!==b&&o.enqueue(p)}O.push(z)}else for(x=[],O.push(x);S;){for(S=!1,z=0,g=r.randomWalk?D(y):0,c=0;c<y;c++,g++){for(f=g%y,W++,m=0,v=0,k.clear(),n=M.belongings[f],s=M.starts[f],a=M.starts[f+1],h=M.offsets[f];s<a;s++)u=s<h,p=M.neighborhood[s],d=M.weights[s],u?v+=d:m+=d,Ct(k,i=M.belongings[p],d);for(E=M.deltaWithOwnCommunity(f,m,v,k.get(n)||0,n),b=n,l=0;l<k.size;l++)(i=k.dense[l])!==n&&(w=k.vals[l],C++,Ot(b,n,i,A=M.delta(f,m,v,w,i),E)&&(E=A,b=i));if(E<0){if((b=M.isolate(f,m,v))===n)continue}else{if(b===n)continue;M.move(f,m,v,b)}S=!0,z++}x.push(z),N=S||N}N&&M.zoomOut()}return{index:M,deltaComputations:C,nodesVisited:W,moves:O}}function Pt(t,e,r,n){if(!Et(r))throw new Error("graphology-communities-louvain: the given graph is not a valid graphology instance.");var i=At(r);if("mixed"===i)throw new Error("graphology-communities-louvain: cannot run the algorithm on a true mixed graph.");n=bt(n,kt);var o=0;if(0===r.size){if(t)return void r.forEachNode((function(t){r.setNodeAttribute(t,n.nodeCommunityAttribute,o++)}));var s={};return r.forEachNode((function(t){s[t]=o++})),e?{communities:s,count:r.order,deltaComputations:0,dendrogram:null,level:0,modularity:NaN,moves:null,nodesVisited:0,resolution:n.resolution}:s}var a=("undirected"===i?Ut:It)(e,r,n),h=a.index;if(!e)return t?void h.assign(n.nodeCommunityAttribute):h.collect();var u={count:h.C,deltaComputations:a.deltaComputations,dendrogram:h.dendrogram,level:h.level,modularity:h.modularity(),moves:a.moves,nodesVisited:a.nodesVisited,resolution:n.resolution};return t?(h.assign(n.nodeCommunityAttribute),u):(u.communities=h.collect(),u)}var Ft=Pt.bind(null,!1,!1);Ft.assign=Pt.bind(null,!0,!1),Ft.detailed=Pt.bind(null,!1,!0),Ft.defaults=kt;var Lt=Ft,Tt={},jt={copyNode:function(t,e,r){return r=Object.assign({},r),t.addNode(e,r)}},Rt={};function Gt(t){this.graph=t,this.stack=new Array(t.order),this.seen=new Set,this.size=0}Rt.addEdge=function(t,e,r,n,i,o){return e?null==r?t.addUndirectedEdge(n,i,o):t.addUndirectedEdgeWithKey(r,n,i,o):null==r?t.addDirectedEdge(n,i,o):t.addDirectedEdgeWithKey(r,n,i,o)},Rt.copyEdge=function(t,e,r,n,i,o){return o=Object.assign({},o),e?null==r?t.addUndirectedEdge(n,i,o):t.addUndirectedEdgeWithKey(r,n,i,o):null==r?t.addDirectedEdge(n,i,o):t.addDirectedEdgeWithKey(r,n,i,o)},Rt.mergeEdge=function(t,e,r,n,i,o){return e?null==r?t.mergeUndirectedEdge(n,i,o):t.mergeUndirectedEdgeWithKey(r,n,i,o):null==r?t.mergeDirectedEdge(n,i,o):t.mergeDirectedEdgeWithKey(r,n,i,o)},Rt.updateEdge=function(t,e,r,n,i,o){return e?null==r?t.updateUndirectedEdge(n,i,o):t.updateUndirectedEdgeWithKey(r,n,i,o):null==r?t.updateDirectedEdge(n,i,o):t.updateDirectedEdgeWithKey(r,n,i,o)},Gt.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},Gt.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},Gt.prototype.forEachNodeYetUnseen=function(t){var e=this.seen,r=this.graph;r.someNode((function(n,i){return e.size===r.order||!e.has(n)&&!!t(n,i)}))},Gt.prototype.has=function(t){return this.seen.has(t)},Gt.prototype.push=function(t){var e=this.seen.size;return this.seen.add(t),e!==this.seen.size&&(this.stack[this.size++]=t,!0)},Gt.prototype.pushWith=function(t,e){var r=this.seen.size;return this.seen.add(t),r!==this.seen.size&&(this.stack[this.size++]=e,!0)},Gt.prototype.pop=function(){if(0!==this.size)return this.stack[--this.size]};var qt=Gt,Bt=n,_t=jt.copyNode,Ht=Rt.copyEdge,Vt=qt;function Yt(t,e){if(!Bt(t))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(t.order){var r=new Vt(t),n=r.push.bind(r);r.forEachNodeYetUnseen((function(i){var o,s=[];for(r.push(i);0!==r.size;)o=r.pop(),s.push(o),t.forEachNeighbor(o,n);e(s)}))}}function Kt(t,e){if(!Bt(t))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(t.order){var r=new Vt(t),n=r.push.bind(r);r.forEachNodeYetUnseen((function(i){var o,s=0;for(r.push(i);0!==r.size;)o=r.pop(),s++,t.forEachNeighbor(o,n);e(s)}))}}function Xt(t){if(!Bt(t))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!t.order)return[];var e,r=new Vt(t),n=r.push.bind(r),i=[];return r.forEachNodeYetUnseen((function(o){var s;for(e=[],r.push(o);0!==r.size;)s=r.pop(),e.push(s),t.forEachNeighbor(s,n);return e.length>i.length&&(i=e),i.length>r.countUnseenNodes()})),i}Tt.forEachConnectedComponent=Yt,Tt.forEachConnectedComponentOrder=Kt,Tt.forEachConnectedComponentOrderWithEdgeFilter=function(t,e,r){if(!Bt(t))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(t.order){var n,i=new Vt(t);i.forEachNodeYetUnseen((function(e){var s=0;for(i.push(e);0!==i.size;)n=i.pop(),s++,t.forEachEdge(n,o);r(s)}))}function o(t,r,o,s,a,h,u){n===s&&(s=o),e(t,r,o,s,a,h,u)&&i.push(s)}},Tt.countConnectedComponents=function(t){var e=0;return Kt(t,(function(){e++})),e},Tt.connectedComponents=function(t){var e=[];return Yt(t,(function(t){e.push(t)})),e},Tt.largestConnectedComponent=Xt,Tt.largestConnectedComponentSubgraph=function(t){var e=Xt(t),r=t.nullCopy();return e.forEach((function(e){_t(r,e,t.getNodeAttributes(e))})),t.forEachEdge((function(t,e,n,i,o,s,a){r.hasNode(n)&&Ht(r,a,t,n,i,e)})),r},Tt.cropToLargestConnectedComponent=function(t){var e=new Set(Xt(t));t.forEachNode((function(r){e.has(r)||t.dropNode(r)}))},Tt.stronglyConnectedComponents=function(t){if(!Bt(t))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!t.order)return[];if("undirected"===t.type)throw new Error("graphology-components: the given graph is undirected");var e,r,n=t.nodes(),i=[];if(!t.size){for(e=0,r=n.length;e<r;e++)i.push([n[e]]);return i}var o,s,a,h=1,u=[],d=[],l=new Map,g=new Set,c=function(e){var r,n,a=t.outboundNeighbors(e);l.set(e,h++),u.push(e),d.push(e);for(var f=0,p=a.length;f<p;f++)if(r=a[f],l.has(r)){if(n=l.get(r),!g.has(r))for(;l.get(u[u.length-1])>n;)u.pop()}else c(r);if(l.get(u[u.length-1])===l.get(e)){o=[];do{s=d.pop(),o.push(s),g.add(s)}while(s!==e);i.push(o),u.pop()}};for(e=0,r=n.length;e<r;e++)a=n[e],g.has(a)||c(a);return i};var Jt=Tt,Qt={},Zt={},$t=i,te=i,ee=function(t,e){if(!te(t))throw new Error("graphology-generators/classic/empty: invalid Graph constructor.");var r,n=new t;for(r=0;r<e;r++)n.addNode(r);return n},re=i,ne=i;Zt.complete=function(t,e){if(!$t(t))throw new Error("graphology-generators/classic/complete: invalid Graph constructor.");var r,n,i=new t;for(r=0;r<e;r++)i.addNode(r);for(r=0;r<e;r++)for(n=r+1;n<e;n++)"directed"!==i.type&&i.addUndirectedEdge(r,n),"undirected"!==i.type&&(i.addDirectedEdge(r,n),i.addDirectedEdge(n,r));return i},Zt.empty=ee,Zt.ladder=function(t,e){if(!re(t))throw new Error("graphology-generators/classic/ladder: invalid Graph constructor.");var r,n=new t;for(r=0;r<e-1;r++)n.mergeEdge(r,r+1);for(r=e;r<2*e-1;r++)n.mergeEdge(r,r+1);for(r=0;r<e;r++)n.addEdge(r,r+e);return n},Zt.path=function(t,e){if(!ne(t))throw new Error("graphology-generators/classic/path: invalid Graph constructor.");for(var r=new t,n=0;n<e-1;n++)r.mergeEdge(n,n+1);return r};var ie={},oe=i,se=ee,ae=i,he=ee;ie.caveman=function(t,e,r){if(!oe(t))throw new Error("graphology-generators/community/caveman: invalid Graph constructor.");var n,i,o,s=e*r,a=se(t,s);if(r<2)return a;for(n=0;n<s;n+=r)for(i=n;i<n+r;i++)for(o=i+1;o<n+r;o++)a.addEdge(i,o);return a},ie.connectedCaveman=function(t,e,r){if(!ae(t))throw new Error("graphology-generators/community/connected-caveman: invalid Graph constructor.");var n,i,o,s=e*r,a=he(t,s);if(r<2)return a;for(n=0;n<s;n+=r){for(i=n;i<n+r;i++)for(o=i+1;o<n+r;o++)i===n&&i===o-1||a.addEdge(i,o);n>0&&a.addEdge(n,(n-1)%s)}return a.addEdge(0,s-1),a};var ue={},de=i,le={},ge=n,ce=n,fe=function(t){if(!ge(t))throw new Error("graphology-metrics/simple-size: the given graph is not a valid graphology instance.");if(!t.multi)return t.size;var e=0,r=0;function n(){e++}function i(){r++}return t.forEachNode((function(e){"directed"!==t.type&&t.forEachUndirectedNeighbor(e,n),"undirected"!==t.type&&t.forEachOutNeighbor(e,i)})),e/2+r};function pe(t,e){return 2*e/(t*(t-1))}function ye(t,e){return e/(t*(t-1))}function me(t,e){var r=t*(t-1);return e/(r+r/2)}function ve(t,e,r){var n,i;if(arguments.length>3){if(i=arguments[3],"number"!=typeof(n=r)||n<0)throw new Error("graphology-metrics/density: given order is not a valid number.");if("number"!=typeof i||i<0)throw new Error("graphology-metrics/density: given size is not a valid number.")}else{if(!ce(r))throw new Error("graphology-metrics/density: given graph is not a valid graphology instance.");n=r.order,i=r.size,r.multi&&!1===e&&(i=fe(r))}return n<2?0:(null===t&&(t=r.type),null===e&&(e=r.multi),("undirected"===t?pe:"directed"===t?ye:me)(n,i))}le.abstractDensity=ve,le.density=ve.bind(null,null,null),le.directedDensity=ve.bind(null,"directed",!1),le.undirectedDensity=ve.bind(null,"undirected",!1),le.mixedDensity=ve.bind(null,"mixed",!1),le.multiDirectedDensity=ve.bind(null,"directed",!0),le.multiUndirectedDensity=ve.bind(null,"undirected",!0),le.multiMixedDensity=ve.bind(null,"mixed",!0);var we=i,be=le.abstractDensity;function Ee(t,e){if(!we(t))throw new Error("graphology-generators/random/erdos-renyi: invalid Graph constructor.");var r,n,i=e.order,o=e.probability,s=e.rng||Math.random,a=new t;if("number"==typeof e.approximateSize&&(o=be(a.type,!1,i,e.approximateSize)),"number"!=typeof i||i<=0)throw new Error("graphology-generators/random/erdos-renyi: invalid `order`. Should be a positive number.");if("number"!=typeof o||o<0||o>1)throw new Error("graphology-generators/random/erdos-renyi: invalid `probability`. Should be a number between 0 and 1. Or maybe you gave an `approximateSize` exceeding the graph's density.");if("function"!=typeof s)throw new Error("graphology-generators/random/erdos-renyi: invalid `rng`. Should be a function.");for(r=0;r<i;r++)a.addNode(r);if(o<=0)return a;for(r=0;r<i;r++)for(n=r+1;n<i;n++)"directed"!==a.type&&s()<o&&a.addUndirectedEdge(r,n),"undirected"!==a.type&&(s()<o&&a.addDirectedEdge(r,n),s()<o&&a.addDirectedEdge(n,r));return a}Ee.sparse=function(t,e){if(!we(t))throw new Error("graphology-generators/random/erdos-renyi: invalid Graph constructor.");var r=e.order,n=e.probability,i=e.rng||Math.random,o=new t;if("number"==typeof e.approximateSize&&(n=be(o.type,!1,r,e.approximateSize)),"number"!=typeof r||r<=0)throw new Error("graphology-generators/random/erdos-renyi: invalid `order`. Should be a positive number.");if("number"!=typeof n||n<0||n>1)throw new Error("graphology-generators/random/erdos-renyi: invalid `probability`. Should be a number between 0 and 1. Or maybe you gave an `approximateSize` exceeding the graph's density.");if("function"!=typeof i)throw new Error("graphology-generators/random/erdos-renyi: invalid `rng`. Should be a function.");for(var s=0;s<r;s++)o.addNode(s);if(n<=0)return o;var a,h=-1,u=Math.log(1-n);if("undirected"!==o.type)for(a=0;a<r;){for(a===(h+=1+(Math.log(1-i())/u|0))&&h++;a<r&&r<=h;)++a===(h-=r)&&h++;a<r&&o.addDirectedEdge(a,h)}if(h=-1,"directed"!==o.type)for(a=1;a<r;){for(h+=1+(Math.log(1-i())/u|0);h>=a&&a<r;)h-=a,a++;a<r&&o.addUndirectedEdge(a,h)}return o};var Ae=Ee,xe=i;ue.clusters=function(t,e){if(!de(t))throw new Error("graphology-generators/random/clusters: invalid Graph constructor.");var r="clusterDensity"in(e=e||{})?e.clusterDensity:.5,n=e.rng||Math.random,i=e.order,o=e.size,s=e.clusters;if("number"!=typeof r||r>1||r<0)throw new Error("graphology-generators/random/clusters: `clusterDensity` option should be a number between 0 and 1.");if("function"!=typeof n)throw new Error("graphology-generators/random/clusters: `rng` option should be a function.");if("number"!=typeof i||i<=0)throw new Error("graphology-generators/random/clusters: `order` option should be a positive number.");if("number"!=typeof o||o<=0)throw new Error("graphology-generators/random/clusters: `size` option should be a positive number.");if("number"!=typeof s||s<=0)throw new Error("graphology-generators/random/clusters: `clusters` option should be a positive number.");var a=new t;if(!i)return a;var h,u,d,l,g,c,f=new Array(s);for(d=0;d<s;d++)f[d]=[];for(d=0;d<i;d++)h=n()*s|0,a.addNode(d,{cluster:h}),f[h].push(d);if(!o)return a;for(d=0;d<o;d++){if(n()<1-r){l=n()*i|0;do{g=n()*i|0}while(l===g)}else{if(!(c=(u=f[h=n()*s|0]).length)||c<2)continue;l=u[n()*c|0];do{g=u[n()*c|0]}while(l===g)}a.multi?a.addEdge(l,g):a.mergeEdge(l,g)}return a},ue.erdosRenyi=Ae,ue.girvanNewman=function(t,e){if(!xe(t))throw new Error("graphology-generators/random/girvan-newman: invalid Graph constructor.");var r=e.zOut,n=e.rng||Math.random;if("number"!=typeof r)throw new Error("graphology-generators/random/girvan-newman: invalid `zOut`. Should be a number.");if("function"!=typeof n)throw new Error("graphology-generators/random/girvan-newman: invalid `rng`. Should be a function.");var i,o,s,a=r/96,h=(16-96*a)/31,u=new t;for(o=0;o<128;o++)u.addNode(o);for(o=0;o<128;o++)for(s=o+1;s<128;s++)i=n(),o%4==s%4?i<h&&u.addEdge(o,s):i<a&&u.addEdge(o,s);return u};var ze={},Me=function(t,e){if(0!==e.length){var r,n,i,o=e[0];for(t.mergeNode(o),n=1,i=e.length;n<i;n++)r=e[n],t.mergeEdge(o,r)}},De=i,Ne=Me,Se=[["Andre","Beverley","Carol","Diane","Fernando"],["Beverley","Andre","Ed","Garth"],["Carol","Andre","Diane","Fernando"],["Diane","Andre","Beverley","Carol","Ed","Fernando","Garth"],["Ed","Beverley","Diane","Garth"],["Fernando","Andre","Carol","Diane","Garth","Heather"],["Garth","Beverley","Diane","Ed","Fernando","Heather"],["Heather","Fernando","Garth","Ike"],["Ike","Heather","Jane"],["Jane","Ike"]];ze.krackhardtKite=function(t){if(!De(t))throw new Error("graphology-generators/social/krackhardt-kite: invalid Graph constructor.");var e,r,n=new t;for(e=0,r=Se.length;e<r;e++)Ne(n,Se[e]);return n};var ke={},Ce=i,We=[["Acciaiuoli","Medici"],["Castellani","Peruzzi"],["Castellani","Strozzi"],["Castellani","Barbadori"],["Medici","Barbadori"],["Medici","Ridolfi"],["Medici","Tornabuoni"],["Medici","Albizzi"],["Medici","Salviati"],["Salviati","Pazzi"],["Peruzzi","Strozzi"],["Peruzzi","Bischeri"],["Strozzi","Ridolfi"],["Strozzi","Bischeri"],["Ridolfi","Tornabuoni"],["Tornabuoni","Guadagni"],["Albizzi","Ginori"],["Albizzi","Guadagni"],["Bischeri","Guadagni"],["Guadagni","Lamberteschi"]],Oe=i,Ue=["0111111110111100010101000000000100","1011000100000100010101000000001000","1101000111000100000000000001100010","1110000100001100000000000000000000","1000001000100000000000000000000000","1000001000100000100000000000000000","1000110000000000100000000000000000","1111000000000000000000000000000000","1010000000000000000000000000001011","0010000000000000000000000000000001","1000110000000000000000000000000000","1000000000000000000000000000000000","1001000000000000000000000000000000","1111000000000000000000000000000001","0000000000000000000000000000000011","0000000000000000000000000000000011","0000011000000000000000000000000000","1100000000000000000000000000000000","0000000000000000000000000000000011","1100000000000000000000000000000001","0000000000000000000000000000000011","1100000000000000000000000000000000","0000000000000000000000000000000011","0000000000000000000000000101010011","0000000000000000000000000101000100","0000000000000000000000011000000100","0000000000000000000000000000010001","0010000000000000000000011000000001","0010000000000000000000000000000101","0000000000000000000000010010000011","0100000010000000000000000000000011","1000000000000000000000001100100011","0010000010000011001010110000011101","0000000011000111001110110011111110"],Ie=new Set([0,1,2,3,4,5,6,7,8,10,11,12,13,16,17,19,21]);ke.florentineFamilies=function(t){if(!Ce(t))throw new Error("graphology-generators/social/florentine-families: invalid Graph constructor.");var e,r,n,i=new t;for(r=0,n=We.length;r<n;r++)e=We[r],i.mergeEdge(e[0],e[1]);return i},ke.karateClub=function(t){if(!Oe(t))throw new Error("graphology-generators/social/karate: invalid Graph constructor.");for(var e,r,n,i,o,s,a=new t,h=0;h<34;h++)e=Ie.has(h)?"Mr. Hi":"Officer",a.addNode(h,{club:e});for(n=0,o=Ue.length;n<o;n++)for(i=n+1,s=(r=Ue[n].split("")).length;i<s;i++)+r[i]&&a.addEdgeWithKey(n+"->"+i,n,i);return a},Qt.classic=Zt,Qt.community=ie,Qt.random=ue,Qt.small=ze,Qt.social=ke;var Pe=Qt,Fe={};function Le(t){return function(e,r){return e+Math.floor(t()*(r-e+1))}}var Te=Le(Math.random);Te.createRandom=Le;var je=Te.createRandom;function Re(t){var e=je(t);return function(t){for(var r=t.length,n=r-1,i=-1;++i<r;){var o=e(i,n),s=t[o];t[o]=t[i],t[i]=s}}}var Ge=Re(Math.random);Ge.createShuffleInPlace=Re;var qe=b,Be=n,_e=Ge,He={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function Ve(t,e,r,n,i){this.wrappedCircle=i||null,this.children={},this.countChildren=0,this.id=t||null,this.next=null,this.previous=null,this.x=e||null,this.y=r||null,this.r=i?1010101:n||999}function Ye(t,e,r){for(var n in e.children){var i=e.children[n];i.hasChildren()?Ye(t,i,r):r[i.id]={x:i.x,y:i.y}}}function Ke(t,e){var r=t.r-e.r,n=e.x-t.x,i=e.y-t.y;return r<0||r*r<n*n+i*i}function Xe(t,e){var r=t.r-e.r+1e-6,n=e.x-t.x,i=e.y-t.y;return r>0&&r*r>n*n+i*i}function Je(t,e){for(var r=0;r<e.length;++r)if(!Xe(t,e[r]))return!1;return!0}function Qe(t,e){var r=t.x,n=t.y,i=t.r,o=e.x,s=e.y,a=e.r,h=o-r,u=s-n,d=a-i,l=Math.sqrt(h*h+u*u);return new Ve(null,(r+o+h/l*d)/2,(n+s+u/l*d)/2,(l+i+a)/2)}function Ze(t,e,r){var n=t.x,i=t.y,o=t.r,s=e.x,a=e.y,h=e.r,u=r.x,d=r.y,l=r.r,g=n-s,c=n-u,f=i-a,p=i-d,y=h-o,m=l-o,v=n*n+i*i-o*o,w=v-s*s-a*a+h*h,b=v-u*u-d*d+l*l,E=c*f-g*p,A=(f*b-p*w)/(2*E)-n,x=(p*y-f*m)/E,z=(c*w-g*b)/(2*E)-i,M=(g*m-c*y)/E,D=x*x+M*M-1,N=2*(o+A*x+z*M),S=A*A+z*z-o*o,k=-(D?(N+Math.sqrt(N*N-4*D*S))/(2*D):S/N);return new Ve(null,n+A+x*k,i+z+M*k,k)}function $e(t){switch(t.length){case 1:return new Ve(null,(e=t[0]).x,e.y,e.r);case 2:return Qe(t[0],t[1]);case 3:return Ze(t[0],t[1],t[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+t.length)}var e}function tr(t,e){var r,n;if(Je(e,t))return[e];for(r=0;r<t.length;++r)if(Ke(e,t[r])&&Je(Qe(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(n=r+1;n<t.length;++n)if(Ke(Qe(t[r],t[n]),e)&&Ke(Qe(t[r],e),t[n])&&Ke(Qe(t[n],e),t[r])&&Je(Ze(t[r],t[n],e),t))return[t[r],t[n],e];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function er(t){var e=t.wrappedCircle,r=t.next.wrappedCircle,n=e.r+r.r,i=(e.x*r.r+r.x*e.r)/n,o=(e.y*r.r+r.y*e.r)/n;return i*i+o*o}function rr(t,e,r){var n,i,o,s,a=t.x-e.x,h=t.y-e.y,u=a*a+h*h;u?(i=e.r+r.r,i*=i,s=t.r+r.r,i>(s*=s)?(n=(u+s-i)/(2*u),o=Math.sqrt(Math.max(0,s/u-n*n)),r.x=t.x-n*a-o*h,r.y=t.y-n*h+o*a):(n=(u+i-s)/(2*u),o=Math.sqrt(Math.max(0,i/u-n*n)),r.x=e.x+n*a-o*h,r.y=e.y+n*h+o*a)):(r.x=e.x+r.r,r.y=e.y)}function nr(t,e){var r=t.r+e.r-1e-6,n=e.x-t.x,i=e.y-t.y;return r>0&&r*r>n*n+i*i}function ir(t,e){var r,n,i,o,s,a,h,u,d,l,g=t.length;if(0===g)return 0;if((r=t[0]).x=0,r.y=0,g<=1)return r.r;if(n=t[1],r.x=-n.r,n.x=r.r,n.y=0,g<=2)return r.r+n.r;rr(n,r,i=t[2]),r=new Ve(null,null,null,null,r),n=new Ve(null,null,null,null,n),i=new Ve(null,null,null,null,i),r.next=i.previous=n,n.next=r.previous=i,i.next=n.previous=r;t:for(a=3;a<g;++a){i=t[a],rr(r.wrappedCircle,n.wrappedCircle,i),i=new Ve(null,null,null,null,i),h=n.next,u=r.previous,d=n.wrappedCircle.r,l=r.wrappedCircle.r;do{if(d<=l){if(nr(h.wrappedCircle,i.wrappedCircle)){n=h,r.next=n,n.previous=r,--a;continue t}d+=h.wrappedCircle.r,h=h.next}else{if(nr(u.wrappedCircle,i.wrappedCircle)){(r=u).next=n,n.previous=r,--a;continue t}l+=u.wrappedCircle.r,u=u.previous}}while(h!==u.next);for(i.previous=r,i.next=n,r.next=n.previous=n=i,o=er(r);(i=i.next)!==n;)(s=er(i))<o&&(r=i,o=s);n=r.next}r=[n.wrappedCircle],i=n;for(var c=1e4;(i=i.next)!==n&&0!=--c;)r.push(i.wrappedCircle);for(i=function(t,e){var r,n,i=0,o=t.slice(),s=t.length,a=[];for(e(o);i<s;)r=o[i],n&&Xe(n,r)?++i:(n=$e(a=tr(a,r)),i=0);return n}(r,e),a=0;a<g;++a)(r=t[a]).x-=i.x,r.y-=i.y;return i.r}function or(t,e){var r=0;if(t.hasChildren()){for(var n in t.children){var i=t.children[n];i.hasChildren()&&(i.r=or(i,e))}r=ir(Object.values(t.children),e)}return r}function sr(t,e){for(var r in or(t,e),t.children){t.children[r].applyPositionToChildren()}}function ar(t,e,r){if(!Be(e))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");r=qe(r,He);var n={},i={},o=e.nodes(),s=r.center,a=r.hierarchyAttributes,h=_e.createShuffleInPlace(r.rng),u=r.scale,d=new Ve;e.forEachNode((function(t,e){var r=new Ve(t,null,null,e.size?e.size:1),n=d;a.forEach((function(t){var r=e[t];n=n.getChild(r)})),n.addChild(t,r)})),sr(d,h),Ye(e,d,n);var l,g,c,f=o.length;for(c=0;c<f;c++){var p=o[c];l=s+u*n[p].x,g=s+u*n[p].y,i[p]={x:l,y:g},t&&(e.setNodeAttribute(p,r.attributes.x,l),e.setNodeAttribute(p,r.attributes.y,g))}return i}Ve.prototype.hasChildren=function(){return this.countChildren>0},Ve.prototype.addChild=function(t,e){this.children[t]=e,++this.countChildren},Ve.prototype.getChild=function(t){if(!this.children.hasOwnProperty(t)){var e=new Ve;this.children[t]=e,++this.countChildren}return this.children[t]},Ve.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var t=this;for(var e in t.children){var r=t.children[e];r.x+=t.x,r.y+=t.y,r.applyPositionToChildren()}}};var hr=ar.bind(null,!1);hr.assign=ar.bind(null,!0);var ur=hr,dr=b,lr=n,gr={dimensions:["x","y"],center:.5,scale:1};function cr(t,e,r){if(!lr(e))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");var n=(r=dr(r,gr)).dimensions;if(!Array.isArray(n)||2!==n.length)throw new Error("graphology-layout/random: given dimensions are invalid.");var i=r.center,o=r.scale,s=2*Math.PI,a=(i-.5)*o,h=e.order,u=n[0],d=n[1];function l(t,e){return e[u]=o*Math.cos(t*s/h)+a,e[d]=o*Math.sin(t*s/h)+a,e}var g=0;if(!t){var c={};return e.forEachNode((function(t){c[t]=l(g++,{})})),c}e.updateEachNodeAttributes((function(t,e){return l(g++,e),e}),{attributes:n})}var fr=cr.bind(null,!1);fr.assign=cr.bind(null,!0);var pr=fr,yr=b,mr=n,vr={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function wr(t,e,r){if(!mr(e))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");var n=(r=yr(r,vr)).dimensions;if(!Array.isArray(n)||n.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var i=n.length,o=r.center,s=r.rng,a=r.scale,h=(o-.5)*a;function u(t){for(var e=0;e<i;e++)t[n[e]]=s()*a+h;return t}if(!t){var d={};return e.forEachNode((function(t){d[t]=u({})})),d}e.updateEachNodeAttributes((function(t,e){return u(e),e}),{attributes:n})}var br=wr.bind(null,!1);br.assign=wr.bind(null,!0);var Er=br,Ar=b,xr=n,zr=Math.PI/180,Mr={dimensions:["x","y"],centeredOnZero:!1,degrees:!1};function Dr(t,e,r,n){if(!xr(e))throw new Error("graphology-layout/rotation: the given graph is not a valid graphology instance.");(n=Ar(n,Mr)).degrees&&(r*=zr);var i=n.dimensions;if(!Array.isArray(i)||2!==i.length)throw new Error("graphology-layout/random: given dimensions are invalid.");if(0===e.order){if(t)return;return{}}var o=i[0],s=i[1],a=0,h=0;if(!n.centeredOnZero){var u=1/0,d=-1/0,l=1/0,g=-1/0;e.forEachNode((function(t,e){var r=e[o],n=e[s];r<u&&(u=r),r>d&&(d=r),n<l&&(l=n),n>g&&(g=n)})),a=(u+d)/2,h=(l+g)/2}var c=Math.cos(r),f=Math.sin(r);function p(t){var e=t[o],r=t[s];return t[o]=a+(e-a)*c-(r-h)*f,t[s]=h+(e-a)*f+(r-h)*c,t}if(!t){var y={};return e.forEachNode((function(t,e){var r={};r[o]=e[o],r[s]=e[s],y[t]=p(r)})),y}e.updateEachNodeAttributes((function(t,e){return p(e),e}),{attributes:i})}var Nr=Dr.bind(null,!1);Nr.assign=Dr.bind(null,!0);var Sr=Nr;Fe.circlepack=ur,Fe.circular=pr,Fe.random=Er,Fe.rotation=Sr;var kr=Fe,Cr=Fe,Wr=10,Or={};Or.assign=function(t){t=t||{};var e,r,n,i=Array.prototype.slice.call(arguments).slice(1);for(e=0,n=i.length;e<n;e++)if(i[e])for(r in i[e])t[r]=i[e][r];return t},Or.validateSettings=function(t){return"linLogMode"in t&&"boolean"!=typeof t.linLogMode?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&"boolean"!=typeof t.outboundAttractionDistribution?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&"boolean"!=typeof t.adjustSizes?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&"number"!=typeof t.edgeWeightInfluence?{message:"the `edgeWeightInfluence` setting should be a number."}:!("scalingRatio"in t)||"number"==typeof t.scalingRatio&&t.scalingRatio>=0?"strongGravityMode"in t&&"boolean"!=typeof t.strongGravityMode?{message:"the `strongGravityMode` setting should be a boolean."}:!("gravity"in t)||"number"==typeof t.gravity&&t.gravity>=0?"slowDown"in t&&!("number"==typeof t.slowDown||t.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&"boolean"!=typeof t.barnesHutOptimize?{message:"the `barnesHutOptimize` setting should be a boolean."}:!("barnesHutTheta"in t)||"number"==typeof t.barnesHutTheta&&t.barnesHutTheta>=0?null:{message:"the `barnesHutTheta` setting should be a number >= 0."}:{message:"the `gravity` setting should be a number >= 0."}:{message:"the `scalingRatio` setting should be a number >= 0."}},Or.graphToByteArrays=function(t,e){var r,n=t.order,i=t.size,o={},s=new Float32Array(10*n),a=new Float32Array(3*i);return r=0,t.forEachNode((function(t,e){o[t]=r,s[r]=e.x,s[r+1]=e.y,s[r+2]=0,s[r+3]=0,s[r+4]=0,s[r+5]=0,s[r+6]=1,s[r+7]=1,s[r+8]=e.size||1,s[r+9]=e.fixed?1:0,r+=10})),r=0,t.forEachEdge((function(t,n,i,h,u,d,l){var g=o[i],c=o[h],f=e(t,n,i,h,u,d,l);s[g+6]+=f,s[c+6]+=f,a[r]=g,a[r+1]=c,a[r+2]=f,r+=3})),{nodes:s,edges:a}},Or.assignLayoutChanges=function(t,e,r){var n=0;t.updateEachNodeAttributes((function(t,i){return i.x=e[n],i.y=e[n+1],n+=10,r?r(t,i):i}))},Or.readGraphPositions=function(t,e){var r=0;t.forEachNode((function(t,n){e[r]=n.x,e[r+1]=n.y,r+=10}))},Or.collectLayoutChanges=function(t,e,r){for(var n=t.nodes(),i={},o=0,s=0,a=e.length;o<a;o+=10){if(r){var h=Object.assign({},t.getNodeAttributes(n[s]));h.x=e[o],h.y=e[o+1],h=r(n[s],h),i[n[s]]={x:h.x,y:h.y}}else i[n[s]]={x:e[o],y:e[o+1]};s++}return i},Or.createWorker=function(t){var e=window.URL||window.webkitURL,r=t.toString(),n=e.createObjectURL(new Blob(["("+r+").call(this);"],{type:"text/javascript"})),i=new Worker(n);return e.revokeObjectURL(n),i};var Ur={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5},Ir=n,Pr=dt.createEdgeWeightGetter,Fr=function(t,e,r){var n,i,o,s,a,h,u,d,l,g,c,f,p,y,m,v,w,b,E,A,x,z,M,D=e.length,N=r.length,S=t.adjustSizes,k=t.barnesHutTheta*t.barnesHutTheta,C=[];for(o=0;o<D;o+=Wr)e[o+4]=e[o+2],e[o+5]=e[o+3],e[o+2]=0,e[o+3]=0;if(t.outboundAttractionDistribution){for(c=0,o=0;o<D;o+=Wr)c+=e[o+6];c/=D/Wr}if(t.barnesHutOptimize){var W,O,U,I=1/0,P=-1/0,F=1/0,L=-1/0;for(o=0;o<D;o+=Wr)I=Math.min(I,e[o+0]),P=Math.max(P,e[o+0]),F=Math.min(F,e[o+1]),L=Math.max(L,e[o+1]);var T=P-I,j=L-F;for(T>j?L=(F-=(T-j)/2)+T:P=(I-=(j-T)/2)+j,C[0]=-1,C[1]=(I+P)/2,C[2]=(F+L)/2,C[3]=Math.max(P-I,L-F),C[4]=-1,C[5]=-1,C[6]=0,C[7]=0,C[8]=0,n=1,o=0;o<D;o+=Wr)for(i=0,U=3;;){if(!(C[i+5]>=0)){if(C[i+0]<0){C[i+0]=o;break}if(C[i+5]=9*n,d=C[i+3]/2,C[(l=C[i+5])+0]=-1,C[l+1]=C[i+1]-d,C[l+2]=C[i+2]-d,C[l+3]=d,C[l+4]=l+9,C[l+5]=-1,C[l+6]=0,C[l+7]=0,C[l+8]=0,C[(l+=9)+0]=-1,C[l+1]=C[i+1]-d,C[l+2]=C[i+2]+d,C[l+3]=d,C[l+4]=l+9,C[l+5]=-1,C[l+6]=0,C[l+7]=0,C[l+8]=0,C[(l+=9)+0]=-1,C[l+1]=C[i+1]+d,C[l+2]=C[i+2]-d,C[l+3]=d,C[l+4]=l+9,C[l+5]=-1,C[l+6]=0,C[l+7]=0,C[l+8]=0,C[(l+=9)+0]=-1,C[l+1]=C[i+1]+d,C[l+2]=C[i+2]+d,C[l+3]=d,C[l+4]=C[i+4],C[l+5]=-1,C[l+6]=0,C[l+7]=0,C[l+8]=0,n+=4,W=e[C[i+0]+0]<C[i+1]?e[C[i+0]+1]<C[i+2]?C[i+5]:C[i+5]+9:e[C[i+0]+1]<C[i+2]?C[i+5]+18:C[i+5]+27,C[i+6]=e[C[i+0]+6],C[i+7]=e[C[i+0]+0],C[i+8]=e[C[i+0]+1],C[W+0]=C[i+0],C[i+0]=-1,W===(O=e[o+0]<C[i+1]?e[o+1]<C[i+2]?C[i+5]:C[i+5]+9:e[o+1]<C[i+2]?C[i+5]+18:C[i+5]+27)){if(U--){i=W;continue}U=3;break}C[O+0]=o;break}W=e[o+0]<C[i+1]?e[o+1]<C[i+2]?C[i+5]:C[i+5]+9:e[o+1]<C[i+2]?C[i+5]+18:C[i+5]+27,C[i+7]=(C[i+7]*C[i+6]+e[o+0]*e[o+6])/(C[i+6]+e[o+6]),C[i+8]=(C[i+8]*C[i+6]+e[o+1]*e[o+6])/(C[i+6]+e[o+6]),C[i+6]+=e[o+6],i=W}}if(t.barnesHutOptimize){for(f=t.scalingRatio,o=0;o<D;o+=Wr)for(i=0;;)if(C[i+5]>=0){if(v=Math.pow(e[o+0]-C[i+7],2)+Math.pow(e[o+1]-C[i+8],2),4*(g=C[i+3])*g/v<k){if(p=e[o+0]-C[i+7],y=e[o+1]-C[i+8],!0===S?v>0?(w=f*e[o+6]*C[i+6]/v,e[o+2]+=p*w,e[o+3]+=y*w):v<0&&(w=-f*e[o+6]*C[i+6]/Math.sqrt(v),e[o+2]+=p*w,e[o+3]+=y*w):v>0&&(w=f*e[o+6]*C[i+6]/v,e[o+2]+=p*w,e[o+3]+=y*w),(i=C[i+4])<0)break;continue}i=C[i+5]}else if((h=C[i+0])>=0&&h!==o&&(v=(p=e[o+0]-e[h+0])*p+(y=e[o+1]-e[h+1])*y,!0===S?v>0?(w=f*e[o+6]*e[h+6]/v,e[o+2]+=p*w,e[o+3]+=y*w):v<0&&(w=-f*e[o+6]*e[h+6]/Math.sqrt(v),e[o+2]+=p*w,e[o+3]+=y*w):v>0&&(w=f*e[o+6]*e[h+6]/v,e[o+2]+=p*w,e[o+3]+=y*w)),(i=C[i+4])<0)break}else for(f=t.scalingRatio,s=0;s<D;s+=Wr)for(a=0;a<s;a+=Wr)p=e[s+0]-e[a+0],y=e[s+1]-e[a+1],!0===S?(v=Math.sqrt(p*p+y*y)-e[s+8]-e[a+8])>0?(w=f*e[s+6]*e[a+6]/v/v,e[s+2]+=p*w,e[s+3]+=y*w,e[a+2]-=p*w,e[a+3]-=y*w):v<0&&(w=100*f*e[s+6]*e[a+6],e[s+2]+=p*w,e[s+3]+=y*w,e[a+2]-=p*w,e[a+3]-=y*w):(v=Math.sqrt(p*p+y*y))>0&&(w=f*e[s+6]*e[a+6]/v/v,e[s+2]+=p*w,e[s+3]+=y*w,e[a+2]-=p*w,e[a+3]-=y*w);for(l=t.gravity/t.scalingRatio,f=t.scalingRatio,o=0;o<D;o+=Wr)w=0,p=e[o+0],y=e[o+1],v=Math.sqrt(Math.pow(p,2)+Math.pow(y,2)),t.strongGravityMode?v>0&&(w=f*e[o+6]*l):v>0&&(w=f*e[o+6]*l/v),e[o+2]-=p*w,e[o+3]-=y*w;for(f=1*(t.outboundAttractionDistribution?c:1),u=0;u<N;u+=3)s=r[u+0],a=r[u+1],d=r[u+2],m=Math.pow(d,t.edgeWeightInfluence),p=e[s+0]-e[a+0],y=e[s+1]-e[a+1],!0===S?(v=Math.sqrt(p*p+y*y)-e[s+8]-e[a+8],t.linLogMode?t.outboundAttractionDistribution?v>0&&(w=-f*m*Math.log(1+v)/v/e[s+6]):v>0&&(w=-f*m*Math.log(1+v)/v):t.outboundAttractionDistribution?v>0&&(w=-f*m/e[s+6]):v>0&&(w=-f*m)):(v=Math.sqrt(Math.pow(p,2)+Math.pow(y,2)),t.linLogMode?t.outboundAttractionDistribution?v>0&&(w=-f*m*Math.log(1+v)/v/e[s+6]):v>0&&(w=-f*m*Math.log(1+v)/v):t.outboundAttractionDistribution?(v=1,w=-f*m/e[s+6]):(v=1,w=-f*m)),v>0&&(e[s+2]+=p*w,e[s+3]+=y*w,e[a+2]-=p*w,e[a+3]-=y*w);if(!0===S)for(o=0;o<D;o+=Wr)1!==e[o+9]&&((b=Math.sqrt(Math.pow(e[o+2],2)+Math.pow(e[o+3],2)))>10&&(e[o+2]=10*e[o+2]/b,e[o+3]=10*e[o+3]/b),E=e[o+6]*Math.sqrt((e[o+4]-e[o+2])*(e[o+4]-e[o+2])+(e[o+5]-e[o+3])*(e[o+5]-e[o+3])),A=Math.sqrt((e[o+4]+e[o+2])*(e[o+4]+e[o+2])+(e[o+5]+e[o+3])*(e[o+5]+e[o+3]))/2,x=.1*Math.log(1+A)/(1+Math.sqrt(E)),z=e[o+0]+e[o+2]*(x/t.slowDown),e[o+0]=z,M=e[o+1]+e[o+3]*(x/t.slowDown),e[o+1]=M);else for(o=0;o<D;o+=Wr)1!==e[o+9]&&(E=e[o+6]*Math.sqrt((e[o+4]-e[o+2])*(e[o+4]-e[o+2])+(e[o+5]-e[o+3])*(e[o+5]-e[o+3])),A=Math.sqrt((e[o+4]+e[o+2])*(e[o+4]+e[o+2])+(e[o+5]+e[o+3])*(e[o+5]+e[o+3]))/2,x=e[o+7]*Math.log(1+A)/(1+Math.sqrt(E)),e[o+7]=Math.min(1,Math.sqrt(x*(Math.pow(e[o+2],2)+Math.pow(e[o+3],2))/(1+Math.sqrt(E)))),z=e[o+0]+e[o+2]*(x/t.slowDown),e[o+0]=z,M=e[o+1]+e[o+3]*(x/t.slowDown),e[o+1]=M);return{}},Lr=Or,Tr=Ur;function jr(t,e,r){if(!Ir(e))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");"number"==typeof r&&(r={iterations:r});var n=r.iterations;if("number"!=typeof n)throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(n<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var i=Pr("getEdgeWeight"in r?r.getEdgeWeight:"weight").fromEntry,o="function"==typeof r.outputReducer?r.outputReducer:null,s=Lr.assign({},Tr,r.settings),a=Lr.validateSettings(s);if(a)throw new Error("graphology-layout-forceatlas2: "+a.message);var h,u=Lr.graphToByteArrays(e,i);for(h=0;h<n;h++)Fr(s,u.nodes,u.edges);if(!t)return Lr.collectLayoutChanges(e,u.nodes);Lr.assignLayoutChanges(e,u.nodes,o)}var Rr=jr.bind(null,!1);Rr.assign=jr.bind(null,!0),Rr.inferSettings=function(t){var e="number"==typeof t?t:t.order;return{barnesHutOptimize:e>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(e)}};var Gr=Rr;function qr(){return.01*(.5-Math.random())}var Br={};Br.validateSettings=function(t){return"gridSize"in t&&"number"!=typeof t.gridSize||t.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in t&&"number"!=typeof t.margin||t.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in t&&"number"!=typeof t.expansion||t.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in t&&"number"!=typeof t.ratio||t.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in t&&"number"!=typeof t.speed||t.speed<=0?{message:"the `speed` setting should be a positive number."}:null},Br.graphToByteArray=function(t,e){var r=t.order,n=new Float32Array(3*r),i=0;return t.forEachNode((function(t,r){"function"==typeof e&&(r=e(t,r)),n[i]=r.x,n[i+1]=r.y,n[i+2]=r.size||1,i+=3})),n},Br.assignLayoutChanges=function(t,e,r){var n=0;t.forEachNode((function(i){var o={x:e[n],y:e[n+1]};"function"==typeof r&&(o=r(i,o)),t.mergeNodeAttributes(i,o),n+=3}))},Br.collectLayoutChanges=function(t,e,r){var n={},i=0;return t.forEachNode((function(t){var o={x:e[i],y:e[i+1]};"function"==typeof r&&(o=r(t,o)),n[t]=o,i+=3})),n},Br.createWorker=function(t){var e=window.URL||window.webkitURL,r=t.toString(),n=e.createObjectURL(new Blob(["("+r+").call(this);"],{type:"text/javascript"})),i=new Worker(n);return e.revokeObjectURL(n),i};var _r={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3},Hr=n,Vr=function(t,e){var r,n,i,o,s,a,h=t.margin,u=t.ratio,d=t.expansion,l=t.gridSize,g=t.speed,c=!0,f=e.length,p=f/3|0,y=new Float32Array(p),m=new Float32Array(p),v=1/0,w=1/0,b=-1/0,E=-1/0;for(r=0;r<f;r+=3)i=e[r+0],o=e[r+1],a=e[r+2]*u+h,v=Math.min(v,i-a),b=Math.max(b,i+a),w=Math.min(w,o-a),E=Math.max(E,o+a);var A=b-v,x=E-w,z=(v+b)/2,M=(w+E)/2;v=z-d*A/2,b=z+d*A/2,w=M-d*x/2,E=M+d*x/2;var D,N,S,k,C,W,O,U,I,P,F,L,T=new Array(l*l),j=T.length;for(D=0;D<j;D++)T[D]=[];for(r=0;r<f;r+=3)for(i=e[r+0],o=e[r+1],N=i-(a=e[r+2]*u+h),S=i+a,k=o-a,C=o+a,W=Math.floor(l*(N-v)/(b-v)),O=Math.floor(l*(S-v)/(b-v)),U=Math.floor(l*(k-w)/(E-w)),I=Math.floor(l*(C-w)/(E-w)),P=W;P<=O;P++)for(F=U;F<=I;F++)T[P*l+F].push(r);var R,G,q,B,_,H,V,Y,K,X,J,Q,Z=new Set;for(D=0;D<j;D++)for(r=0,s=(L=T[D]).length;r<s;r++)for(q=e[(R=L[r])+0],_=e[R+1],V=e[R+2],n=r+1;n<s;n++)G=L[n],K=R+""+G,j>1&&Z.has(K)||(j>1&&Z.add(K),B=e[G+0],H=e[G+1],Y=e[G+2],X=B-q,J=H-_,(Q=Math.sqrt(X*X+J*J))<V*u+h+(Y*u+h)&&(c=!1,G=G/3|0,Q>0?(y[G]+=X/Q*(1+V),m[G]+=J/Q*(1+V)):(y[G]+=A*qr(),m[G]+=x*qr())));for(r=0,n=0;r<f;r+=3,n++)e[r+0]+=.1*y[n]*g,e[r+1]+=.1*m[n]*g;return{converged:c}},Yr=Br,Kr=_r;function Xr(t,e,r){if(!Hr(e))throw new Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");var n=(r="number"==typeof r?{maxIterations:r}:r||{}).maxIterations||500;if("number"!=typeof n||n<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var i=Object.assign({},Kr,r.settings),o=Yr.validateSettings(i);if(o)throw new Error("graphology-layout-noverlap: "+o.message);var s,a=Yr.graphToByteArray(e,r.inputReducer),h=!1;for(s=0;s<n&&!h;s++)h=Vr(i,a).converged;if(!t)return Yr.collectLayoutChanges(e,a,r.outputReducer);Yr.assignLayoutChanges(e,a,r.outputReducer)}var Jr=Xr.bind(null,!1);Jr.assign=Xr.bind(null,!0);var Qr=Jr,Zr={},$r={},tn={},en=n;function rn(t,e,r,n){var i=e+"Centrality";if(!en(r))throw new Error("graphology-centrality/"+i+": the given graph is not a valid graphology instance.");if("degree"!==e&&"undirected"===r.type)throw new Error("graphology-centrality/"+i+": cannot compute "+e+" centrality on an undirected graph.");var o=(n=n||{}).nodeCentralityAttribute||i,s=r.order-1,a=r[e].bind(r);if(!t){var h={};return r.forEachNode((function(t){h[t]=a(t)/s})),h}r.updateEachNodeAttributes((function(t,e){return e[o]=a(t)/s,e}),{attributes:[o]})}var nn=rn.bind(null,!1,"degree"),on=rn.bind(null,!1,"inDegree"),sn=rn.bind(null,!1,"outDegree");nn.assign=rn.bind(null,!0,"degree"),on.assign=rn.bind(null,!0,"inDegree"),sn.assign=rn.bind(null,!0,"outDegree"),tn.degreeCentrality=nn,tn.inDegreeCentrality=on,tn.outDegreeCentrality=sn;var an={},hn={},un={};un.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,un.SYMBOL_SUPPORT="undefined"!=typeof Symbol;var dn=un,ln=dn.ARRAY_BUFFER_SUPPORT,gn=dn.SYMBOL_SUPPORT,cn=function(t,e){var r,n,i,o,s;if(!t)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof e)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(t)||ln&&ArrayBuffer.isView(t)||"string"==typeof t||"[object Arguments]"===t.toString())for(i=0,o=t.length;i<o;i++)e(t[i],i);else if("function"!=typeof t.forEach)if(gn&&Symbol.iterator in t&&"function"!=typeof t.next&&(t=t[Symbol.iterator]()),"function"!=typeof t.next)for(n in t)t.hasOwnProperty(n)&&e(t[n],n);else for(r=t,i=0;!0!==(s=r.next()).done;)e(s.value,i),i++;else t.forEach(e)},fn=cn,pn=Q;function yn(t){return"number"==typeof t.length?t.length:"number"==typeof t.size?t.size:void 0}hn.isArrayLike=function(t){return Array.isArray(t)||pn.isTypedArray(t)},hn.guessLength=yn,hn.toArray=function(t){var e=yn(t),r="number"==typeof e?new Array(e):[],n=0;return fn(t,(function(t){r[n++]=t})),r},hn.toArrayWithIndices=function(t){var e=yn(t),r="number"==typeof e?pn.getPointerArray(e):Array,n="number"==typeof e?new Array(e):[],i="number"==typeof e?new r(e):[],o=0;return fn(t,(function(t){n[o]=t,i[o]=o++})),[n,i]};var mn=hn,vn=J;function wn(t,e){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if("number"!=typeof e||e<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=t,this.capacity=e,this.items=new t(this.capacity),this.clear()}wn.prototype.clear=function(){this.start=0,this.size=0},wn.prototype.push=function(t){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var e=this.start+this.size;return e>=this.capacity&&(e-=this.capacity),this.items[e]=t,++this.size},wn.prototype.unshift=function(t){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var e=this.start-1;return 0===this.start&&(e=this.capacity-1),this.items[e]=t,this.start=e,++this.size},wn.prototype.pop=function(){if(0!==this.size){this.size--;var t=this.start+this.size;return t>=this.capacity&&(t-=this.capacity),this.items[t]}},wn.prototype.shift=function(){if(0!==this.size){var t=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[t]}},wn.prototype.peekFirst=function(){if(0!==this.size)return this.items[this.start]},wn.prototype.peekLast=function(){if(0!==this.size){var t=this.start+this.size-1;return t>=this.capacity&&(t-=this.capacity),this.items[t]}},wn.prototype.get=function(t){if(!(0===this.size||t>=this.capacity))return(t=this.start+t)>=this.capacity&&(t-=this.capacity),this.items[t]},wn.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var r=this.capacity,n=this.size,i=this.start,o=0;o<n;)t.call(e,this.items[i],o,this),o++,++i===r&&(i=0)},wn.prototype.toArray=function(){var t=this.start+this.size;if(t<this.capacity)return this.items.slice(this.start,t);for(var e=new this.ArrayClass(this.size),r=this.capacity,n=this.size,i=this.start,o=0;o<n;)e[o]=this.items[i],o++,++i===r&&(i=0);return e},wn.prototype.values=function(){var t=this.items,e=this.capacity,r=this.size,n=this.start,i=0;return new vn((function(){if(i>=r)return{done:!0};var o=t[n];return n++,i++,n===e&&(n=0),{value:o,done:!1}}))},wn.prototype.entries=function(){var t=this.items,e=this.capacity,r=this.size,n=this.start,i=0;return new vn((function(){if(i>=r)return{done:!0};var o=t[n];return++n===e&&(n=0),{value:[i++,o],done:!1}}))},"undefined"!=typeof Symbol&&(wn.prototype[Symbol.iterator]=wn.prototype.values),wn.prototype.inspect=function(){var t=this.toArray();return t.type=this.ArrayClass.name,t.capacity=this.capacity,Object.defineProperty(t,"constructor",{value:wn,enumerable:!1}),t},"undefined"!=typeof Symbol&&(wn.prototype[Symbol.for("nodejs.util.inspect.custom")]=wn.prototype.inspect),wn.from=function(t,e,r){if(arguments.length<3&&"number"!=typeof(r=mn.guessLength(t)))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var n=new wn(e,r);if(mn.isArrayLike(t)){var i,o;for(i=0,o=t.length;i<o;i++)n.items[i]=t[i];return n.size=o,n}return mn.forEach(t,(function(t){n.push(t)})),n};var bn=wn,En=J,An=hn;function xn(t,e){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if("number"!=typeof e||e<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=e,this.ArrayClass=t,this.items=new this.ArrayClass(this.capacity),this.clear()}xn.prototype.clear=function(){this.size=0},xn.prototype.push=function(t){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=t,this.size},xn.prototype.pop=function(){if(0!==this.size)return this.items[--this.size]},xn.prototype.peek=function(){return this.items[this.size-1]},xn.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var r=0,n=this.items.length;r<n;r++)t.call(e,this.items[n-r-1],r,this)},xn.prototype.toArray=function(){for(var t=new this.ArrayClass(this.size),e=this.size-1,r=this.size;r--;)t[r]=this.items[e-r];return t},xn.prototype.values=function(){var t=this.items,e=this.size,r=0;return new En((function(){if(r>=e)return{done:!0};var n=t[e-r-1];return r++,{value:n,done:!1}}))},xn.prototype.entries=function(){var t=this.items,e=this.size,r=0;return new En((function(){if(r>=e)return{done:!0};var n=t[e-r-1];return{value:[r++,n],done:!1}}))},"undefined"!=typeof Symbol&&(xn.prototype[Symbol.iterator]=xn.prototype.values),xn.prototype.toString=function(){return this.toArray().join(",")},xn.prototype.toJSON=function(){return this.toArray()},xn.prototype.inspect=function(){var t=this.toArray();return t.type=this.ArrayClass.name,t.capacity=this.capacity,Object.defineProperty(t,"constructor",{value:xn,enumerable:!1}),t},"undefined"!=typeof Symbol&&(xn.prototype[Symbol.for("nodejs.util.inspect.custom")]=xn.prototype.inspect),xn.from=function(t,e,r){if(arguments.length<3&&"number"!=typeof(r=An.guessLength(t)))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var n=new xn(e,r);if(An.isArrayLike(t)){var i,o;for(i=0,o=t.length;i<o;i++)n.items[i]=t[i];return n.size=o,n}return An.forEach(t,(function(t){n.push(t)})),n};var zn=xn,Mn={};Mn.DEFAULT_COMPARATOR=function(t,e){return t<e?-1:t>e?1:0},Mn.DEFAULT_REVERSE_COMPARATOR=function(t,e){return t<e?1:t>e?-1:0},Mn.reverseComparator=function(t){return function(e,r){return t(r,e)}},Mn.createTupleComparator=function(t){return 2===t?function(t,e){return t[0]<e[0]?-1:t[0]>e[0]?1:t[1]<e[1]?-1:t[1]>e[1]?1:0}:function(e,r){for(var n=0;n<t;){if(e[n]<r[n])return-1;if(e[n]>r[n])return 1;n++}return 0}};var Dn=cn,Nn=Mn,Sn=hn,kn=Nn.DEFAULT_COMPARATOR,Cn=Nn.reverseComparator;function Wn(t,e,r,n){for(var i,o,s=e[n];n>r&&t(s,o=e[i=n-1>>1])<0;)e[n]=o,n=i;e[n]=s}function On(t,e,r){for(var n,i=e.length,o=r,s=e[r],a=2*r+1;a<i;)(n=a+1)<i&&t(e[a],e[n])>=0&&(a=n),e[r]=e[a],a=2*(r=a)+1;e[r]=s,Wn(t,e,o,r)}function Un(t,e,r){e.push(r),Wn(t,e,0,e.length-1)}function In(t,e){var r=e.pop();if(0!==e.length){var n=e[0];return e[0]=r,On(t,e,0),n}return r}function Pn(t,e,r){if(0===e.length)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var n=e[0];return e[0]=r,On(t,e,0),n}function Fn(t,e,r){var n;return 0!==e.length&&t(e[0],r)<0&&(n=e[0],e[0]=r,r=n,On(t,e,0)),r}function Ln(t,e){for(var r=e.length>>1;--r>=0;)On(t,e,r)}function Tn(t,e){for(var r=e.length,n=0,i=new Array(r);n<r;)i[n++]=In(t,e);return i}function jn(t){if(this.clear(),this.comparator=t||kn,"function"!=typeof this.comparator)throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}function Rn(t){if(this.clear(),this.comparator=t||kn,"function"!=typeof this.comparator)throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=Cn(this.comparator)}jn.prototype.clear=function(){this.items=[],this.size=0},jn.prototype.push=function(t){return Un(this.comparator,this.items,t),++this.size},jn.prototype.peek=function(){return this.items[0]},jn.prototype.pop=function(){return 0!==this.size&&this.size--,In(this.comparator,this.items)},jn.prototype.replace=function(t){return Pn(this.comparator,this.items,t)},jn.prototype.pushpop=function(t){return Fn(this.comparator,this.items,t)},jn.prototype.consume=function(){return this.size=0,Tn(this.comparator,this.items)},jn.prototype.toArray=function(){return Tn(this.comparator,this.items.slice())},jn.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:jn,enumerable:!1}),t},"undefined"!=typeof Symbol&&(jn.prototype[Symbol.for("nodejs.util.inspect.custom")]=jn.prototype.inspect),Rn.prototype=jn.prototype,jn.from=function(t,e){var r,n=new jn(e);return r=Sn.isArrayLike(t)?t.slice():Sn.toArray(t),Ln(n.comparator,r),n.items=r,n.size=r.length,n},Rn.from=function(t,e){var r,n=new Rn(e);return r=Sn.isArrayLike(t)?t.slice():Sn.toArray(t),Ln(n.comparator,r),n.items=r,n.size=r.length,n},jn.siftUp=On,jn.siftDown=Wn,jn.push=Un,jn.pop=In,jn.replace=Pn,jn.pushpop=Fn,jn.heapify=Ln,jn.consume=Tn,jn.nsmallest=function(t,e,r){2===arguments.length&&(r=e,e=t,t=kn);var n,i,o,s,a=Cn(t),h=1/0;if(1===e){if(Sn.isArrayLike(r)){for(n=0,i=r.length;n<i;n++)o=r[n],(h===1/0||t(o,h)<0)&&(h=o);return(s=new r.constructor(1))[0]=h,s}return Dn(r,(function(e){(h===1/0||t(e,h)<0)&&(h=e)})),[h]}if(Sn.isArrayLike(r)){if(e>=r.length)return r.slice().sort(t);for(s=r.slice(0,e),Ln(a,s),n=e,i=r.length;n<i;n++)a(r[n],s[0])>0&&Pn(a,s,r[n]);return s.sort(t)}var u=Sn.guessLength(r);return null!==u&&u<e&&(e=u),s=new Array(e),n=0,Dn(r,(function(t){n<e?s[n]=t:(n===e&&Ln(a,s),a(t,s[0])>0&&Pn(a,s,t)),n++})),s.length>n&&(s.length=n),s.sort(t)},jn.nlargest=function(t,e,r){2===arguments.length&&(r=e,e=t,t=kn);var n,i,o,s,a=Cn(t),h=-1/0;if(1===e){if(Sn.isArrayLike(r)){for(n=0,i=r.length;n<i;n++)o=r[n],(h===-1/0||t(o,h)>0)&&(h=o);return(s=new r.constructor(1))[0]=h,s}return Dn(r,(function(e){(h===-1/0||t(e,h)>0)&&(h=e)})),[h]}if(Sn.isArrayLike(r)){if(e>=r.length)return r.slice().sort(a);for(s=r.slice(0,e),Ln(t,s),n=e,i=r.length;n<i;n++)t(r[n],s[0])>0&&Pn(t,s,r[n]);return s.sort(a)}var u=Sn.guessLength(r);return null!==u&&u<e&&(e=u),s=new Array(e),n=0,Dn(r,(function(r){n<e?s[n]=r:(n===e&&Ln(t,s),t(r,s[0])>0&&Pn(t,s,r)),n++})),s.length>n&&(s.length=n),s.sort(a)},jn.MinHeap=jn,jn.MaxHeap=Rn;var Gn=jn,qn={},Bn=Q,_n=dt.createEdgeWeightGetter;function Hn(t,e){return"outbound"===t||"inbound"===t?e.directedSize+2*e.undirectedSize:"in"===t||"out"===t||"directed"===t?e.directedSize:2*e.undirectedSize}function Vn(t,e){var r=t[(e=e||"outbound")+"Neighbors"].bind(t),n=Hn(e,t),i=Bn.getPointerArray(n),o=Bn.getPointerArray(t.order);this.graph=t,this.neighborhood=new o(n),this.starts=new i(t.order+1),this.nodes=t.nodes();var s,a,h,u,d,l={},g=0;for(s=0,a=t.order;s<a;s++)l[this.nodes[s]]=s;for(s=0,a=t.order;s<a;s++)for(d=r(this.nodes[s]),this.starts[s]=g,h=0,u=d.length;h<u;h++)this.neighborhood[g++]=l[d[h]];this.starts[s]=n}function Yn(t,e,r){var n=t[(r=r||"outbound")+"Edges"].bind(t),i=Hn(r,t),o=Bn.getPointerArray(i),s=Bn.getPointerArray(t.order),a=_n(e).fromMinimalEntry;this.graph=t,this.neighborhood=new s(i),this.weights=new Float64Array(i),this.outDegrees=new Float64Array(t.order),this.starts=new o(t.order+1),this.nodes=t.nodes();var h,u,d,l,g,c,f,p,y,m={},v=0;for(h=0,u=t.order;h<u;h++)m[this.nodes[h]]=h;for(h=0,u=t.order;h<u;h++)for(f=n(g=this.nodes[h]),this.starts[h]=v,d=0,l=f.length;d<l;d++)p=f[d],c=t.opposite(g,p),y=a(p,t.getEdgeAttributes(p)),this.neighborhood[v]=m[c],this.weights[v++]=y,this.outDegrees[h]+=y;this.starts[h]=i}Vn.prototype.bounds=function(t){return[this.starts[t],this.starts[t+1]]},Vn.prototype.project=function(){var t=this,e={};return t.nodes.forEach((function(r,n){e[r]=Array.from(t.neighborhood.slice(t.starts[n],t.starts[n+1])).map((function(e){return t.nodes[e]}))})),e},Vn.prototype.collect=function(t){var e,r,n={};for(e=0,r=t.length;e<r;e++)n[this.nodes[e]]=t[e];return n},Vn.prototype.assign=function(t,e){var r=0;this.graph.updateEachNodeAttributes((function(n,i){return i[t]=e[r++],i}),{attributes:[t]})},qn.NeighborhoodIndex=Vn,Yn.prototype.bounds=Vn.prototype.bounds,Yn.prototype.project=Vn.prototype.project,Yn.prototype.collect=Vn.prototype.collect,Yn.prototype.assign=Vn.prototype.assign,qn.WeightedNeighborhoodIndex=Yn;var Kn=bn,Xn=zn,Jn=Gn,Qn=Q,Zn=qn,$n=Zn.NeighborhoodIndex,ti=Zn.WeightedNeighborhoodIndex;function ei(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1]>e[1]?1:t[1]<e[1]?-1:t[2]>e[2]?1:t[2]<e[2]?-1:t[3]>e[3]?1:t[3]<e[3]?-1:0}an.createUnweightedIndexedBrandes=function(t){var e=new $n(t),r=e.neighborhood,n=e.starts,i=t.order,o=new Xn(Qn.getPointerArray(i),i),s=new Uint32Array(i),a=new Array(i),h=new Int32Array(i),u=new Kn(Uint32Array,i),d=function(t){var e,d,l,g,c,f,p;for(f=0;f<i;f++)a[f]=[],s[f]=0,h[f]=-1;for(s[t]=1,h[t]=0,u.push(t);0!==u.size;)for(f=u.shift(),o.push(f),e=h[f],d=s[f],l=n[f],g=n[f+1],c=l;c<g;c++)p=r[c],-1===h[p]&&(u.push(p),h[p]=e+1),h[p]===e+1&&(s[p]+=d,a[p].push(f));return[o,a,s]};return d.index=e,d},an.createDijkstraIndexedBrandes=function(t,e){var r=new ti(t,e||"weight"),n=r.neighborhood,i=r.weights,o=r.starts,s=t.order,a=new Xn(Qn.getPointerArray(s),s),h=new Uint32Array(s),u=new Array(s),d=new Float64Array(s),l=new Float64Array(s),g=new Jn(ei),c=function(t){var e,r,c,f,p,y,m,v,w,b=0;for(v=0;v<s;v++)u[v]=[],h[v]=0,d[v]=-1,l[v]=-1;for(h[t]=1,l[t]=0,g.push([0,b++,t,t]);0!==g.size;)if(f=(c=g.pop())[0],p=c[2],v=c[3],-1===d[v])for(a.push(v),d[v]=f,h[v]+=h[p],e=o[v],r=o[v+1],m=e;m<r;m++)w=n[m],y=f+i[m],-1===d[w]&&(-1===l[w]||y<l[w])?(l[w]=y,g.push([y,b++,v,w]),h[w]=0,u[w]=[v]):y===l[w]&&(h[w]+=h[v],u[w].push(v));return[a,u,h]};return c.index=r,c};var ri=n,ni=an,ii=b,oi=ni.createUnweightedIndexedBrandes,si=ni.createDijkstraIndexedBrandes,ai={nodeCentralityAttribute:"betweennessCentrality",getEdgeWeight:"weight",normalized:!0};function hi(t,e,r){if(!ri(e))throw new Error("graphology-centrality/beetweenness-centrality: the given graph is not a valid graphology instance.");var n,i,o,s,a,h,u,d,l,g,c=(r=ii(r,ai)).nodeCentralityAttribute,f=r.normalized,p=r.getEdgeWeight?si(e,r.getEdgeWeight):oi(e),y=e.order,m=new Float64Array(y),v=new Float64Array(y);for(h=0;h<y;h++){for(i=(n=p(h))[0],o=n[1],s=n[2],u=i.size;u--;)m[i.items[i.size-u]]=0;for(;0!==i.size;){for(a=(1+m[g=i.pop()])/s[g],u=0,d=o[g].length;u<d;u++)m[l=o[g][u]]+=s[l]*a;g!==h&&(v[g]+=m[g])}}var w=null;if(null!==(w=f?y<=2?null:1/((y-1)*(y-2)):"undirected"===e.type?.5:null))for(h=0;h<y;h++)v[h]*=w;return t?p.index.assign(c,v):p.index.collect(v)}var ui=hi.bind(null,!1);ui.assign=hi.bind(null,!0);var di=ui,li=J,gi=Q.getPointerArray;function ci(t){var e=gi(t);this.size=0,this.length=t,this.dense=new e(t),this.sparse=new e(t)}ci.prototype.clear=function(){this.size=0},ci.prototype.has=function(t){var e=this.sparse[t];return e<this.size&&this.dense[e]===t},ci.prototype.add=function(t){var e=this.sparse[t];return e<this.size&&this.dense[e]===t||(this.dense[this.size]=t,this.sparse[t]=this.size,this.size++),this},ci.prototype.delete=function(t){var e=this.sparse[t];return!(e>=this.size||this.dense[e]!==t)&&(e=this.dense[this.size-1],this.dense[this.sparse[t]]=e,this.sparse[e]=this.sparse[t],this.size--,!0)},ci.prototype.forEach=function(t,e){var r;e=arguments.length>1?e:this;for(var n=0;n<this.size;n++)r=this.dense[n],t.call(e,r,r)},ci.prototype.values=function(){var t=this.size,e=this.dense,r=0;return new li((function(){if(r<t){var n=e[r];return r++,{value:n}}return{done:!0}}))},"undefined"!=typeof Symbol&&(ci.prototype[Symbol.iterator]=ci.prototype.values),ci.prototype.inspect=function(){for(var t=new Set,e=0;e<this.size;e++)t.add(this.dense[e]);return Object.defineProperty(t,"constructor",{value:ci,enumerable:!1}),t.length=this.length,t},"undefined"!=typeof Symbol&&(ci.prototype[Symbol.for("nodejs.util.inspect.custom")]=ci.prototype.inspect);var fi=n,pi=b,yi=bn,mi=ci,vi=qn.NeighborhoodIndex,wi={nodeCentralityAttribute:"closenessCentrality",wassermanFaust:!1};function bi(t){this.index=new vi(t,"inbound"),this.queue=new yi(Array,t.order),this.seen=new mi(t.order)}function Ei(t,e,r){if(!fi(e))throw new Error("graphology-metrics/centrality/closeness: the given graph is not a valid graphology instance.");var n,i,o,s,a,h=(r=pi(r,wi)).wassermanFaust,u=new bi(e),d=e.order,l=new Float64Array(d);for(n=0;n<d;n++)o=(i=u.fromNode(n))[0],a=0,(s=i[1])>0&&d>1&&(a=o/s,h&&(a*=o/(d-1))),l[n]=a;return t?u.index.assign(r.nodeCentralityAttribute,l):u.index.collect(l)}bi.prototype.fromNode=function(t){var e,r,n,i,o,s,a=this.index,h=this.queue,u=this.seen;u.clear(),h.clear(),u.add(t),h.push([t,0]);for(var d=0,l=0;0!==h.size;)for(r=(e=h.shift())[0],0!==(n=e[1])&&(d+=n,l+=1),o=a.starts[r+1],i=a.starts[r];i<o;i++)s=a.neighborhood[i],u.has(s)||(u.add(s),h.push([s,n+1]));return[l,d]};var Ai=Ei.bind(null,!1);Ai.assign=Ei.bind(null,!0);var xi=Ai,zi=n,Mi=b,Di=qn.WeightedNeighborhoodIndex,Ni={nodeCentralityAttribute:"eigenvectorCentrality",getEdgeWeight:"weight",maxIterations:100,tolerance:1e-6};function Si(t){for(var e=0,r=0,n=0,i=t.length;n<i;n++){var o=Math.abs(t[n]);o>e&&(r*=e/o*(e/o),e=o),r+=0===o&&0===e?0:o/e*(o/e)}return e===1/0?1:e*Math.sqrt(r)}function ki(t,e,r){if(!zi(e))throw new Error("graphology-metrics/centrality/eigenvector: the given graph is not a valid graphology instance.");var n,i,o,s,a=(r=Mi(r,Ni)).maxIterations,h=r.tolerance,u=e.order,d=new Di(e,r.getEdgeWeight),l=new Float64Array(e.order);for(n=0;n<u;n++)l[n]=1/u;for(var g,c,f,p=0,y=0,m=!1;p<a;){for(c=l,l=new Float64Array(c),n=0;n<u;n++)for(o=d.starts[n+1],i=d.starts[n];i<o;i++)g=d.neighborhood[i],s=d.weights[i],l[g]+=c[n]*s;for(f=Si(l),n=0;n<u;n++)l[n]/=f;for(y=0,n=0;n<u;n++)y+=Math.abs(l[n]-c[n]);if(y<u*h){m=!0;break}p++}if(!m)throw Error("graphology-metrics/centrality/eigenvector: failed to converge.");if(!t)return d.collect(l);d.assign(r.nodeCentralityAttribute,l)}var Ci=ki.bind(null,!1);Ci.assign=ki.bind(null,!0);var Wi=Ci,Oi=b,Ui=n,Ii=dt.createEdgeWeightGetter,Pi={nodeAuthorityAttribute:"authority",nodeHubAttribute:"hub",getEdgeWeight:"weight",maxIterations:100,normalize:!0,tolerance:1e-8};function Fi(t,e){var r,n,i=Object.create(null);for(r=0,n=t.length;r<n;r++)i[t[r]]=e;return i}function Li(t){var e=0;for(var r in t)e+=t[r];return e}function Ti(t,e,r){if(!Ui(e))throw new Error("graphology-hits: the given graph is not a valid graphology instance.");if(e.multi)throw new Error("graphology-hits: the HITS algorithm does not work with MultiGraphs.");r=Oi(r,Pi);var n,i,o,s,a,h,u,d,l,g,c,f,p,y,m=Ii(r.getEdgeWeight).fromEntry,v=e.order,w=e.nodes(),b=Fi(w,1/v),E={},A=!1;for(e.forEachEdge((function(t,e,r,n,i,o,s){E[t]=m(t,e,r,n,i,o,s)})),u=0;u<r.maxIterations;u++){for(i=b,b=Fi(w,0),o=Fi(w,0),l=0,d=0,f=0;f<v;f++)for(s=w[f],p=0,y=(n=e.outboundEdges(s)).length;p<y;p++)h=n[p],a=e.opposite(s,h),o[a]+=i[s]*E[h],o[a]>d&&(d=o[a]);for(f=0;f<v;f++)for(s=w[f],p=0,y=(n=e.outboundEdges(s)).length;p<y;p++)h=n[p],a=e.opposite(s,h),b[s]+=o[a]*E[h],b[a]>l&&(l=b[a]);for(s in c=1/l,b)b[s]*=c;for(s in c=1/d,o)o[s]*=c;for(s in g=0,b)g+=Math.abs(b[s]-i[s]);if(g<r.tolerance){A=!0;break}}if(!A)throw Error("graphology-metrics/centrality/hits: failed to converge.");if(r.normalize){for(s in c=1/Li(o),o)o[s]*=c;for(s in c=1/Li(b),b)b[s]*=c}if(!t)return{hubs:b,authorities:o};e.updateEachNodeAttributes((function(t,e){return e[r.nodeAuthorityAttribute]=o[t],e[r.nodeHubAttribute]=b[t],e}),{attributes:[r.nodeAuthorityAttribute,r.nodeHubAttribute]})}var ji=Ti.bind(null,!1);ji.assign=Ti.bind(null,!0);var Ri=ji,Gi=n,qi=b,Bi=qn.WeightedNeighborhoodIndex,_i={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function Hi(t,e,r){if(!Gi(e))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");var n,i,o,s,a=(r=qi(r,_i)).alpha,h=r.maxIterations,u=r.tolerance,d=r.nodePagerankAttribute,l=e.order,g=1/l,c=new Bi(e,r.getEdgeWeight),f=new Float64Array(e.order),p=new Float64Array(c.weights.length),y=[];for(n=0;n<l;n++)for(f[n]=g,o=c.starts[n+1],0===(s=c.outDegrees[n])&&y.push(n),i=c.starts[n];i<o;i++)p[i]=c.weights[i]/s;for(var m,v,w=0,b=0,E=!1;w<h;){for(v=f,f=new Float64Array(e.order),m=0,n=0,o=y.length;n<o;n++)m+=v[y[n]];for(m*=a,n=0;n<l;n++){for(o=c.starts[n+1],i=c.starts[n];i<o;i++)f[c.neighborhood[i]]+=a*v[n]*p[i];f[n]+=m*g+(1-a)*g}for(b=0,n=0;n<l;n++)b+=Math.abs(f[n]-v[n]);if(b<l*u){E=!0;break}w++}if(!E)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(!t)return c.collect(f);c.assign(d,f)}var Vi=Hi.bind(null,!1);Vi.assign=Hi.bind(null,!0);var Yi=Vi,Ki=tn;$r.betweenness=di,$r.closeness=xi,$r.eigenvector=Wi,$r.hits=Ri,$r.pagerank=Yi,$r.degree=Ki.degreeCentrality,$r.inDegree=Ki.inDegreeCentrality,$r.outDegree=Ki.outDegreeCentrality;var Xi={},Ji=n,Qi=K,Zi=b,$i=dt.createEdgeWeightGetter,to={edgeDisparityAttribute:"disparity",getEdgeWeight:"weight"};function eo(t,e,r){if(!Ji(e))throw new Error("graphology-metrics/edge/disparity: the given graph is not a valid graphology instance.");if(e.multi||"mixed"===Qi(e))throw new Error("graphology-metrics/edge/disparity: not defined for multi nor mixed graphs.");r=Zi(r,to);var n,i,o,s=$i(r.getEdgeWeight).fromEntry,a={};e.forEachNode((function(t){a[t]=0})),e.forEachAssymetricAdjacencyEntry((function(t,e,r,n,i,o,h){var u=s(i,o,t,e,r,n,h);a[t]+=u,a[e]+=u}));var h={};if(e.forEachAssymetricAdjacencyEntry((function(t,r,u,d,l,g,c){var f=s(l,g,t,r,u,d,c);n!==t&&(n=t,i=e.degree(t),o=a[t]);var p=e.degree(r),y=a[r],m=f/o,v=f/y,w=Math.pow(1-m,i-1),b=Math.pow(1-v,p-1);h[l]=Math.min(w,b)})),!t)return h;e.updateEachEdgeAttributes((function(t,e){return e[r.edgeDisparityAttribute]=h[t],e}),{attributes:[r.edgeDisparityAttribute]})}var ro=eo.bind(null,!1);ro.assign=eo.bind(null,!0);var no=ro,io={};!function(t){t.intersection=function(){if(arguments.length<2)throw new Error("mnemonist/Set.intersection: needs at least two arguments.");var t,e,r=new Set,n=1/0,i=null,o=arguments.length;for(e=0;e<o;e++){if(0===(t=arguments[e]).size)return r;t.size<n&&(n=t.size,i=t)}for(var s,a,h,u,d=i.values();!(s=d.next()).done;){for(a=s.value,h=!0,e=0;e<o;e++)if((u=arguments[e])!==i&&!u.has(a)){h=!1;break}h&&r.add(a)}return r},t.union=function(){if(arguments.length<2)throw new Error("mnemonist/Set.union: needs at least two arguments.");var t,e,r,n=new Set,i=arguments.length;for(t=0;t<i;t++)for(e=arguments[t].values();!(r=e.next()).done;)n.add(r.value);return n},t.difference=function(t,e){if(!t.size)return new Set;if(!e.size)return new Set(t);for(var r,n=new Set,i=t.values();!(r=i.next()).done;)e.has(r.value)||n.add(r.value);return n},t.symmetricDifference=function(t,e){for(var r,n=new Set,i=t.values();!(r=i.next()).done;)e.has(r.value)||n.add(r.value);for(i=e.values();!(r=i.next()).done;)t.has(r.value)||n.add(r.value);return n},t.isSubset=function(t,e){var r,n=t.values();if(t===e)return!0;if(t.size>e.size)return!1;for(;!(r=n.next()).done;)if(!e.has(r.value))return!1;return!0},t.isSuperset=function(e,r){return t.isSubset(r,e)},t.add=function(t,e){for(var r,n=e.values();!(r=n.next()).done;)t.add(r.value)},t.subtract=function(t,e){for(var r,n=e.values();!(r=n.next()).done;)t.delete(r.value)},t.intersect=function(t,e){for(var r,n=t.values();!(r=n.next()).done;)e.has(r.value)||t.delete(r.value)},t.disjunct=function(t,e){for(var r,n=t.values(),i=[];!(r=n.next()).done;)e.has(r.value)&&i.push(r.value);for(n=e.values();!(r=n.next()).done;)t.has(r.value)||t.add(r.value);for(var o=0,s=i.length;o<s;o++)t.delete(i[o])},t.intersectionSize=function(t,e){var r;if(t.size>e.size&&(r=t,t=e,e=r),0===t.size)return 0;if(t===e)return t.size;for(var n,i=t.values(),o=0;!(n=i.next()).done;)e.has(n.value)&&o++;return o},t.unionSize=function(e,r){var n=t.intersectionSize(e,r);return e.size+r.size-n},t.jaccard=function(e,r){var n=t.intersectionSize(e,r);return 0===n?0:n/(e.size+r.size-n)},t.overlap=function(e,r){var n=t.intersectionSize(e,r);return 0===n?0:n/Math.min(e.size,r.size)}}(io);var oo=n,so=io.intersectionSize;function ao(t,e){if(!oo(e))throw new Error("graphology-metrics/simmelian-strength: given graph is not a valid graphology instance.");var r={};if(e.forEachNode((function(t){r[t]=new Set(e.neighbors(t))})),!t){var n={};return e.forEachEdge((function(t,e,i,o){n[t]=so(r[i],r[o])})),n}e.updateEachEdgeAttributes((function(t,e,n,i){return e.simmelianStrength=so(r[n],r[i]),e}),{attributes:["simmelianStrength"]})}var ho=ao.bind(null,!1);ho.assign=ao.bind(null,!0);var uo=ho;Xi.disparity=no,Xi.simmelianStrength=uo;var lo={},go={},co=n,fo=function(t){if(!co(t))throw new Error("graphology-metrics/simple-size: the given graph is not a valid graphology instance.");if(!t.multi)return t.size;var e=0,r=0;function n(){e++}function i(){r++}return t.forEachNode((function(e){"directed"!==t.type&&t.forEachUndirectedNeighbor(e,n),"undirected"!==t.type&&t.forEachOutNeighbor(e,i)})),e/2+r},po=n,yo=fo;function mo(t,e){return 2*e/(t*(t-1))}function vo(t,e){return e/(t*(t-1))}function wo(t,e){var r=t*(t-1);return e/(r+r/2)}function bo(t,e,r){var n,i;if(arguments.length>3){if(i=arguments[3],"number"!=typeof(n=r)||n<0)throw new Error("graphology-metrics/density: given order is not a valid number.");if("number"!=typeof i||i<0)throw new Error("graphology-metrics/density: given size is not a valid number.")}else{if(!po(r))throw new Error("graphology-metrics/density: given graph is not a valid graphology instance.");n=r.order,i=r.size,r.multi&&!1===e&&(i=yo(r))}return n<2?0:(null===t&&(t=r.type),null===e&&(e=r.multi),("undirected"===t?mo:"directed"===t?vo:wo)(n,i))}go.abstractDensity=bo,go.density=bo.bind(null,null,null),go.directedDensity=bo.bind(null,"directed",!1),go.undirectedDensity=bo.bind(null,"undirected",!1),go.mixedDensity=bo.bind(null,"mixed",!1),go.multiDirectedDensity=bo.bind(null,"directed",!0),go.multiUndirectedDensity=bo.bind(null,"undirected",!0),go.multiMixedDensity=bo.bind(null,"mixed",!0);var Eo={},Ao=n;Eo.nodeExtent=function(t,e){if(!Ao(t))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var r,n,i,o=[].concat(e),s={};for(i=0;i<o.length;i++)n=o[i],s[n]=[1/0,-1/0];return t.forEachNode((function(t,e){for(i=0;i<o.length;i++)n=o[i],(r=e[n])<s[n][0]&&(s[n][0]=r),r>s[n][1]&&(s[n][1]=r)})),"string"==typeof e?s[e]:s},Eo.edgeExtent=function(t,e){if(!Ao(t))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var r,n,i,o=[].concat(e),s={};for(i=0;i<o.length;i++)n=o[i],s[n]=[1/0,-1/0];return t.forEachEdge((function(t,e){for(i=0;i<o.length;i++)n=o[i],(r=e[n])<s[n][0]&&(s[n][0]=r),r>s[n][1]&&(s[n][1]=r)})),"string"==typeof e?s[e]:s};var xo={},zo=J,Mo=cn;function Do(){this.clear()}Do.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},Do.prototype.enqueue=function(t){return this.items.push(t),++this.size},Do.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}},Do.prototype.peek=function(){if(this.size)return this.items[this.offset]},Do.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var r=this.offset,n=0,i=this.items.length;r<i;r++,n++)t.call(e,this.items[r],n,this)},Do.prototype.toArray=function(){return this.items.slice(this.offset)},Do.prototype.values=function(){var t=this.items,e=this.offset;return new zo((function(){if(e>=t.length)return{done:!0};var r=t[e];return e++,{value:r,done:!1}}))},Do.prototype.entries=function(){var t=this.items,e=this.offset,r=0;return new zo((function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:[r++,n],done:!1}}))},"undefined"!=typeof Symbol&&(Do.prototype[Symbol.iterator]=Do.prototype.values),Do.prototype.toString=function(){return this.toArray().join(",")},Do.prototype.toJSON=function(){return this.toArray()},Do.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:Do,enumerable:!1}),t},"undefined"!=typeof Symbol&&(Do.prototype[Symbol.for("nodejs.util.inspect.custom")]=Do.prototype.inspect),Do.from=function(t){var e=new Do;return Mo(t,(function(t){e.enqueue(t)})),e},Do.of=function(){return Do.from(arguments)};var No=n,So=Do,ko=function(t,e){var r=e.length;if(0!==r){var n=t.length;t.length+=r;for(var i=0;i<r;i++)t[n+i]=e[i]}};function Co(t,e,r){if(!No(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(r))throw new Error('graphology-shortest-path: the "'+r+'" source node does not exist in the given graph.');r=""+r;var n=new Set,i={},o=0;i[r]=0;for(var s,a,h,u=[r];0!==u.length;){var d=[];for(s=0,a=u.length;s<a;s++)h=u[s],n.has(h)||(n.add(h),ko(d,e[t](h)),i[h]=o);o++,u=d}return i}var Wo=Co.bind(null,"outboundNeighbors"),Oo=Co.bind(null,"neighbors");xo.bidirectional=function(t,e,r){if(!No(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(r))throw new Error('graphology-shortest-path: the "'+r+'" target node does not exist in the given graph.');if((e=""+e)===(r=""+r))return[e];var n=t.inboundNeighbors.bind(t),i=t.outboundNeighbors.bind(t),o={},s={};o[e]=null,s[r]=null;var a,h,u,d,l,g,c,f,p=[e],y=[r],m=!1;t:for(;p.length&&y.length;)if(p.length<=y.length){for(a=p,p=[],l=0,c=a.length;l<c;l++)for(g=0,f=(u=i(h=a[l])).length;g<f;g++)if((d=u[g])in o||(p.push(d),o[d]=h),d in s){m=!0;break t}}else for(a=y,y=[],l=0,c=a.length;l<c;l++)for(g=0,f=(u=n(h=a[l])).length;g<f;g++)if((d=u[g])in s||(y.push(d),s[d]=h),d in o){m=!0;break t}if(!m)return null;for(var v=[];d;)v.unshift(d),d=o[d];for(d=s[v[v.length-1]];d;)v.push(d),d=s[d];return v.length?v:null},xo.singleSource=function(t,e){if(!No(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');var r,n,i,o,s,a,h={},u={};for(h[e=""+e]=!0,u[e]=[e];Object.keys(h).length;)for(i in r=h,h={},r)for(s=0,a=(n=t.outboundNeighbors(i)).length;s<a;s++)u[o=n[s]]||(u[o]=u[i].concat(o),h[o]=!0);return u},xo.singleSourceLength=Wo,xo.undirectedSingleSourceLength=Oo,xo.brandes=function(t,e){e=""+e;var r,n,i,o,s,a,h,u,d,l=[],g={},c={},f=t.nodes();for(a=0,u=f.length;a<u;a++)g[o=f[a]]=[],c[o]=0;var p={};c[e]=1,p[e]=0;for(var y=So.of(e);y.size;)for(o=y.dequeue(),l.push(o),r=p[o],n=c[o],h=0,d=(i=t.outboundNeighbors(o)).length;h<d;h++)(s=i[h])in p||(y.enqueue(s),p[s]=r+1),p[s]===r+1&&(c[s]+=n,g[s].push(o));return[l,g,c]};var Uo=n,Io=xo.singleSourceLength,Po=function(t,e){if(!Uo(t))throw new Error("graphology-metrics/eccentricity: given graph is not a valid graphology instance.");if(0===t.size)return 1/0;var r,n,i=-1/0,o=Io(t,e),s=0;for(r in o)(n=o[r])>i&&(i=n),s++;return s<t.order?1/0:i},Fo=n,Lo=Po,To=b,jo=n,Ro=K,Go=dt,qo={getNodeCommunity:"community",getEdgeWeight:"weight",resolution:1};function Bo(t,e){var r,n,i,o,s,a,h=e.resolution,u=function(t,e){var r=new Array(t.order),n=new Float64Array(t.order),i={},o=0,s=Go.createEdgeWeightGetter(e.getEdgeWeight).fromEntry,a=Go.createNodeValueGetter(e.getNodeCommunity).fromEntry,h=0,u={};return t.forEachNode((function(t,e){u[t]=h,r[h++]=a(t,e)})),t.forEachUndirectedEdge((function(t,e,r,a,h,d,l){var g=s(t,e,r,a,h,d,l);o+=g,i[t]=g,n[u[r]]+=g,r!==a&&(n[u[a]]+=g)})),{weights:i,communities:r,weightedDegrees:n,M:o}}(t,e),d=u.communities,l=u.weightedDegrees,g=u.M,c=t.nodes(),f=0,p=2*g;for(r=0,i=t.order;r<i;r++)for(n=0;n<i;n++)d[r]===d[n]&&(a=t.undirectedEdge(c[r],c[n]),o=u.weights[a]||0,s=l[r]*l[n],f+=r===n&&void 0!==a?2*(o-s/p*h):o-s/p*h);return f/p}function _o(t,e){var r,n,i,o,s=e.resolution,a=function(t,e){var r=new Array(t.order),n=new Float64Array(t.order),i=new Float64Array(t.order),o={},s=0,a=Go.createEdgeWeightGetter(e.getEdgeWeight).fromEntry,h=Go.createNodeValueGetter(e.getNodeCommunity).fromEntry,u=0,d={};return t.forEachNode((function(t,e){d[t]=u,r[u++]=h(t,e)})),t.forEachDirectedEdge((function(t,e,r,h,u,l,g){var c=a(t,e,r,h,u,l,g);s+=c,o[t]=c,i[d[r]]+=c,n[d[h]]+=c})),{weights:o,communities:r,weightedInDegrees:n,weightedOutDegrees:i,M:s}}(t,e),h=a.communities,u=a.weightedInDegrees,d=a.weightedOutDegrees,l=a.M,g=t.nodes(),c=0;for(r=0,i=t.order;r<i;r++)for(n=0;n<i;n++)h[r]===h[n]&&(o=t.directedEdge(g[r],g[n]),c+=(a.weights[o]||0)-u[r]*d[n]/l*s);return c/l}function Ho(t,e){var r=e.resolution,n=function(t,e){var r={},n={},i={},o=Go.createNodeValueGetter(e.getNodeCommunity).fromEntry;return t.forEachNode((function(t,e){var s=o(t,e);if(r[t]=s,void 0===s)throw new Error('graphology-metrics/modularity: the "'+t+'" node is not in the partition.');n[s]=0,i[s]=0})),{communities:r,totalWeights:n,internalWeights:i}}(t,e),i=0,o=n.totalWeights,s=n.internalWeights,a=n.communities,h=Go.createEdgeWeightGetter(e.getEdgeWeight).fromEntry;t.forEachUndirectedEdge((function(t,e,r,n,u,d,l){var g=h(t,e,r,n,u,d,l);i+=g;var c=a[r],f=a[n];o[c]+=g,o[f]+=g,c===f&&(s[c]+=2*g)}));var u=0,d=2*i;for(var l in s)u+=s[l]/d-Math.pow(o[l]/d,2)*r;return u}function Vo(t,e){var r=e.resolution,n=function(t,e){var r={},n={},i={},o={},s=Go.createNodeValueGetter(e.getNodeCommunity).fromEntry;return t.forEachNode((function(t,e){var a=s(t,e);if(r[t]=a,void 0===a)throw new Error('graphology-metrics/modularity: the "'+t+'" node is not in the partition.');n[a]=0,i[a]=0,o[a]=0})),{communities:r,totalInWeights:n,totalOutWeights:i,internalWeights:o}}(t,e),i=0,o=n.totalInWeights,s=n.totalOutWeights,a=n.internalWeights,h=n.communities,u=Go.createEdgeWeightGetter(e.getEdgeWeight).fromEntry;t.forEachDirectedEdge((function(t,e,r,n,d,l,g){var c=u(t,e,r,n,d,l,g);i+=c;var f=h[r],p=h[n];s[f]+=c,o[p]+=c,f===p&&(a[f]+=c)}));var d=0;for(var l in a)d+=a[l]/i-o[l]*s[l]/Math.pow(i,2)*r;return d}function Yo(t,e){if(!jo(t))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(0===t.size)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(t.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var r=Ro(t);if("mixed"===r)throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return e=To(e,qo),"directed"===r?Vo(t,e):Ho(t,e)}var Ko=Yo;Ko.sparse=Yo,Ko.dense=function(t,e){if(!jo(t))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(0===t.size)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(t.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var r=Ro(t);if("mixed"===r)throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return e=To(e,qo),"directed"===r?_o(t,e):Bo(t,e)},Ko.undirectedDelta=function(t,e,r,n){return n/(2*t)-e*r/(t*t*2)},Ko.directedDelta=function(t,e,r,n,i,o){return o/t-(i*e+n*r)/(t*t)};var Xo=Ko,Jo=n,Qo=dt.createEdgeWeightGetter,Zo=go,$o=Eo;lo.diameter=function(t){if(!Fo(t))throw new Error("graphology-metrics/diameter: given graph is not a valid graphology instance.");if(0===t.size)return 1/0;var e=-1/0;return t.someNode((function(r){var n=Lo(t,r);return n>e&&(e=n),e===1/0})),e},lo.modularity=Xo,lo.simpleSize=fo,lo.weightedSize=function(t,e){if(!Jo(t))throw new Error("graphology-metrics/weighted-size: the given graph is not a valid graphology instance.");e=Qo(e||"weight").fromEntry;var r=0;return t.forEachEdge((function(t,n,i,o,s,a,h){r+=e(t,n,i,o,s,a,h)})),r},lo.abstractDensity=Zo.abstractDensity,lo.density=Zo.density,lo.directedDensity=Zo.directedDensity,lo.undirectedDensity=Zo.undirectedDensity,lo.mixedDensity=Zo.mixedDensity,lo.multiDirectedDensity=Zo.multiDirectedDensity,lo.multiUndirectedDensity=Zo.multiUndirectedDensity,lo.multiMixedDensity=Zo.multiMixedDensity,lo.nodeExtent=$o.nodeExtent,lo.edgeExtent=$o.edgeExtent;var ts={},es=n;var rs=Mn,ns=Gn,is=rs.DEFAULT_COMPARATOR,os=rs.reverseComparator;function ss(t,e,r,n){for(var i,o=r,s=n,a=e[n],h=2*n+1;h<o;)(i=h+1)<o&&t(e[h],e[i])>=0&&(h=i),e[n]=e[h],h=2*(n=h)+1;e[n]=a,ns.siftDown(t,e,s,n)}function as(t,e,r,n){for(var i,o,s=n,a=new t(n);s>0;)i=r[--s],0!==s&&(o=r[0],r[0]=i,ss(e,r,--n,0),i=o),a[s]=i;return a}function hs(t,e,r){if(2===arguments.length&&(r=e,e=null),this.ArrayClass=t,this.capacity=r,this.items=new t(r),this.clear(),this.comparator=e||is,"number"!=typeof r&&r<=0)throw new Error("mnemonist/FixedReverseHeap.constructor: capacity should be a number > 0.");if("function"!=typeof this.comparator)throw new Error("mnemonist/FixedReverseHeap.constructor: given comparator should be a function.");this.comparator=os(this.comparator)}hs.prototype.clear=function(){this.size=0},hs.prototype.push=function(t){return this.size<this.capacity?(this.items[this.size]=t,ns.siftDown(this.comparator,this.items,0,this.size),this.size++):this.comparator(t,this.items[0])>0&&ns.replace(this.comparator,this.items,t),this.size},hs.prototype.peek=function(){return this.items[0]},hs.prototype.consume=function(){var t=as(this.ArrayClass,this.comparator,this.items,this.size);return this.size=0,t},hs.prototype.toArray=function(){return as(this.ArrayClass,this.comparator,this.items.slice(0,this.size),this.size)},hs.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:hs,enumerable:!1}),t},"undefined"!=typeof Symbol&&(hs.prototype[Symbol.for("nodejs.util.inspect.custom")]=hs.prototype.inspect);var us=hs,ds={},ls=new Float64Array(64),gs=new Float64Array(64);ds.inplaceQuickSort=function(t,e,r){var n,i,o,s,a;for(ls[0]=e,gs[0]=r,i=0;i>=0;)if((o=ls[i])<(s=gs[i]-1)){for(n=t[o];o<s;){for(;t[s]>=n&&o<s;)s--;for(o<s&&(t[o++]=t[s]);t[o]<=n&&o<s;)o++;o<s&&(t[s--]=t[o])}t[o]=n,ls[i+1]=o+1,gs[i+1]=gs[i],gs[i++]=o,gs[i]-ls[i]>gs[i-1]-ls[i-1]&&(a=ls[i],ls[i]=ls[i-1],ls[i-1]=a,a=gs[i],gs[i]=gs[i-1],gs[i-1]=a)}else i--;return t},ds.inplaceQuickSortIndices=function(t,e,r,n){var i,o,s,a,h,u;for(ls[0]=r,gs[0]=n,o=0;o>=0;)if((s=ls[o])<(a=gs[o]-1)){for(i=t[h=e[s]];s<a;){for(;t[e[a]]>=i&&s<a;)a--;for(s<a&&(e[s++]=e[a]);t[e[s]]<=i&&s<a;)s++;s<a&&(e[a--]=e[s])}e[s]=h,ls[o+1]=s+1,gs[o+1]=gs[o],gs[o++]=s,gs[o]-ls[o]>gs[o-1]-ls[o-1]&&(u=ls[o],ls[o]=ls[o-1],ls[o-1]=u,u=gs[o],gs[o]=gs[o-1],gs[o-1]=u)}else o--;return e};var cs=hn,fs=Q,ps=Mn.createTupleComparator,ys=us,ms=ds.inplaceQuickSortIndices;function vs(t,e,r,n){var i,o,s=0;for(i=0;i<t;i++)s+=(o=e[i][r]-n[i])*o;return s}function ws(t,e,r,n){for(var i,o,s,a,h,u,d,l,g=n.length,c=fs.getPointerArray(g+1),f=new c(g),p=new c(g),y=new c(g),m=[[0,0,r.length,-1,0]],v=0;0!==m.length;)l=(i=m.pop())[0],u=i[1],d=i[2],o=i[3],s=i[4],ms(e[l],r,u,d),h=r[a=u+((g=d-u)>>>1)],f[v]=h,o>-1&&(0===s?p[o]=v+1:y[o]=v+1),l=(l+1)%t,a!==u&&a!==d-1&&m.push([l,a+1,d,v,1]),a!==u&&m.push([l,u,a,v,0]),v++;return{axes:e,labels:n,pivots:f,lefts:p,rights:y}}function bs(t,e){this.dimensions=t,this.visited=0,this.axes=e.axes,this.labels=e.labels,this.pivots=e.pivots,this.lefts=e.lefts,this.rights=e.rights,this.size=this.labels.length}bs.prototype.nearestNeighbor=function(t){var e=1/0,r=null,n=this.dimensions,i=this.axes,o=this.pivots,s=this.lefts,a=this.rights,h=0;return function u(d,l){h++;var g=s[l],c=a[l],f=o[l],p=vs(n,i,f,t);if(!(p<e&&(r=f,e=p,0===p))){var y=i[d][f]-t[d];d=(d+1)%n,y>0?0!==g&&u(d,g-1):0!==c&&u(d,c-1),y*y<e&&(y>0?0!==c&&u(d,c-1):0!==g&&u(d,g-1))}}(0,0),this.visited=h,this.labels[r]};var Es=ps(3),As=ps(2);bs.prototype.kNearestNeighbors=function(t,e){if(t<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");if(1===(t=Math.min(t,this.size)))return[this.nearestNeighbor(e)];var r=new ys(Array,Es,t),n=this.dimensions,i=this.axes,o=this.pivots,s=this.lefts,a=this.rights,h=0;!function u(d,l){var g=s[l],c=a[l],f=o[l],p=vs(n,i,f,e);r.push([p,h++,f]);var y=e[d],m=i[d][f],v=y-m;d=(d+1)%n,y<m?0!==g&&u(d,g-1):0!==c&&u(d,c-1),(v*v<r.peek()[0]||r.size<t)&&(y<m?0!==c&&u(d,c-1):0!==g&&u(d,g-1))}(0,0),this.visited=h;for(var u=r.consume(),d=0;d<u.length;d++)u[d]=this.labels[u[d][2]];return u},bs.prototype.linearKNearestNeighbors=function(t,e){if(t<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");t=Math.min(t,this.size);var r,n,i,o=new ys(Array,As,t);for(r=0,n=this.size;r<n;r++)i=vs(this.dimensions,this.axes,this.pivots[r],e),o.push([i,r]);var s=o.consume();for(r=0;r<s.length;r++)s[r]=this.labels[this.pivots[s[r][1]]];return s},bs.prototype.inspect=function(){var t,e,r,n=new Map;for(n.dimensions=this.dimensions,Object.defineProperty(n,"constructor",{value:bs,enumerable:!1}),t=0;t<this.size;t++){for(r=new Array(this.dimensions),e=0;e<this.dimensions;e++)r[e]=this.axes[e][t];n.set(this.labels[t],r)}return n},"undefined"!=typeof Symbol&&(bs.prototype[Symbol.for("nodejs.util.inspect.custom")]=bs.prototype.inspect),bs.from=function(t,e){var r=function(t,e){var r,n,i,o,s=e.length,a=new Array(t),h=new Array(s),u=new(fs.getPointerArray(s))(s),d=!0;for(n=0;n<t;n++){for(r=new Float64Array(s),i=0;i<s;i++)o=e[i],r[i]=o[1][n],d&&(h[i]=o[0],u[i]=i);d=!1,a[n]=r}return{axes:a,ids:u,labels:h}}(e,cs.toArray(t));return new bs(e,ws(e,r.axes,r.ids,r.labels))},bs.fromAxes=function(t,e){return e||(e=fs.indices(t[0].length)),new bs(t.length,ws(t.length,t,fs.indices(e.length),e))};var xs=n,zs=bs,Ms=io.intersectionSize,Ds=n,Ns=xo.undirectedSingleSourceLength;ts.edgeUniformity=function(t){if(!es(t))throw new Error("graphology-metrics/layout-quality/edge-uniformity: given graph is not a valid graphology instance.");if(0===t.size)return 0;var e,r=0,n=0,i=new Float64Array(t.size);t.forEachEdge((function(t,e,o,s,a,h){var u,d,l=(u=a,d=h,Math.sqrt(Math.pow(u.x-d.x,2)+Math.pow(u.y-d.y,2)));i[n++]=l,r+=l}));var o=r/t.size,s=0;for(n=0,e=t.size;n<e;n++)s+=Math.pow(o-i[n],2);var a=s/(t.size*Math.pow(o,2));return Math.sqrt(a)},ts.neighborhoodPreservation=function(t){if(!xs(t))throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: given graph is not a valid graphology instance.");if(0===t.order)throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: cannot compute stress for a null graph.");if(0===t.size)return 0;var e=[new Float64Array(t.order),new Float64Array(t.order)],r=0;t.forEachNode((function(t,n){e[0][r]=n.x,e[1][r++]=n.y}));var n=zs.fromAxes(e,t.nodes()),i=0;return t.forEachNode((function(e,r){var o=new Set(t.neighbors(e));if(0!==o.size&&o.size!==t.order-1){var s=n.kNearestNeighbors(o.size+1,[r.x,r.y]);s=new Set(s.slice(1));var a=Ms(o,s);i+=a/s.size}else i+=1})),i/t.order},ts.stress=function(t){if(!Ds(t))throw new Error("graphology-metrics/layout-quality/stress: given graph is not a valid graphology instance.");if(0===t.order)throw new Error("graphology-metrics/layout-quality/stress: cannot compute stress for a null graph.");var e,r,n,i,o,s,a,h=new Array(t.order),u=new Array(t.order),d=0,l=4*t.order;t.forEachNode((function(t,e){h[d]=t,u[d++]=e}));var g,c,f=0;for(d=0,r=t.order;d<r;d++)for(o=Ns(t,h[d]),n=u[d],e=d+1;e<r;e++)i=u[e],void 0===(s=o[h[e]])&&(s=l),g=n,c=i,a=Math.sqrt(Math.pow(g.x-c.x,2)+Math.pow(g.y-c.y,2)),f+=1/(s*s)*Math.pow(a-s,2);return f};var Ss={},ks={},Cs=n;function Ws(t,e,r,n,i){if(!Cs(r))throw new Error("graphology-metrics/"+t+": the given graph is not a valid graphology instance.");i=i||"weight";var o=0;return r[e](n,(function(t,e,r,n,s,a,h){var u="function"==typeof i?i(t,e,r,n,s,a,h):e[i];("number"!=typeof u||isNaN(u))&&(u=1),o+=u})),o}ks.weightedDegree=Ws.bind(null,"weightedDegree","forEachEdge"),ks.weightedInDegree=Ws.bind(null,"weightedInDegree","forEachInEdge"),ks.weightedOutDegree=Ws.bind(null,"weightedOutDegree","forEachOutEdge"),ks.weightedInboundDegree=Ws.bind(null,"weightedInboundDegree","forEachInboundEdge"),ks.weightedOutboundDegree=Ws.bind(null,"weightedOutboundDegree","forEachOutboundEdge"),ks.weightedUndirectedDegree=Ws.bind(null,"weightedUndirectedDegree","forEachUndirectedEdge"),ks.weightedDirectedDegree=Ws.bind(null,"weightedDirectedDegree","forEachDirectedEdge");var Os=ks;Ss.eccentricity=Po,Ss.weightedDegree=Os.weightedDegree,Ss.weightedInDegree=Os.weightedInDegree,Ss.weightedOutDegree=Os.weightedOutDegree,Ss.weightedInboundDegree=Os.weightedInboundDegree,Ss.weightedOutboundDegree=Os.weightedOutboundDegree,Ss.weightedUndirectedDegree=Os.weightedUndirectedDegree,Ss.weightedDirectedDegree=Os.weightedDirectedDegree,Zr.centrality=$r,Zr.edge=Xi,Zr.graph=lo,Zr.layoutQuality=ts,Zr.node=Ss;var Us=Zr,Is={},Ps=n,Fs=jt.copyNode,Ls=Rt.copyEdge,Ts=n,js=Rt.copyEdge,Rs=n,Gs=jt.copyNode,qs=Rt.copyEdge,Bs=n,_s=Rt.copyEdge,Hs=n,Vs=function(t){if(!Hs(t))throw new Error("graphology-operators/to-mixed: expecting a valid graphology instance.");return t.copy({type:"mixed"})},Ys=n,Ks=function(t){if(!Ys(t))throw new Error("graphology-operators/to-multi: expecting a valid graphology instance.");return t.copy({multi:!0})},Xs=n,Js=Rt.copyEdge,Qs=n,Zs=Rt.copyEdge,$s=n;Is.disjointUnion=function(t,e){if(!Ps(t)||!Ps(e))throw new Error("graphology-operators/disjoint-union: invalid graph.");if(t.multi!==e.multi)throw new Error("graphology-operators/disjoint-union: both graph should be simple or multi.");var r=t.nullCopy();r.mergeAttributes(t.getAttributes());var n={},i={},o=0;return t.forEachNode((function(t,e){n[t]=o,Fs(r,o,e),o++})),e.forEachNode((function(t,e){i[t]=o,Fs(r,o,e),o++})),o=0,t.forEachEdge((function(t,e,i,s,a,h,u){Ls(r,u,o++,n[i],n[s],s,e)})),e.forEachEdge((function(t,e,n,s,a,h,u){Ls(r,u,o++,i[n],i[s],s,e)})),r},Is.reverse=function(t){if(!Ts(t))throw new Error("graphology-operators/reverse: invalid graph.");var e=t.emptyCopy();return t.forEachEdge((function(t,r,n,i,o,s,a){a?js(e,!0,t,n,i,r):js(e,!1,t,i,n,r)})),e},Is.subgraph=function(t,e){if(!Rs(t))throw new Error("graphology-operators/subgraph: invalid graph instance.");var r=t.nullCopy(),n=e;if(Array.isArray(e)){if(0===e.length)return r;e=new Set(e)}if(e instanceof Set){if(0===e.size)return r;n=function(t){return e.has(t)};var i=e;e=new Set,i.forEach((function(t){e.add(""+t)}))}if("function"!=typeof n)throw new Error("graphology-operators/subgraph: invalid nodes. Expecting an array or a set or a filtering function.");if("function"==typeof e){if(t.forEachNode((function(t,e){n(t,e)&&Gs(r,t,e)})),0===r.order)return r}else e.forEach((function(e){if(!t.hasNode(e))throw new Error('graphology-operators/subgraph: the "'+e+'" node was not found in the graph.');Gs(r,e,t.getNodeAttributes(e))}));return t.forEachEdge((function(t,e,i,o,s,a,h){n(i,s)&&(o===i||n(o,a))&&qs(r,h,t,i,o,e)})),r},Is.toDirected=function(t,e){if(!Bs(t))throw new Error("graphology-operators/to-directed: expecting a valid graphology instance.");"function"==typeof e&&(e={mergeEdge:e});var r="function"==typeof(e=e||{}).mergeEdge?e.mergeEdge:null;if("directed"===t.type)return t.copy();var n=t.emptyCopy({type:"directed"});return t.forEachDirectedEdge((function(t,e,r,i){_s(n,!1,t,r,i,e)})),t.forEachUndirectedEdge((function(e,i,o,s){var a=!t.multi&&"mixed"===t.type&&n.edge(o,s),h=!t.multi&&"mixed"===t.type&&n.edge(s,o);a?n.replaceEdgeAttributes(a,r(n.getEdgeAttributes(a),i)):_s(n,!1,null,o,s,i),o!==s&&(h?n.replaceEdgeAttributes(h,r(n.getEdgeAttributes(h),i)):_s(n,!1,null,s,o,i))})),n},Is.toMixed=Vs,Is.toMulti=Ks,Is.toSimple=function(t,e){if(!Xs(t))throw new Error("graphology-operators/to-simple: expecting a valid graphology instance.");"function"==typeof e&&(e={mergeEdge:e});var r="function"==typeof(e=e||{}).mergeEdge?e.mergeEdge:null;if(!t.multi)return t.copy();var n=t.emptyCopy({multi:!1});return t.forEachEdge((function(t,e,i,o,s,a,h){var u=h?n.undirectedEdge(i,o):n.directedEdge(i,o);u?r&&n.replaceEdgeAttributes(u,r(n.getEdgeAttributes(u),e)):Js(n,h,t,i,o,e)})),n},Is.toUndirected=function(t,e){if(!Qs(t))throw new Error("graphology-operators/to-undirected: expecting a valid graphology instance.");"function"==typeof e&&(e={mergeEdge:e});var r="function"==typeof(e=e||{}).mergeEdge?e.mergeEdge:null;if("undirected"===t.type)return t.copy();var n=t.emptyCopy({type:"undirected"});return t.forEachUndirectedEdge((function(t,e,r,i){Zs(n,!0,t,r,i,e)})),t.forEachDirectedEdge((function(e,i,o,s){if(!t.multi){var a=n.edge(o,s);if(a)return void(r&&n.replaceEdgeAttributes(a,r(n.getEdgeAttributes(a),i)))}Zs(n,!0,null,o,s,i)})),n},Is.union=function(t,e){if(!$s(t)||!$s(e))throw new Error("graphology-operators/union: invalid graph.");if(t.multi!==e.multi)throw new Error("graphology-operators/union: both graph should be simple or multi.");var r=t.copy();return r.import(e,!0),r};var ta=Is,ea={},ra={},na=function(){return!0};ra.edgePathFromNodePath=function(t,e){var r,n,i,o,s=e.length;if(s<2)return n=e[0],(o=t.multi?t.findEdge(n,n,na):t.edge(n,n))?[o]:[];s--;var a=new Array(s);for(r=0;r<s;r++){if(n=e[r],i=e[r+1],void 0===(o=t.multi?t.findOutboundEdge(n,i,na):t.edge(n,i)))throw new Error("graphology-shortest-path: given path is impossible in given graph.");a[r]=o}return a};var ia={},oa=n,sa=dt.createEdgeWeightGetter,aa=Gn,ha="weight";function ua(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1]>e[1]?1:t[1]<e[1]?-1:t[2]>e[2]?1:t[2]<e[2]?-1:0}function da(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1]>e[1]?1:t[1]<e[1]?-1:t[2]>e[2]?1:t[2]<e[2]?-1:t[3]>e[3]?1:t[3]<e[3]?-1:0}ia.bidirectional=function(t,e,r,n){return function(t,e,r,n){if(e=""+e,r=""+r,!oa(t))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(e&&!t.hasNode(e))throw new Error('graphology-shortest-path/dijkstra: the "'+e+'" source node does not exist in the given graph.');if(r&&!t.hasNode(r))throw new Error('graphology-shortest-path/dijkstra: the "'+r+'" target node does not exist in the given graph.');if(n=sa(n||ha).fromMinimalEntry,e===r)return[0,[e]];var i=[{},{}],o=[{},{}],s=[new aa(ua),new aa(ua)],a=[{},{}];o[0][e]=[e],o[1][r]=[r],a[0][e]=0,a[1][r]=0;var h,u,d,l,g,c,f,p,y,m=[],v=1/0,w=0,b=1;for(s[0].push([0,w++,e]),s[1].push([0,w++,r]);s[0].size&&s[1].size;)if(l=(h=s[b=1-b].pop())[0],!((g=h[2])in i[b])){if(i[b][g]=l,g in i[1-b])return[v,m];for(p=0,y=(u=1===b?t.inboundEdges(g):t.outboundEdges(g)).length;p<y;p++){if(f=u[p],c=t.opposite(g,f),d=i[b][g]+n(f,t.getEdgeAttributes(f)),c in i[b]&&d<i[b][c])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(c in a[b])||d<a[b][c])&&(a[b][c]=d,s[b].push([d,w++,c]),o[b][c]=o[b][g].concat(c),c in a[0]&&c in a[1]&&(l=a[0][c]+a[1][c],(0===m.length||v>l)&&(v=l,m=o[0][c].concat(o[1][c].slice(0,-1).reverse()))))}}return[1/0,null]}(t,e,r,n)[1]},ia.singleSource=function(t,e,r){var n={};return function(t,e,r,n,i,o){if(!oa(t))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(i&&!t.hasNode(i))throw new Error('graphology-shortest-path/dijkstra: the "'+i+'" target node does not exist in the given graph.');r=sa(r||ha).fromMinimalEntry;var s,a,h,u,d,l,g,c,f,p,y,m={},v={},w=new aa(ua),b=0;for(c=0,p=e.length;c<p;c++)v[u=e[c]]=0,w.push([0,b++,u]),o&&(o[u]=[u]);for(;w.size;)if(g=(a=w.pop())[0],!((u=a[2])in m)){if(m[u]=g,u===i)break;for(f=0,y=(s=t.outboundEdges(u)).length;f<y;f++)if(l=s[f],d=t.opposite(u,l),h=r(l,t.getEdgeAttributes(l))+m[u],!(n&&h>n)){if(d in m&&h<m[d])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(d in v)||h<v[d])&&(v[d]=h,w.push([h,b++,d]),o&&(o[d]=o[u].concat(d)))}}}(t,[e],r,0,null,n),n},ia.brandes=function(t,e,r){e=""+e,r=sa(r||ha).fromMinimalEntry;var n,i,o,s,a,h,u,d,l,g,c=[],f={},p={},y=t.nodes();for(l=0,g=y.length;l<g;l++)f[h=y[l]]=[],p[h]=0;var m={};p[e]=1;var v={};v[e]=0;var w=0,b=new aa(da);for(b.push([0,w++,e,e]);b.size;)if(s=(i=b.pop())[0],o=i[2],!((h=i[3])in m))for(p[h]+=p[o],c.push(h),m[h]=s,l=0,g=(n=t.outboundEdges(h)).length;l<g;l++)d=n[l],u=t.opposite(h,d),a=s+r(d,t.getEdgeAttributes(d)),u in m||u in v&&!(a<v[u])?a===v[u]&&(p[u]+=p[h],f[u].push(h)):(v[u]=a,b.push([a,w++,h,u]),p[u]=0,f[u]=[h]);return[c,f,p]};var la=xo,ga=ra;ea.unweighted=la,ea.dijkstra=ia,ea.bidirectional=la.bidirectional,ea.singleSource=la.singleSource,ea.singleSourceLength=la.singleSourceLength,ea.undirectedSingleSourceLength=la.undirectedSingleSourceLength,ea.brandes=la.brandes,ea.edgePathFromNodePath=ga.edgePathFromNodePath;var ca=ea,fa={},pa=function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.addUndirectedEdgeWithKey&&"function"==typeof t.dropNode&&"boolean"==typeof t.multi};function ya(){this.set=new Set,this.stack=[]}function ma(){this.set=new Set,this.stack=[]}function va(t,e){var r=[];return t.forEachOutboundEdge(e,(function(t,n,i,o){r.push([t,e===i?o:i])})),r}function wa(t,e){var r,n={};t.forEachOutboundEdge(e,(function(t,i,o,s){(r=e===o?s:o)in n||(n[r]=[]),n[r].push(t)}));var i=[];for(r in n)i.push([n[r],r]);return i}ya.prototype.has=function(t){return this.set.has(t)},ya.prototype.push=function(t){this.stack.push(t),this.set.add(t)},ya.prototype.pop=function(){this.set.delete(this.stack.pop())},ya.prototype.path=function(t){return this.stack.concat(t)},ya.of=function(t,e){var r=new ya;return e?r.stack.push(t):r.push(t),r},ma.prototype.has=function(t){return this.set.has(t)},ma.prototype.push=function(t){this.stack.push(t),this.set.add(t[1])},ma.prototype.pop=function(){this.set.delete(this.stack.pop()[1])},ma.prototype.path=function(t){return this.stack.slice(1).map((function(t){return t[0]})).concat([t[0]])},ma.of=function(t,e){var r=new ma,n=[null,t];return e?r.stack.push(n):r.push(n),r},fa.allSimplePaths=function(t,e,r,n){if(!pa(t))throw new Error("graphology-simple-path.allSimplePaths: expecting a graphology instance.");if(!t.hasNode(e))throw new Error('graphology-simple-path.allSimplePaths: expecting: could not find source node "'+e+'" in the graph.');if(!t.hasNode(r))throw new Error('graphology-simple-path.allSimplePaths: expecting: could not find target node "'+r+'" in the graph.');for(var i,o,s="number"==typeof(n=n||{}).maxDepth?n.maxDepth:1/0,a=(e=""+e)===(r=""+r),h=[t.outboundNeighbors(e)],u=ya.of(e,a),d=[];0!==h.length;)if(o=h[h.length-1].pop()){if(u.has(o))continue;o===r&&(i=u.path(o),d.push(i)),u.push(o),!u.has(r)&&h.length<s?h.push(t.outboundNeighbors(o)):u.pop()}else h.pop(),u.pop();return d},fa.allSimpleEdgePaths=function(t,e,r,n){if(!pa(t))throw new Error("graphology-simple-path.allSimpleEdgePaths: expecting a graphology instance.");if(t.multi)throw new Error("graphology-simple-path.allSimpleEdgePaths: not implemented for multi graphs.");if(!t.hasNode(e))throw new Error('graphology-simple-path.allSimpleEdgePaths: expecting: could not find source node "'+e+'" in the graph.');if(!t.hasNode(r))throw new Error('graphology-simple-path.allSimpleEdgePaths: expecting: could not find target node "'+r+'" in the graph.');for(var i,o,s,a="number"==typeof(n=n||{}).maxDepth?n.maxDepth:1/0,h=(e=""+e)===(r=""+r),u=[va(t,e)],d=ma.of(e,h),l=[];0!==u.length;)if(o=u[u.length-1].pop()){if(s=o[1],d.has(s))continue;s===r&&(i=d.path(o),l.push(i)),d.push(o),!d.has(r)&&u.length<a?u.push(va(t,s)):d.pop()}else u.pop(),d.pop();return l},fa.allSimpleEdgeGroupPaths=function(t,e,r,n){if(!pa(t))throw new Error("graphology-simple-path.allSimpleEdgeGroupPaths: expecting a graphology instance.");if(!t.hasNode(e))throw new Error('graphology-simple-path.allSimpleEdgeGroupPaths: expecting: could not find source node "'+e+'" in the graph.');if(!t.hasNode(r))throw new Error('graphology-simple-path.allSimpleEdgeGroupPaths: expecting: could not find target node "'+r+'" in the graph.');for(var i,o,s,a="number"==typeof(n=n||{}).maxDepth?n.maxDepth:1/0,h=(e=""+e)===(r=""+r),u=[wa(t,e)],d=ma.of(e,h),l=[];0!==u.length;)if(o=u[u.length-1].pop()){if(s=o[1],d.has(s))continue;s===r&&(i=d.path(o),l.push(i)),d.push(o),!d.has(r)&&u.length<a?u.push(wa(t,s)):d.pop()}else u.pop(),d.pop();return l};var ba=fa,Ea={},Aa={},xa=bn;function za(t){this.graph=t,this.queue=new xa(Array,t.order),this.seen=new Set,this.size=0}za.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},za.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},za.prototype.forEachNodeYetUnseen=function(t){var e=this.seen,r=this.graph;r.someNode((function(n,i){return e.size===r.order||!e.has(n)&&!!t(n,i)}))},za.prototype.has=function(t){return this.seen.has(t)},za.prototype.push=function(t){var e=this.seen.size;return this.seen.add(t),e!==this.seen.size&&(this.queue.push(t),this.size++,!0)},za.prototype.pushWith=function(t,e){var r=this.seen.size;return this.seen.add(t),r!==this.seen.size&&(this.queue.push(e),this.size++,!0)},za.prototype.shift=function(){var t=this.queue.shift();return this.size=this.queue.size,t};var Ma=za,Da={};Da.TraversalRecord=function(t,e,r){this.node=t,this.attributes=e,this.depth=r},Da.capitalize=function(t){return t[0].toUpperCase()+t.slice(1)};var Na=n,Sa=Ma,ka=Da,Ca=ka.TraversalRecord,Wa=ka.capitalize;function Oa(t,e,r,n){if(n=n||{},!Na(t))throw new Error("graphology-traversal/bfs: expecting a graphology instance.");if("function"!=typeof r)throw new Error("graphology-traversal/bfs: given callback is not a function.");if(0!==t.order){var i,o,s=new Sa(t),a=t["forEach"+Wa(n.mode||"outbound")+"Neighbor"].bind(t);i=null===e?s.forEachNodeYetUnseen.bind(s):function(r){r(e=""+e,t.getNodeAttributes(e))},i((function(t,e){for(s.pushWith(t,new Ca(t,e,0));0!==s.size;)o=s.shift(),!0!==r(o.node,o.attributes,o.depth)&&a(o.node,h)}))}function h(t,e){s.pushWith(t,new Ca(t,e,o.depth+1))}}Aa.bfs=function(t,e,r){return Oa(t,null,e,r)},Aa.bfsFromNode=Oa;var Ua={},Ia=n,Pa=qt,Fa=Da,La=Fa.TraversalRecord,Ta=Fa.capitalize;function ja(t,e,r,n){if(n=n||{},!Ia(t))throw new Error("graphology-traversal/dfs: expecting a graphology instance.");if("function"!=typeof r)throw new Error("graphology-traversal/dfs: given callback is not a function.");if(0!==t.order){var i,o,s=new Pa(t),a=t["forEach"+Ta(n.mode||"outbound")+"Neighbor"].bind(t);i=null===e?s.forEachNodeYetUnseen.bind(s):function(r){r(e=""+e,t.getNodeAttributes(e))},i((function(t,e){for(s.pushWith(t,new La(t,e,0));0!==s.size;)o=s.pop(),!0!==r(o.node,o.attributes,o.depth)&&a(o.node,h)}))}function h(t,e){s.pushWith(t,new La(t,e,o.depth+1))}}Ua.dfs=function(t,e,r){return ja(t,null,e,r)},Ua.dfsFromNode=ja;var Ra=Aa,Ga=Ua;Ea.bfs=Ra.bfs,Ea.bfsFromNode=Ra.bfsFromNode,Ea.dfs=Ga.dfs,Ea.dfsFromNode=Ga.dfsFromNode;var qa=Ea,Ba={},_a=n,Ha=Rt.copyEdge,Va=Rt.copyEdge;Ba.inferMulti=function(t){if(!_a(t))throw new Error("graphology-utils/infer-multi: expecting a valid graphology instance.");if(!t.multi||0===t.order||t.size<2)return!1;var e,r,n,i,o=!1;return t.forEachAssymetricAdjacencyEntry((function(t,s,a,h,u,d,l){o||(l&&t>s&&(i=s,s=t,t=i),t!==e||s!==r||l!==n?(e=t,r=s,n=l):o=!0)})),o},Ba.inferType=K,Ba.isGraph=n,Ba.isGraphConstructor=i,Ba.mergeClique=function(t,e){var r,n,i,o,s;if(0!==e.length)for(i=0,s=e.length;i<s;i++)for(r=e[i],o=i+1;o<s;o++)n=e[o],t.mergeEdge(r,n)},Ba.mergeCycle=function(t,e){var r,n,i,o;if(0!==e.length&&(t.mergeNode(e[0]),1!==e.length)){for(i=1,o=e.length;i<o;i++)r=e[i-1],n=e[i],t.mergeEdge(r,n);t.mergeEdge(n,e[0])}},Ba.mergePath=function(t,e){var r,n,i,o;if(0!==e.length)for(t.mergeNode(e[0]),i=1,o=e.length;i<o;i++)r=e[i-1],n=e[i],t.mergeEdge(r,n)},Ba.mergeStar=Me,Ba.renameGraphKeys=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r={});var n,i,o=t.nullCopy();return t.forEachNode((function(t,r){var n=e[t];void 0===n&&(n=t),o.addNode(n,r)})),t.forEachAssymetricAdjacencyEntry((function(t,s,a,h,u,d,l){t!==n&&(n=t,void 0===(i=e[t])&&(i=t));var g=e[s];void 0===g&&(g=s);var c=r[u];void 0===c&&(c=u),Ha(o,l,c,i,g,d)})),o},Ba.updateGraphKeys=function(t,e,r){var n,i,o=t.nullCopy();return t.forEachNode((function(t,r){var n=e?e(t,r):t;o.addNode(n,r)})),t.forEachAssymetricAdjacencyEntry((function(t,s,a,h,u,d,l){t!==n&&(n=t,i=e?e(t,a):t);var g=e?e(s,h):s,c=r?r(u,d,t,s,a,h,l):u;Va(o,l,c,i,g,d)})),o};var Ya=Ba;const{createNodeValueGetter:Ka,createEdgeValueGetter:Xa}=dt;var Ja={assignLayoutChanges:function(t,e,r){const{nodeXAttribute:n,nodeYAttribute:i}=r;t.updateEachNodeAttributes(((t,r)=>{const o=e[t];return!o||o.fixed||(r[n]=o.x,r[i]=o.y),r}),{attributes:["x","y"]})},collectLayoutChanges:function(t){const e={};for(const r in t){const n=t[r];e[r]={x:n.x,y:n.y}}return e}};const Qa=n,Za=b,$a=function(t,e,r){const{nodeXAttribute:n,nodeYAttribute:i}=r,{attraction:o,repulsion:s,gravity:a,inertia:h,maxMove:u}=r.settings;let{shouldSkipNode:d,shouldSkipEdge:l,isNodeFixed:g}=r;g=Ka(g),d=Ka(d,!1),l=Xa(l,!1);const c=t.filterNodes(((t,e)=>!d.fromEntry(t,e))),f=c.length;for(let r=0;r<f;r++){const o=c[r],s=t.getNodeAttributes(o),a=e[o];e[o]=a?{dx:a.dx*h,dy:a.dy*h,x:s[n]||0,y:s[i]||0}:{dx:0,dy:0,x:s[n]||0,y:s[i]||0}}if(s)for(let t=0;t<f;t++){const r=c[t],n=e[r];for(let r=t+1;r<f;r++){const t=c[r],i=e[t],o=i.x-n.x,a=i.y-n.y,h=Math.sqrt(o*o+a*a)||1,u=s/h*o,d=s/h*a;n.dx-=u,n.dy-=d,i.dx+=u,i.dy+=d}}if(o&&t.forEachEdge(((t,r,n,i,s,a,h)=>{if(n===i)return;if(d.fromEntry(n,s)||d.fromEntry(i,a))return;if(l.fromEntry(t,r,n,i,s,a,h))return;const u=e[n],g=e[i],c=g.x-u.x,f=g.y-u.y,p=Math.sqrt(c*c+f*f)||1,y=o*p*c,m=o*p*f;u.dx+=y,u.dy+=m,g.dx-=y,g.dy-=m})),a)for(let t=0;t<f;t++){const r=c[t],n=e[r],{x:i,y:o}=n,s=Math.sqrt(i*i+o*o)||1;e[r].dx-=i*a*s,e[r].dy-=o*a*s}for(let r=0;r<f;r++){const n=c[r],i=e[n],o=Math.sqrt(i.dx*i.dx+i.dy*i.dy);o>u&&(i.dx*=u/o,i.dy*=u/o),g.fromGraph(t,n)?i.fixed=!0:(i.x+=i.dx,i.y+=i.dy,i.fixed=!1)}return{converged:!1}},th=Ja,eh={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}};function rh(t,e){if(!Qa(t))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");e=Za(e,eh),this.callbacks={},e.onConverged&&(this.callbacks.onConverged=e.onConverged),this.graph=t,this.params=e,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}rh.prototype.isRunning=function(){return this.running},rh.prototype.runFrame=function(){let{converged:t}=$a(this.graph,this.nodeStates,this.params);th.assignLayoutChanges(this.graph,this.nodeStates,this.params),t=!1,t?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame((()=>this.runFrame()))},rh.prototype.stop=function(){return this.running=!1,null!==this.frameID&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},rh.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},rh.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0};var nh=rh,ih=function(){var t,e,r={};!function(){var t=10;r.exports=function(e,r,n){var i,o,s,a,h,u,d,l,g,c,f,p,y,m,v,w,b,E,A,x,z,M,D,N=r.length,S=n.length,k=e.adjustSizes,C=e.barnesHutTheta*e.barnesHutTheta,W=[];for(s=0;s<N;s+=t)r[s+4]=r[s+2],r[s+5]=r[s+3],r[s+2]=0,r[s+3]=0;if(e.outboundAttractionDistribution){for(f=0,s=0;s<N;s+=t)f+=r[s+6];f/=N/t}if(e.barnesHutOptimize){var O,U,I,P=1/0,F=-1/0,L=1/0,T=-1/0;for(s=0;s<N;s+=t)P=Math.min(P,r[s+0]),F=Math.max(F,r[s+0]),L=Math.min(L,r[s+1]),T=Math.max(T,r[s+1]);var j=F-P,R=T-L;for(j>R?T=(L-=(j-R)/2)+j:F=(P-=(R-j)/2)+R,W[0]=-1,W[1]=(P+F)/2,W[2]=(L+T)/2,W[3]=Math.max(F-P,T-L),W[4]=-1,W[5]=-1,W[6]=0,W[7]=0,W[8]=0,i=1,s=0;s<N;s+=t)for(o=0,I=3;;){if(!(W[o+5]>=0)){if(W[o+0]<0){W[o+0]=s;break}if(W[o+5]=9*i,l=W[o+3]/2,W[(g=W[o+5])+0]=-1,W[g+1]=W[o+1]-l,W[g+2]=W[o+2]-l,W[g+3]=l,W[g+4]=g+9,W[g+5]=-1,W[g+6]=0,W[g+7]=0,W[g+8]=0,W[(g+=9)+0]=-1,W[g+1]=W[o+1]-l,W[g+2]=W[o+2]+l,W[g+3]=l,W[g+4]=g+9,W[g+5]=-1,W[g+6]=0,W[g+7]=0,W[g+8]=0,W[(g+=9)+0]=-1,W[g+1]=W[o+1]+l,W[g+2]=W[o+2]-l,W[g+3]=l,W[g+4]=g+9,W[g+5]=-1,W[g+6]=0,W[g+7]=0,W[g+8]=0,W[(g+=9)+0]=-1,W[g+1]=W[o+1]+l,W[g+2]=W[o+2]+l,W[g+3]=l,W[g+4]=W[o+4],W[g+5]=-1,W[g+6]=0,W[g+7]=0,W[g+8]=0,i+=4,O=r[W[o+0]+0]<W[o+1]?r[W[o+0]+1]<W[o+2]?W[o+5]:W[o+5]+9:r[W[o+0]+1]<W[o+2]?W[o+5]+18:W[o+5]+27,W[o+6]=r[W[o+0]+6],W[o+7]=r[W[o+0]+0],W[o+8]=r[W[o+0]+1],W[O+0]=W[o+0],W[o+0]=-1,O===(U=r[s+0]<W[o+1]?r[s+1]<W[o+2]?W[o+5]:W[o+5]+9:r[s+1]<W[o+2]?W[o+5]+18:W[o+5]+27)){if(I--){o=O;continue}I=3;break}W[U+0]=s;break}O=r[s+0]<W[o+1]?r[s+1]<W[o+2]?W[o+5]:W[o+5]+9:r[s+1]<W[o+2]?W[o+5]+18:W[o+5]+27,W[o+7]=(W[o+7]*W[o+6]+r[s+0]*r[s+6])/(W[o+6]+r[s+6]),W[o+8]=(W[o+8]*W[o+6]+r[s+1]*r[s+6])/(W[o+6]+r[s+6]),W[o+6]+=r[s+6],o=O}}if(e.barnesHutOptimize){for(p=e.scalingRatio,s=0;s<N;s+=t)for(o=0;;)if(W[o+5]>=0){if(w=Math.pow(r[s+0]-W[o+7],2)+Math.pow(r[s+1]-W[o+8],2),4*(c=W[o+3])*c/w<C){if(y=r[s+0]-W[o+7],m=r[s+1]-W[o+8],!0===k?w>0?(b=p*r[s+6]*W[o+6]/w,r[s+2]+=y*b,r[s+3]+=m*b):w<0&&(b=-p*r[s+6]*W[o+6]/Math.sqrt(w),r[s+2]+=y*b,r[s+3]+=m*b):w>0&&(b=p*r[s+6]*W[o+6]/w,r[s+2]+=y*b,r[s+3]+=m*b),(o=W[o+4])<0)break;continue}o=W[o+5]}else if((u=W[o+0])>=0&&u!==s&&(w=(y=r[s+0]-r[u+0])*y+(m=r[s+1]-r[u+1])*m,!0===k?w>0?(b=p*r[s+6]*r[u+6]/w,r[s+2]+=y*b,r[s+3]+=m*b):w<0&&(b=-p*r[s+6]*r[u+6]/Math.sqrt(w),r[s+2]+=y*b,r[s+3]+=m*b):w>0&&(b=p*r[s+6]*r[u+6]/w,r[s+2]+=y*b,r[s+3]+=m*b)),(o=W[o+4])<0)break}else for(p=e.scalingRatio,a=0;a<N;a+=t)for(h=0;h<a;h+=t)y=r[a+0]-r[h+0],m=r[a+1]-r[h+1],!0===k?(w=Math.sqrt(y*y+m*m)-r[a+8]-r[h+8])>0?(b=p*r[a+6]*r[h+6]/w/w,r[a+2]+=y*b,r[a+3]+=m*b,r[h+2]-=y*b,r[h+3]-=m*b):w<0&&(b=100*p*r[a+6]*r[h+6],r[a+2]+=y*b,r[a+3]+=m*b,r[h+2]-=y*b,r[h+3]-=m*b):(w=Math.sqrt(y*y+m*m))>0&&(b=p*r[a+6]*r[h+6]/w/w,r[a+2]+=y*b,r[a+3]+=m*b,r[h+2]-=y*b,r[h+3]-=m*b);for(g=e.gravity/e.scalingRatio,p=e.scalingRatio,s=0;s<N;s+=t)b=0,y=r[s+0],m=r[s+1],w=Math.sqrt(Math.pow(y,2)+Math.pow(m,2)),e.strongGravityMode?w>0&&(b=p*r[s+6]*g):w>0&&(b=p*r[s+6]*g/w),r[s+2]-=y*b,r[s+3]-=m*b;for(p=1*(e.outboundAttractionDistribution?f:1),d=0;d<S;d+=3)a=n[d+0],h=n[d+1],l=n[d+2],v=Math.pow(l,e.edgeWeightInfluence),y=r[a+0]-r[h+0],m=r[a+1]-r[h+1],!0===k?(w=Math.sqrt(y*y+m*m)-r[a+8]-r[h+8],e.linLogMode?e.outboundAttractionDistribution?w>0&&(b=-p*v*Math.log(1+w)/w/r[a+6]):w>0&&(b=-p*v*Math.log(1+w)/w):e.outboundAttractionDistribution?w>0&&(b=-p*v/r[a+6]):w>0&&(b=-p*v)):(w=Math.sqrt(Math.pow(y,2)+Math.pow(m,2)),e.linLogMode?e.outboundAttractionDistribution?w>0&&(b=-p*v*Math.log(1+w)/w/r[a+6]):w>0&&(b=-p*v*Math.log(1+w)/w):e.outboundAttractionDistribution?(w=1,b=-p*v/r[a+6]):(w=1,b=-p*v)),w>0&&(r[a+2]+=y*b,r[a+3]+=m*b,r[h+2]-=y*b,r[h+3]-=m*b);if(!0===k)for(s=0;s<N;s+=t)1!==r[s+9]&&((E=Math.sqrt(Math.pow(r[s+2],2)+Math.pow(r[s+3],2)))>10&&(r[s+2]=10*r[s+2]/E,r[s+3]=10*r[s+3]/E),A=r[s+6]*Math.sqrt((r[s+4]-r[s+2])*(r[s+4]-r[s+2])+(r[s+5]-r[s+3])*(r[s+5]-r[s+3])),x=Math.sqrt((r[s+4]+r[s+2])*(r[s+4]+r[s+2])+(r[s+5]+r[s+3])*(r[s+5]+r[s+3]))/2,z=.1*Math.log(1+x)/(1+Math.sqrt(A)),M=r[s+0]+r[s+2]*(z/e.slowDown),r[s+0]=M,D=r[s+1]+r[s+3]*(z/e.slowDown),r[s+1]=D);else for(s=0;s<N;s+=t)1!==r[s+9]&&(A=r[s+6]*Math.sqrt((r[s+4]-r[s+2])*(r[s+4]-r[s+2])+(r[s+5]-r[s+3])*(r[s+5]-r[s+3])),x=Math.sqrt((r[s+4]+r[s+2])*(r[s+4]+r[s+2])+(r[s+5]+r[s+3])*(r[s+5]+r[s+3]))/2,z=r[s+7]*Math.log(1+x)/(1+Math.sqrt(A)),r[s+7]=Math.min(1,Math.sqrt(z*(Math.pow(r[s+2],2)+Math.pow(r[s+3],2))/(1+Math.sqrt(A)))),M=r[s+0]+r[s+2]*(z/e.slowDown),r[s+0]=M,D=r[s+1]+r[s+3]*(z/e.slowDown),r[s+1]=D);return{}}}();var n=r.exports;self.addEventListener("message",(function(r){var i=r.data;t=new Float32Array(i.nodes),i.edges&&(e=new Float32Array(i.edges)),n(i.settings,t,e),self.postMessage({nodes:t.buffer},[t.buffer])}))},oh=n,sh=dt.createEdgeWeightGetter,ah=Or,hh=Ur;function uh(t,e){if(e=e||{},!oh(t))throw new Error("graphology-layout-forceatlas2/worker: the given graph is not a valid graphology instance.");var r=sh("getEdgeWeight"in e?e.getEdgeWeight:"weight").fromEntry,n=ah.assign({},hh,e.settings),i=ah.validateSettings(n);if(i)throw new Error("graphology-layout-forceatlas2/worker: "+i.message);this.worker=null,this.graph=t,this.settings=n,this.getEdgeWeight=r,this.matrices=null,this.running=!1,this.killed=!1,this.outputReducer="function"==typeof e.outputReducer?e.outputReducer:null,this.handleMessage=this.handleMessage.bind(this);var o=void 0,s=this;this.handleGraphUpdate=function(){s.worker&&s.worker.terminate(),o&&clearTimeout(o),o=setTimeout((function(){o=void 0,s.spawnWorker()}),0)},t.on("nodeAdded",this.handleGraphUpdate),t.on("edgeAdded",this.handleGraphUpdate),t.on("nodeDropped",this.handleGraphUpdate),t.on("edgeDropped",this.handleGraphUpdate),this.spawnWorker()}uh.prototype.isRunning=function(){return this.running},uh.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=ah.createWorker(ih),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())},uh.prototype.handleMessage=function(t){if(this.running){var e=new Float32Array(t.data.nodes);ah.assignLayoutChanges(this.graph,e,this.outputReducer),this.outputReducer&&ah.readGraphPositions(this.graph,e),this.matrices.nodes=e,this.askForIterations()}},uh.prototype.askForIterations=function(t){var e=this.matrices,r={settings:this.settings,nodes:e.nodes.buffer},n=[e.nodes.buffer];return t&&(r.edges=e.edges.buffer,n.push(e.edges.buffer)),this.worker.postMessage(r,n),this},uh.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-forceatlas2/worker.start: layout was killed.");return this.running||(this.matrices=ah.graphToByteArrays(this.graph,this.getEdgeWeight),this.running=!0,this.askForIterations(!0)),this},uh.prototype.stop=function(){return this.running=!1,this},uh.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleGraphUpdate),this.graph.removeListener("edgeAdded",this.handleGraphUpdate),this.graph.removeListener("nodeDropped",this.handleGraphUpdate),this.graph.removeListener("edgeDropped",this.handleGraphUpdate)};var dh=uh,lh=function(){var t,e={};!function(){function t(){return.01*(.5-Math.random())}e.exports=function(e,r){var n,i,o,s,a,h,u=e.margin,d=e.ratio,l=e.expansion,g=e.gridSize,c=e.speed,f=!0,p=r.length,y=p/3|0,m=new Float32Array(y),v=new Float32Array(y),w=1/0,b=1/0,E=-1/0,A=-1/0;for(n=0;n<p;n+=3)o=r[n+0],s=r[n+1],h=r[n+2]*d+u,w=Math.min(w,o-h),E=Math.max(E,o+h),b=Math.min(b,s-h),A=Math.max(A,s+h);var x=E-w,z=A-b,M=(w+E)/2,D=(b+A)/2;w=M-l*x/2,E=M+l*x/2,b=D-l*z/2,A=D+l*z/2;var N,S,k,C,W,O,U,I,P,F,L,T,j=new Array(g*g),R=j.length;for(N=0;N<R;N++)j[N]=[];for(n=0;n<p;n+=3)for(o=r[n+0],s=r[n+1],S=o-(h=r[n+2]*d+u),k=o+h,C=s-h,W=s+h,O=Math.floor(g*(S-w)/(E-w)),U=Math.floor(g*(k-w)/(E-w)),I=Math.floor(g*(C-b)/(A-b)),P=Math.floor(g*(W-b)/(A-b)),F=O;F<=U;F++)for(L=I;L<=P;L++)j[F*g+L].push(n);var G,q,B,_,H,V,Y,K,X,J,Q,Z,$=new Set;for(N=0;N<R;N++)for(n=0,a=(T=j[N]).length;n<a;n++)for(B=r[(G=T[n])+0],H=r[G+1],Y=r[G+2],i=n+1;i<a;i++)q=T[i],X=G+""+q,R>1&&$.has(X)||(R>1&&$.add(X),_=r[q+0],V=r[q+1],K=r[q+2],J=_-B,Q=V-H,(Z=Math.sqrt(J*J+Q*Q))<Y*d+u+(K*d+u)&&(f=!1,q=q/3|0,Z>0?(m[q]+=J/Z*(1+Y),v[q]+=Q/Z*(1+Y)):(m[q]+=x*t(),v[q]+=z*t())));for(n=0,i=0;n<p;n+=3,i++)r[n+0]+=.1*m[i]*c,r[n+1]+=.1*v[i]*c;return{converged:f}}}();var r=e.exports;self.addEventListener("message",(function(e){var n=e.data;t=new Float32Array(n.nodes);var i=r(n.settings,t);self.postMessage({result:i,nodes:t.buffer},[t.buffer])}))},gh=n,ch=Br,fh=_r;function ph(t,e){if(e=e||{},!gh(t))throw new Error("graphology-layout-noverlap/worker: the given graph is not a valid graphology instance.");var r=Object.assign({},fh,e.settings),n=ch.validateSettings(r);if(n)throw new Error("graphology-layout-noverlap/worker: "+n.message);this.worker=null,this.graph=t,this.settings=r,this.matrices=null,this.running=!1,this.killed=!1,this.inputReducer=e.inputReducer,this.outputReducer=e.outputReducer,this.callbacks={onConverged:"function"==typeof e.onConverged?e.onConverged:null},this.handleMessage=this.handleMessage.bind(this);var i=!1,o=this;this.handleAddition=function(){i||(i=!0,o.spawnWorker(),setTimeout((function(){i=!1}),0))},t.on("nodeAdded",this.handleAddition),t.on("edgeAdded",this.handleAddition),this.spawnWorker()}ph.prototype.isRunning=function(){return this.running},ph.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=ch.createWorker(lh),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())},ph.prototype.handleMessage=function(t){if(this.running){var e=new Float32Array(t.data.nodes);if(ch.assignLayoutChanges(this.graph,e,this.outputReducer),this.matrices.nodes=e,t.data.result.converged)return this.callbacks.onConverged&&this.callbacks.onConverged(),void this.stop();this.askForIterations()}},ph.prototype.askForIterations=function(){var t=this.matrices,e={settings:this.settings,nodes:t.nodes.buffer},r=[t.nodes.buffer];return this.worker.postMessage(e,r),this},ph.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-noverlap/worker.start: layout was killed.");return this.running||(this.matrices={nodes:ch.graphToByteArray(this.graph,this.inputReducer)},this.running=!0,this.askForIterations()),this},ph.prototype.stop=function(){return this.running=!1,this},ph.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleAddition),this.graph.removeListener("edgeAdded",this.handleAddition)};var yh=ph,mh={},vh={cast:function(t,e){switch(t){case"boolean":e="true"===e;break;case"integer":case"long":case"float":case"double":e=+e;break;case"liststring":e=e?e.split("|"):[]}return e}},wh=/["'<>&\s]/g;vh.sanitizeTagName=function(t){return t.replace(wh,"").trim()};var bh=i,Eh=Rt.mergeEdge,Ah=Vs,xh=Ks,zh=vh.cast;function Mh(t,e){var r=t.getElementsByTagName("viz:"+e)[0];return r||(r=t.getElementsByTagNameNS("viz",e)[0]),r||(r=t.getElementsByTagName(e)[0]),r}function Dh(t){for(var e,r,n,i,o={},s={},a=0,h=t.length;a<h;a++)o[n=(e=t[a]).getAttribute("id")||e.getAttribute("for")]={id:n,type:e.getAttribute("type")||"string",title:(i=+n,i==i&&e.getAttribute("title")||n)},(r=e.getElementsByTagName("default")[0])&&(s[o[n].title]=zh(o[n].type,r.textContent));return[o,s]}function Nh(t,e,r){var n={},i=r.getAttribute("label"),o=r.getAttribute("weight");i&&(n.label=i),o&&(n.weight=+o);for(var s,a,h,u=r.getElementsByTagName("attvalue"),d=0,l=u.length;d<l;d++)n[t[a=(s=u[d]).getAttribute("id")||s.getAttribute("for")].title]=zh(t[a].type,s.getAttribute("value"));for(h in e)h in n||(n[h]=e[h]);var g,c,f,p=Mh(r,"color");return p&&(n.color=function(t){var e=t.getAttribute("a"),r=t.getAttribute("r"),n=t.getAttribute("g"),i=t.getAttribute("b");return e?"rgba("+r+","+n+","+i+","+e+")":"rgb("+r+","+n+","+i+")"}(p)),(p=Mh(r,"size"))&&(n.size=+p.getAttribute("value")),(p=Mh(r,"position"))&&(g=p.getAttribute("x"),c=p.getAttribute("y"),f=p.getAttribute("z"),g&&(n.x=+g),c&&(n.y=+c),f&&(n.z=+f)),(p=Mh(r,"shape"))&&(n.shape=p.getAttribute("value")),(p=Mh(r,"thickness"))&&(n.thickness=+p.getAttribute("value")),n}var Sh=function(t,e){return function(r,n,i){var o,s,a,h,u,d,l,g,c,f,p=!0===(i=i||{}).addMissingNodes,y=n;if(!bh(r))throw new Error("graphology-gexf/parser: invalid Graph constructor.");if("string"==typeof n&&(y=(new t).parseFromString(n,"application/xml")),!(y instanceof e))throw new Error("graphology-gexf/parser: source should either be a XML document or a string.");var m=y.getElementsByTagName("graph")[0],v=y.getElementsByTagName("meta")[0],w=v&&v.childNodes||[],b=y.getElementsByTagName("node"),E=y.getElementsByTagName("edge"),A=y.getElementsByTagName("attributes"),x=[],z=[];for(c=0,f=A.length;c<f;c++)"node"===(s=A[c]).getAttribute("class")?x=s.getElementsByTagName("attribute"):"edge"===s.getAttribute("class")&&(z=s.getElementsByTagName("attribute"));var M=m.getAttribute("defaultedgetype")||"undirected";"mutual"===M&&(M="undirected");var D=(a=Dh(x))[0],N=a[1],S=(a=Dh(z))[0],k=a[1],C=new r({type:E[0]?E[0].getAttribute("type")||M:"mixed"}),W=function(t){for(var e,r={},n=0,i=t.length;n<i;n++)"#text"!==(e=t[n]).nodeName&&e.textContent.trim()&&(r[e.tagName.toLowerCase()]=e.textContent);return r}(w),O=v&&v.getAttribute("lastmodifieddate");for(C.replaceAttributes(W),O&&C.setAttribute("lastModifiedDate",O),c=0,f=b.length;c<f;c++)s=b[c],C.addNode(s.getAttribute("id"),Nh(D,N,s));for(c=0,f=E.length;c<f;c++)if(d=(s=E[c]).getAttribute("id"),h=s.getAttribute("type")||M,l=s.getAttribute("source"),g=s.getAttribute("target"),u=Nh(S,k,s),h!==C.type&&"mixed"!==C.type&&(C=Ah(C)),!C.multi&&("directed"===h&&C.hasDirectedEdge(l,g)||C.hasUndirectedEdge(l,g))&&(C=xh(C)),o=Eh(C,"directed"!==h,d||null,l,g,u),!p&&(o[2]||o[3]))throw new Error("graphology-gexf/parser: one of your gexf file edges points to an inexisting node. Set the parser `addMissingNodes` option to `true` if you do not care.");return C}},kh=Sh(DOMParser,Document);function Ch(t){return"number"!=typeof t&&!t}function Wh(t){if("string"==typeof t)return t;if("number"==typeof t)return t+"";if("function"==typeof t)return t();if(t instanceof Oh)return t.toString();throw Error("Bad Parameter")}function Oh(t,e){if(!(this instanceof Oh))return new Oh;this.name_regex=/[_:A-Za-z][-._:A-Za-z0-9]*/,this.indent=!!t,this.indentString=this.indent&&"string"==typeof t?t:"    ",this.output="",this.stack=[],this.tags=0,this.attributes=0,this.attribute=0,this.texts=0,this.comment=0,this.dtd=0,this.root="",this.pi=0,this.cdata=0,this.started_write=!1,this.writer,this.writer_encoding="UTF-8",this.writer="function"==typeof e?e:function(t,e){this.output+=t}}Oh.prototype={toString:function(){return this.flush(),this.output},indenter:function(){if(this.indent){this.write("\n");for(var t=1;t<this.tags;t++)this.write(this.indentString)}},write:function(){for(var t=0;t<arguments.length;t++)this.writer(arguments[t],this.writer_encoding)},flush:function(){for(var t=this.tags;t>0;t--)this.endElement();this.tags=0},startDocument:function(t,e,r){return this.tags||this.attributes||(this.startPI("xml"),this.startAttribute("version"),this.text("string"==typeof t?t:"1.0"),this.endAttribute(),"string"==typeof e&&(this.startAttribute("encoding"),this.text(e),this.endAttribute(),this.writer_encoding=e),r&&(this.startAttribute("standalone"),this.text("yes"),this.endAttribute()),this.endPI(),this.indent||this.write("\n")),this},endDocument:function(){return this.attributes&&this.endAttributes(),this},writeElement:function(t,e){return this.startElement(t).text(e).endElement()},writeElementNS:function(t,e,r,n){return n||(n=r),this.startElementNS(t,e,r).text(n).endElement()},startElement:function(t){if(!(t=Wh(t)).match(this.name_regex))throw Error("Invalid Parameter");if(0===this.tags&&this.root&&this.root!==t)throw Error("Invalid Parameter");return this.attributes&&this.endAttributes(),++this.tags,this.texts=0,this.stack.length>0&&(this.stack[this.stack.length-1].containsTag=!0),this.stack.push({name:t,tags:this.tags}),this.started_write&&this.indenter(),this.write("<",t),this.startAttributes(),this.started_write=!0,this},startElementNS:function(t,e,r){if(t=Wh(t),e=Wh(e),!t.match(this.name_regex))throw Error("Invalid Parameter");if(!e.match(this.name_regex))throw Error("Invalid Parameter");return this.attributes&&this.endAttributes(),++this.tags,this.texts=0,this.stack.length>0&&(this.stack[this.stack.length-1].containsTag=!0),this.stack.push({name:t+":"+e,tags:this.tags}),this.started_write&&this.indenter(),this.write("<",t+":"+e),this.startAttributes(),this.started_write=!0,this},endElement:function(){if(!this.tags)return this;var t=this.stack.pop();return this.attributes>0?(this.attribute&&(this.texts&&this.endAttribute(),this.endAttribute()),this.write("/"),this.endAttributes()):(t.containsTag&&this.indenter(),this.write("</",t.name,">")),--this.tags,this.texts=0,this},writeAttribute:function(t,e){return"function"==typeof e&&(e=e()),Ch(e)?this:this.startAttribute(t).text(e).endAttribute()},writeAttributeNS:function(t,e,r,n){return n||(n=r),"function"==typeof n&&(n=n()),Ch(n)?this:this.startAttributeNS(t,e,r).text(n).endAttribute()},startAttributes:function(){return this.attributes=1,this},endAttributes:function(){return this.attributes?(this.attribute&&this.endAttribute(),this.attributes=0,this.attribute=0,this.texts=0,this.write(">"),this):this},startAttribute:function(t){if(!(t=Wh(t)).match(this.name_regex))throw Error("Invalid Parameter");return this.attributes||this.pi?(this.attribute||(this.attribute=1,this.write(" ",t,'="')),this):this},startAttributeNS:function(t,e,r){if(t=Wh(t),e=Wh(e),!t.match(this.name_regex))throw Error("Invalid Parameter");if(!e.match(this.name_regex))throw Error("Invalid Parameter");return this.attributes||this.pi?(this.attribute||(this.attribute=1,this.write(" ",t+":"+e,'="')),this):this},endAttribute:function(){return this.attribute?(this.attribute=0,this.texts=0,this.write('"'),this):this},text:function(t){return t=Wh(t),this.tags||this.comment||this.pi||this.cdata?this.attributes&&this.attribute?(++this.texts,this.write(t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")),this):(this.attributes&&!this.attribute&&this.endAttributes(),this.comment||this.cdata?this.write(t):this.write(t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),++this.texts,this.started_write=!0,this):this},writeComment:function(t){return this.startComment().text(t).endComment()},startComment:function(){return this.comment||(this.attributes&&this.endAttributes(),this.indenter(),this.write("\x3c!--"),this.comment=1,this.started_write=!0),this},endComment:function(){return this.comment?(this.write("--\x3e"),this.comment=0,this):this},writeDocType:function(t,e,r,n){return this.startDocType(t,e,r,n).endDocType()},startDocType:function(t,e,r,n){if(this.dtd||this.tags)return this;if(t=Wh(t),e=e?Wh(e):e,r=r?Wh(r):r,n=n?Wh(n):n,!t.match(this.name_regex))throw Error("Invalid Parameter");if(e&&!e.match(/^[\w\-][\w\s\-\/\+\:\.]*/))throw Error("Invalid Parameter");if(r&&!r.match(/^[\w\.][\w\-\/\\\:\.]*/))throw Error("Invalid Parameter");if(n&&!n.match(/[\w\s\<\>\+\.\!\#\-\?\*\,\(\)\|]*/))throw Error("Invalid Parameter");return e=e?' PUBLIC "'+e+'"':r?" SYSTEM":"",r=r?' "'+r+'"':"",n=n?" ["+n+"]":"",this.started_write&&this.indenter(),this.write("<!DOCTYPE ",t,e,r,n),this.root=t,this.dtd=1,this.started_write=!0,this},endDocType:function(){return this.dtd?(this.write(">"),this):this},writePI:function(t,e){return this.startPI(t).text(e).endPI()},startPI:function(t){if(!(t=Wh(t)).match(this.name_regex))throw Error("Invalid Parameter");return this.pi||(this.attributes&&this.endAttributes(),this.started_write&&this.indenter(),this.write("<?",t),this.pi=1,this.started_write=!0),this},endPI:function(){return this.pi?(this.write("?>"),this.pi=0,this):this},writeCData:function(t){return this.startCData().text(t).endCData()},startCData:function(){return this.cdata||(this.attributes&&this.endAttributes(),this.indenter(),this.write("<![CDATA["),this.cdata=1,this.started_write=!0),this},endCData:function(){return this.cdata?(this.write("]]>"),this.cdata=0,this):this},writeRaw:function(t){return t=Wh(t),this.tags||this.comment||this.pi||this.cdata?this.attributes&&this.attribute?(++this.texts,this.write(t.replace("&","&amp;").replace('"',"&quot;")),this):(this.attributes&&!this.attribute&&this.endAttributes(),++this.texts,this.write(t),this.started_write=!0,this):this}};var Uh=n,Ih=K,Ph=Oh,Fh=vh.sanitizeTagName,Lh=new Set(["color","size","x","y","z","shape","thickness"]),Th=/^\s*rgba?\s*\(/i,jh=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)\s*(?:,\s*([.0-9]*))?\)\s*$/;function Rh(t){if(!t||"string"!=typeof t)return{};if("#"===t[0])return 3===(t=t.slice(1)).length?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)}:{r:parseInt(t[0]+t[1],16),g:parseInt(t[2]+t[3],16),b:parseInt(t[4]+t[5],16)};if(Th.test(t)){var e={};return t=t.match(jh),e.r=+t[1],e.g=+t[2],e.b=+t[3],t[4]&&(e.a=+t[4]),e}return{}}function Gh(t,e,r){var n,i={};for(n in r)"label"===n?i.label=r.label:"edge"===t&&"weight"===n?i.weight=r.weight:Lh.has(n)?(i.viz=i.viz||{},i.viz[n]=r[n]):(i.attributes=i.attributes||{},i.attributes[n]=r[n]);return i}function qh(t){return null==t||""===t||t!=t}function Bh(t,e){return"liststring"===t&&Array.isArray(e)?e.join("|"):""+e}function _h(t){for(var e,r,n,i,o,s={},a=0,h=t.length;a<h;a++)if(e=t[a].attributes)for(n in e)i=e[n],o=void 0,"empty"!==(r=qh(i)?"empty":Array.isArray(i)?"liststring":"boolean"==typeof i?"boolean":"object"==typeof i?"string":"number"==typeof i?i===(0|i)?(o=i)<=2147483647&&o>=-2147483647?"integer":"long":"double":"string")&&(s[n]?"integer"===s[n]&&"long"===r?s[n]=r:s[n]!==r&&(s[n]="string"):s[n]=r);return s}function Hh(t,e,r){var n;if(Object.keys(e).length){for(n in t.startElement("attributes"),t.writeAttribute("class",r),e)t.startElement("attribute"),t.writeAttribute("id",n),t.writeAttribute("title",n),t.writeAttribute("type",e[n]),t.endElement();t.endElement()}}function Vh(t,e,r,n){var i,o,s,a,h,u,d,l,g,c,f,p=!Object.keys(r).length;for(t.startElement(e+"s"),c=0,f=n.length;c<f;c++){if(u=(i=n[c]).attributes,l=i.viz,t.startElement(e),t.writeAttribute("id",i.key),"edge"===e&&((h=i.undirected?"undirected":"directed")!==t.defaultEdgeType&&t.writeAttribute("type",h),t.writeAttribute("source",i.source),t.writeAttribute("target",i.target),("number"==typeof(d=i.weight)&&!isNaN(d)||"string"==typeof d)&&t.writeAttribute("weight",i.weight)),i.label&&t.writeAttribute("label",i.label),!p&&u){for(o in t.startElement("attvalues"),r)if(o in u){if(qh(a=u[o]))continue;t.startElement("attvalue"),t.writeAttribute("for",o),t.writeAttribute("value",Bh(r[o],a)),t.endElement()}t.endElement()}if(l){if(l.color){for(g in s=Rh(l.color),t.startElementNS("viz","color"),s)t.writeAttribute(g,s[g]);t.endElement()}"size"in l&&(t.startElementNS("viz","size"),t.writeAttribute("value",l.size),t.endElement()),("x"in l||"y"in l||"z"in l)&&(t.startElementNS("viz","position"),"x"in l&&t.writeAttribute("x",l.x),"y"in l&&t.writeAttribute("y",l.y),"z"in l&&t.writeAttribute("z",l.z),t.endElement()),l.shape&&(t.startElementNS("viz","shape"),t.writeAttribute("value",l.shape),t.endElement()),"thickness"in l&&(t.startElementNS("viz","thickness"),t.writeAttribute("value",l.thickness),t.endElement())}t.endElement()}t.endElement()}var Yh={encoding:"UTF-8",pretty:!0,formatNode:Gh.bind(null,"node"),formatEdge:Gh.bind(null,"edge")};mh.parse=kh,mh.write=function(t,e){if(!Uh(t))throw new Error("graphology-gexf/writer: invalid graphology instance.");var r=!1!==(e=e||{}).pretty&&"  ",n=e.formatNode||Yh.formatNode,i=e.formatEdge||Yh.formatEdge,o=new Ph(r);o.startDocument("1.0",e.encoding||Yh.encoding),o.startElement("gexf"),o.writeAttribute("version","1.2"),o.writeAttribute("xmlns","http://www.gexf.net/1.2draft"),o.writeAttribute("xmlns:viz","http:///www.gexf.net/1.1draft/viz"),o.startElement("meta");var s,a,h=t.getAttributes();for(var u in h.lastModifiedDate&&o.writeAttribute("lastmodifieddate",h.lastModifiedDate),h)"lastModifiedDate"!==u&&(s=Fh(u))&&("string"!=typeof(a=h[u])&&"number"!=typeof a&&"boolean"!=typeof a||o.writeElement(s,""+a));o.endElement(),o.startElement("graph");var d=Ih(t);o.defaultEdgeType="mixed"===d?"directed":d,o.writeAttribute("defaultedgetype",o.defaultEdgeType);var l=function(t,e){var r=new Array(t.order),n=0;return t.forEachNode((function(t,i){var o=e(t,i);o.key=t,r[n++]=o})),r}(t,n),g=function(t,e){var r=new Array(t.size),n=0;return t.forEachEdge((function(t,i,o,s,a,h,u){var d=e(t,i);d.key=t,d.source=o,d.target=s,d.undirected=u,r[n++]=d})),r}(t,i),c=_h(l);Hh(o,c,"node");var f=_h(g);return Hh(o,f,"edge"),Vh(o,"node",c,l),Vh(o,"edge",f,g),o.toString()};var Kh={},Xh={};function Jh(t){return("0"+(0|t).toString(16)).slice(-2)}Xh.DEFAULT_FORMATTER=function(t){var e,r,n,i;return"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b?((e=function(t){var e={};for(var r in t)"r"!==r&&"g"!==r&&"b"!==r&&(e[r]=t[r]);return e}(t)).color=(r=t.r,n=t.g,i=t.b,"#"+Jh(r)+Jh(n)+Jh(i)),e):t};var Qh=i,Zh=Rt.mergeEdge,$h=Vs,tu=Ks,eu=Xh.DEFAULT_FORMATTER;function ru(t){return+t}var nu={boolean:function(t){return"true"===t.toLowerCase()},int:ru,long:ru,float:ru,double:ru,string:function(t){return t}};function iu(t,e,r){var n,i,o,s,a,h=r.getElementsByTagName("data"),u={};for(i=0,o=h.length;i<o;i++)void 0===(a=t[s=(n=h[i]).getAttribute("key")])?u[s]=n.textContent:u[a.name]=a.cast(n.textContent);for(s in e)s in u||(u[s]=e[s]);return u}var ou=function(t,e){return function(r,n,i){var o,s=!0===(i=i||{}).addMissingNodes,a=n;if(!Qh(r))throw new Error("graphology-graphml/parser: invalid Graph constructor.");if("string"==typeof n&&(a=(new t).parseFromString(n,"application/xml")),!(a instanceof e))throw new Error("graphology-gexf/parser: source should either be a XML document or a string.");var h=a.getElementsByTagName("graph")[0],u=function(t){for(var e,r=t.childNodes,n=[],i=0,o=r.length;i<o;i++)if(1===(e=r[i]).nodeType){if("data"!==e.tagName.toLowerCase())break;n.push(e)}return n}(h),d=a.getElementsByTagName("key"),l=a.getElementsByTagName("node"),g=a.getElementsByTagName("edge"),c=h.getAttribute("edgedefault")||"undirected",f=function(t){var e,r,n,i,o,s,a,h,u,d={graph:{},node:{},edge:{}},l={graph:{},node:{},edge:{}};for(e=0,r=t.length;e<r;e++)n=(a=t[e]).getAttribute("for")||"node",i=a.getAttribute("id"),o=a.getAttribute("attr.name"),s=a.getAttribute("attr.type")||"string",u=void 0,0!==(h=a.getElementsByTagName("default")).length&&(u=h[0].textContent),d[n][i]={name:o,cast:nu[s]},void 0!==u&&(l[n][o]=u);return{models:d,defaults:l}}(d),p=new r({type:c}),y=h.getAttribute("id");y&&p.setAttribute("id",y);var m=a.createElement("graph");u.forEach((function(t){m.appendChild(t)}));var v,w,b,E,A,x,z,M,D,N=iu(f.models.graph,f.defaults.graph,m);for(p.mergeAttributes(N),v=0,w=l.length;v<w;v++)E=(b=l[v]).getAttribute("id"),A=iu(f.models.node,f.defaults.node,b),A=eu(A),p.addNode(E,A);for(v=0,w=g.length;v<w;v++)if(E=(x=g[v]).getAttribute("id"),z=x.getAttribute("source"),M=x.getAttribute("target"),D="true"===x.getAttribute("directed")?"directed":c,A=iu(f.models.edge,f.defaults.edge,x),A=eu(A),"mixed"!==!p.type&&D!==p.type&&(p=$h(p)),p.multi||("undirected"===D?p.hasUndirectedEdge(z,M)&&(p=tu(p)):p.hasDirectedEdge(z,M)&&(p=tu(p))),o=Zh(p,"undirected"===D,E||null,z,M,A),!s&&(o[2]||o[3]))throw new Error("graphology-graphml/parser: one of your graphml file edges points to an inexisting node. Set the parser `addMissingNodes` option to `true` if you do not care.");return p}},su=ou(DOMParser,Document);Kh.parse=su;var au=e.assertions=p,hu=e.canvas=V,uu=e.communitiesLouvain=Lt,du=e.components=Jt,lu=e.generators=Pe,gu=e.layout=kr,cu=e.layoutForce=Cr,fu=e.layoutForceAtlas2=Gr,pu=e.layoutNoverlap=Qr,yu=e.metrics=Us,mu=e.operators=ta,vu=e.shortestPath=ca,wu=e.simplePath=ba,bu=e.traversal=qa,Eu=e.utils=Ya,Au=e.ForceLayout=nh,xu=e.FA2Layout=dh,zu=e.NoverlapLayout=yh,Mu=e.gexf=mh,Du=e.graphml=Kh;t.FA2Layout=xu,t.ForceLayout=Au,t.NoverlapLayout=zu,t.assertions=au,t.canvas=hu,t.communitiesLouvain=uu,t.components=du,t.default=e,t.generators=lu,t.gexf=Mu,t.graphml=Du,t.layout=gu,t.layoutForce=cu,t.layoutForceAtlas2=fu,t.layoutNoverlap=pu,t.metrics=yu,t.operators=mu,t.shortestPath=vu,t.simplePath=wu,t.traversal=bu,t.utils=Eu,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=graphology-library.min.js.map
